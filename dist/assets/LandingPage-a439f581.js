import{u as re,a as X}from"./useAuth.vue_vue_type_script_lang-0f4a9525.js";import{d as Q,a as le,r as v,u as ce,x as Ce,o as de,y as _,c as p,f as S,F as O,z as te,g as t,w as x,k as ue,j as M,t as U,l as ge,n as A,_ as G,h as V,p as Se,v as be,b as he,e as ne,i as pe,q as me,s as ve,A as ke}from"./index-36d15da9.js";import{g as xe,r as Pe,l as $e,d as Ie}from"./index.esm2017-6b538d32.js";import{P as _e,R as W,k as oe,b as Y,_ as j,d as z,g as fe,y as Te,x as ae,c as Le}from"./index.esm2017-8a8714eb.js";import{a as ye}from"./axios-4a70c6fc.js";import{c as se}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as Fe}from"./useUserDetails.vue_vue_type_script_lang-3df38338.js";import{u as ie}from"./useDetailButtons-29f69ecb.js";const Ee="/Vector1.png",Be="/Vector2.png",De="/Vector3.png",Ae="/section4Img.png",qe={key:0,class:A({resultsContainer:!0})},Ue=["onClick"],Me={class:"result-item-other"},Re={class:"result-item-header"},He=["onClick"],Ne=["innerHTML","onClick"],Oe={class:"editSectionbtn"},Ve=["onClick"],We=["onClick"],Ye=Q({__name:"AuthorFeedPage",setup(b){let u;le(()=>{clearTimeout(u);const o=document.getElementById("warningShow");o.style.display="none"});const l=v([]),k=v(""),g=new DOMParser,P=ce(),{app:L}=re(),f=xe(L),y=_e(L),w=X();Ce(()=>{var o,h;((o=l.value)==null?void 0:o.length)>0&&((h=l.value)==null||h.sort((i,r)=>r.postTime.seconds-i.postTime.seconds),_(()=>{const i=document.getElementById("warningShow");i&&(i.style.display="none")}))}),de(()=>{clearTimeout(u),_(()=>{const o=document.getElementById("warningShow");o&&(o.style.display="flex",o.textContent="Loading ...")}),F()});async function T(o){k.value="";const h=o.postContain;await ye.post("/postContent",{contentUrl:h}).then(i=>{const r=g.parseFromString(i.data,"text/html");k.value=r.body.innerHTML})}async function F(){const o=W(j(y,"posts"),Y("posterId","==",w.signedUser.id),oe(10));try{const i=(await z(o)).docs.map(async c=>{var a;const e=c.data();await T(e);const n=g.parseFromString(k.value,"text/html");return n.body.querySelectorAll("img").forEach(C=>{C.remove()}),n.body.querySelectorAll("video").forEach(C=>{C.remove()}),(a=n.body.querySelector("h1"))==null||a.remove(),k.value=n.body.innerHTML,e.postContain=k.value,e}),r=await Promise.all(i);l.value=r,l.value.length>0&&_(()=>{const c=document.getElementById("warningShow");c&&(c.style.display="none")}),l.value.length===0&&_(()=>{const c=document.getElementById("warningShow");c&&(c.style.display="flex",c.textContent="You have not posted anything yet")})}catch{_(()=>{const i=document.getElementById("warningShow");i&&(i.style.display="flex",i.textContent="Something went wrong, check your internet connection and reload page.")})}}function $(o){P.push(`/post/${o}`)}function R(o){if(o===w.signedUser.id)return P.push("/userProfile");P.push(`/chatterUser/${o}`)}function K(o){P.push(`/write/${o}`)}async function H(o){try{const h=W(j(y,"posts"),Y("postId","==",o));(await z(h)).forEach(c=>{const e=c.data(),n=fe(y,"posts",e.postId);Te(n)});const r=`ChatterAppFiles/posts/${o}`;N(r)}catch{_(()=>{const i=document.getElementById("warningShow");i&&(i.style.display="flex",i.textContent="Something went wrong, check your internet connection and try again later.")})}}async function N(o){const h=Pe(f,o),r=(await $e(h)).items.map(c=>Ie(c));await Promise.all(r)}return(o,h)=>{var i;return((i=l.value)==null?void 0:i.length)>0?(p(),S("div",qe,[(p(!0),S(O,null,te(l.value,(r,c)=>(p(),S("div",{key:c,class:"result-item"},[t("div",{class:"imgCon",onClick:x(e=>R(r.posterId),["prevent"]),style:ue({backgroundImage:`url(${M(w).signedUser.profilePicture})`})},null,12,Ue),t("div",Me,[t("div",Re,[t("span",{onClick:x(e=>R(r.posterId),["prevent"])},U(M(w).signedUser.blogName),9,He),t("span",null,U(se(r.postTime.seconds)),1)]),t("div",{innerHTML:r.postContain,id:"divContent",onClick:x(e=>$(r.postId),["prevent"])},null,8,Ne),t("div",Oe,[t("button",{onClick:x(e=>K(r.postId),["prevent"])},"Edit",8,Ve),t("button",{onClick:x(e=>H(r.postId),["prevent"])},"Delete",8,We)])])]))),128))])):ge("",!0)}}});const je=G(Ye,[["__scopeId","data-v-8e2a3ab6"]]),ze={class:"btns"},Xe={key:0,class:A({resultsContainer:!0})},Qe=["onClick"],Ge={class:"result-item-other"},Je={class:"result-item-header"},Ke=["onClick"],Ze=["innerHTML","onClick"],et={key:1,class:A({resultsContainer:!0})},tt=["src","alt","onClick"],nt={class:"result-item-other"},ot={class:"result-item-header"},st=["onClick"],at=["innerHTML","onClick"],it={class:"noFollower"},rt=Q({__name:"ReaderFeedPage",setup(b){le(()=>{const e=document.getElementById("warningShow");e.style.display="none"});const u=v(""),l=new DOMParser;Fe();const{app:k}=re(),g=X(),P=_e(k),L=ce(),f=v(!0),y=v("interested_section"),w=v([]),T=v([]),F=v(),$=v([]),R=v(0),K=v(0);de(()=>{_(()=>{const e=document.getElementById("warningShow");e&&(e.style.display="flex",e.textContent="Loading ...")}),g.signedUser.interests.forEach(e=>{const n=e.trim();w.value.push(n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())});try{r(w.value)}catch{_(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Something went wrong, check your internet connection and reload page.")})}});function H(e){if(T.value=[],$.value=[],y.value=e,_(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Loading ...")}),e==="following_section")try{c()}catch{_(()=>{const a=document.getElementById("warningShow");a&&(a.style.display="flex",a.textContent="Something went wrong, check your internet connection and reload page.")})}if(e==="interested_section"){g.signedUser.interests.forEach(n=>{const a=n.trim();w.value.push(a.charAt(0).toUpperCase()+a.slice(1).toLowerCase())});try{r(w.value)}catch{_(()=>{const a=document.getElementById("warningShow");a&&(a.style.display="flex",a.textContent="Something went wrong, check your internet connection and reload page.")})}}}function N(e){L.push(`/post/${e}`)}function o(e){if(e===g.signedUser.id)return L.push("/userProfile");L.push(`/chatterUser/${e}`)}async function h(e){u.value="";const n=e.postContain;await ye.post("/postContent",{contentUrl:n}).then(a=>{const C=l.parseFromString(a.data,"text/html");u.value=C.body.innerHTML}).catch(a=>{console.log(a)})}async function i(e){F.value=null;const n=fe(P,"users",e),a=await Le(n);if(a.data()!==void 0){const{fullName:C,profilePicture:s,username:d,blogName:m}=a.data(),E={profilePicture:s,posterID:e,fullName:C,username:d,blogName:m};F.value={id:e,img:E.profilePicture,fullName:E.fullName,username:E.username,blogname:E.blogName}}}async function r(e){const n=e.length<10?e.length:10,a=Math.floor(10/n);T.value=[];const C=e.map(async m=>{const E=W(j(P,"posts"),Y("postTag","==",m),ae("postTime","desc"),oe(a)),Z=await z(E);return Promise.all(Z.docs.map(async B=>{var q;const I=B.data();await h(I);const D=l.parseFromString(u.value,"text/html");return D.body.querySelectorAll("img").forEach(ee=>{ee.remove()}),D.body.querySelectorAll("video").forEach(ee=>{ee.remove()}),(q=D.body.querySelector("h1"))==null||q.remove(),u.value=D.body.innerHTML,I.postContain=u.value,await i(I.posterId),I.posterDetails=F.value,F.value=null,f.value=!1,I}))}),d=(await Promise.all(C)).flat();T.value=d,T.value.length>0&&_(()=>{const m=document.getElementById("warningShow");m&&(m.style.display="none")}),T.value.length===10&&(K.value=10)}async function c(){const e=g.signedUser.following.theFollowings.length<10?g.signedUser.following.theFollowings.length:10,n=Math.floor(10/e);$.value=[];const a=g.signedUser.following.theFollowings.map(async d=>{const m=W(j(P,"posts"),Y("posterId","==",d),ae("postTime","desc"),oe(n)),E=await z(m);return Promise.all(E.docs.map(async Z=>{var D;const B=Z.data();await h(B);const I=l.parseFromString(u.value,"text/html");return I.body.querySelectorAll("img").forEach(q=>{q.remove()}),I.body.querySelectorAll("video").forEach(q=>{q.remove()}),(D=I.body.querySelector("h1"))==null||D.remove(),u.value=I.body.innerHTML,B.postContain=u.value,await i(B.posterId),B.posterDetails=F.value,F.value=null,f.value=!1,B}))}),s=(await Promise.all(a)).flat();$.value=s,$.value.length===10&&(R.value=10),$.value.length>0?_(()=>{const d=document.getElementById("warningShow");d&&(d.style.display="none")}):$.value.length===0&&_(()=>{const d=document.getElementById("warningShow");d&&(d.style.display="flex",d.textContent="No post to show from your followings.")})}return(e,n)=>{var a,C;return p(),S(O,null,[t("div",ze,[t("button",{type:"button",onClick:n[0]||(n[0]=s=>H("interested_section")),class:A({active:y.value==="interested_section"})},"Interested",2),t("button",{type:"button",onClick:n[1]||(n[1]=s=>H("following_section")),class:A({active:y.value==="following_section"})},"Followings",2)]),((a=T.value)==null?void 0:a.length)>0&&y.value==="interested_section"?(p(),S("div",Xe,[(p(!0),S(O,null,te(T.value,(s,d)=>(p(),S("div",{key:d,class:"result-item"},[t("div",{class:"imgCon",onClick:x(m=>o(s.posterId),["prevent"]),style:ue({backgroundImage:`url(${s==null?void 0:s.posterDetails.img})`})},null,12,Qe),t("div",Ge,[t("div",Je,[t("span",{onClick:x(m=>o(s.posterId),["prevent"])},U(s==null?void 0:s.posterDetails.blogname),9,Ke),t("span",null,U(se(s.postTime.seconds)),1)]),t("div",{innerHTML:s.postContain,id:"divContent",onClick:x(m=>N(s.postId),["prevent"])},null,8,Ze),V(ie,{post:s},null,8,["post"])])]))),128))])):((C=$.value)==null?void 0:C.length)>0&&y.value==="following_section"?(p(),S("div",et,[(p(!0),S(O,null,te($.value,(s,d)=>(p(),S("div",{key:d,class:"result-item"},[t("img",{src:s.posterDetails.img,alt:s.posterDetails.username+"profile picture",class:"result-item-image",onClick:x(m=>o(s.posterId),["prevent"])},null,8,tt),t("div",nt,[t("div",ot,[t("span",{onClick:x(m=>o(s.posterId),["prevent"])},U(s.posterDetails.blogname),9,st),t("span",null,U(se(s.postTime.seconds)),1)]),t("div",{innerHTML:s.postContain,id:"divContent",onClick:x(m=>N(s.postId),["prevent"])},null,8,at),V(ie,{post:s},null,8,["post"])])]))),128))])):ge("",!0),Se(t("div",it," You are not following any one yet. ",512),[[be,M(g).signedUser.following.theFollowings.length===0&&y.value==="following_section"]])],64)}}});const lt=G(rt,[["__scopeId","data-v-713551c3"]]),we=b=>(me("data-v-0ab73268"),b=b(),ve(),b),ct={class:"feedDiv"},dt=we(()=>t("div",{class:"lineContainer"},[t("div",{class:A({line:!0})}),t("div",{class:A({line:!0})})],-1)),ut=we(()=>t("div",{id:"warningShow"},null,-1)),gt=Q({__name:"FeedPage",setup(b){const u=X(),l=v(!1);let k=v(0),g=v(0);function P(f){l.value=!0,k.value=f.offsetX,g.value=f.offsetY}function L(f){if(l.value){const y=f.clientX-k.value,w=f.clientY-g.value;f.target.style.left=`${y}px`,f.target.style.top=`${w}px`,l.value=!1}}return(f,y)=>{const w=he("RouterLink");return p(),S("div",ct,[M(u).asReader?(p(),ne(lt,{key:0})):(p(),ne(je,{key:1})),V(w,{to:"/write",draggable:"true",onDragstart:P,onDragend:L},{default:pe(()=>[dt]),_:1}),ut])}}});const ht=G(gt,[["__scopeId","data-v-0ab73268"]]),J=b=>(me("data-v-1ce02324"),b=b(),ve(),b),pt={key:1,id:"landingPagecontainer"},mt={id:"section1"},vt=J(()=>t("section",{id:"img"},null,-1)),_t={id:"text"},ft=J(()=>t("h2",null,"Welcome to Chatter: A Haven for Text-Based Content",-1)),yt=J(()=>t("p",null,"Unleash the power of Words, Connect with Like-minded Readers.",-1)),wt=J(()=>t("button",null,"Get Started",-1)),Ct=ke('<section id="section2" data-v-1ce02324><h2 data-v-1ce02324>About Chatter</h2><p data-v-1ce02324>Chatter is a multi-functional platform where authors and readers can have access to their own content. It aims to be a traditional bookworm&#39;s heaven and a blog to get access to more text based content. Our vision is to foster an inclusive and vibrant community where diversity is celebrated. We encourage open-mindedness and respect for all individuals, regardless of their backgrounds or beliefs. By promoting dialogue and understanding, we strive.</p></section><section id="section3" data-v-1ce02324><h2 data-v-1ce02324>Why you should join chatter</h2><p data-v-1ce02324>Our goal is to make writers and readers see our platform as their next heaven for blogging, ensuring ease in interactions, connecting with like-minded peers, have access to favorite content based on interests and able to communicate your great ideas with people. </p><section id="section3Parts" data-v-1ce02324><section data-v-1ce02324><img src="'+Ee+'" data-v-1ce02324><h3 data-v-1ce02324>Analaytics</h3><p data-v-1ce02324>Analytics to track the number of views, likes and comment and also analyse the performance of your articles over a poeriod of time</p></section><section data-v-1ce02324><img src="'+Be+'" alt="analysis" data-v-1ce02324><h3 data-v-1ce02324>Social interactions</h3><p data-v-1ce02324>Users on the platform can interact with posts they like, comment and engage in dicussions</p></section><section data-v-1ce02324><img src="'+De+'" data-v-1ce02324><h3 data-v-1ce02324>Content creation</h3><p data-v-1ce02324>Write nice and appealing with our in-built markdown, a rich text editor</p></section></section></section><section id="section4" data-v-1ce02324><img src="'+Ae+'" alt="Adebola Muhydeen" data-v-1ce02324><section data-v-1ce02324><blockquote data-v-1ce02324><q data-v-1ce02324>Chatter has become an integral part of my online experience. As a user of this incredible blogging platform, I have discovered a vibrant community of individuals who are passionate about sharing their ideas and engaging in thoughtful dicussions.</q></blockquote><strong data-v-1ce02324>Adebola Muhydeen,</strong> <em data-v-1ce02324>Software developer at Apple</em></section></section>',3),St=Q({__name:"LandingPage",setup(b){const u=X();return(l,k)=>{const g=he("RouterLink");return M(u).signedUser.isLogined?(p(),ne(ht,{key:0})):(p(),S("section",pt,[t("section",mt,[vt,t("section",_t,[ft,yt,V(g,{to:"/login"},{default:pe(()=>[wt]),_:1})])]),Ct]))}}});const Ft=G(St,[["__scopeId","data-v-1ce02324"]]);export{Ft as default};
