import{u as ie,a as G}from"./useAuth.vue_vue_type_script_lang-a9283b65.js";import{d as Y,a as re,r as w,u as le,s as Ce,x as U,o as ce,c as u,f as g,F as O,y as ee,g as o,w as C,n as de,h as M,t as B,k as ue,z as E,_ as J,i as V,m as be,v as ke,b as pe,e as te,j as me,p as he,q as ge,A as Se}from"./index-a41cb3dd.js";import{g as ve,r as oe,a as _e,l as Pe,d as $e}from"./index.esm2017-a3842238.js";import{P as ye,R as W,b as j,_ as z,d as Q,g as fe,y as Ie,x as se,c as xe,k as Te}from"./index.esm2017-62f401cd.js";import{a as we}from"./axios-4a70c6fc.js";import{c as ne}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as Le}from"./useUserDetails.vue_vue_type_script_lang-2f39a4c8.js";import{u as ae}from"./useDetailButtons-0eb84136.js";import"./useLikeButton-133f6f6d.js";const Fe="/Vector1.png",Ee="/Vector2.png",qe="/Vector3.png",Ae="/section4Img.png",Re={key:0,class:E({resultsContainer:!0})},Ue=["onClick"],Be={class:"result-item-other"},De={class:"result-item-header"},Me=["onClick"],He=["innerHTML","onClick"],Ne={class:"editSectionbtn"},Oe=["onClick"],Ve=["onClick"],We=Y({__name:"AuthorFeedPage",setup(v){let p;re(()=>{clearTimeout(p);const n=document.getElementById("warningShow");n.style.display="none"});const c=w([]),_=w(""),k=new DOMParser,q=le(),{app:S}=ie(),A=ve(S),x=ye(S),T=G(),P=w(!0);Ce(()=>{var n,d;((n=c.value)==null?void 0:n.length)>0&&((d=c.value)==null||d.sort((r,a)=>a.postTime.seconds-r.postTime.seconds),U(()=>{const r=document.getElementById("warningShow");r&&(r.style.display="none")}))}),ce(()=>{clearTimeout(p),U(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Loading ...")}),L()});async function D(n){_.value="";try{const d=oe(A,n.postContain),r=await _e(d).catch(a=>{console.log(a)});await we.post("/postContent",{contentUrl:r}).then(a=>{const y=k.parseFromString(a.data,"text/html");_.value=y.body.innerHTML}).catch(a=>{console.log(a)})}catch{const r=document.getElementById("ErrorShow");r.style.display="flex",r.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{r.style.display="none"},3e3)}}async function L(){const n=W(z(x,"posts"),j("posterId","==",T.signedUser.id)),r=(await Q(n)).docs.map(async y=>{var i;const t=y.data();await D(t);const s=k.parseFromString(_.value,"text/html");return s.body.querySelectorAll("img").forEach(l=>{l.remove()}),s.body.querySelectorAll("video").forEach(l=>{l.remove()}),(i=s.body.querySelector("h1"))==null||i.remove(),_.value=s.body.innerHTML,t.postContain=_.value,t}),a=await Promise.all(r);c.value=a,P.value=!1}function I(n){q.push(`/post/${n}`)}function $(n){if(n===T.signedUser.id)return q.push("/userProfile");q.push(`/chatterUser/${n}`)}function X(n){q.push(`/write/${n}`)}async function H(n){try{const d=W(z(x,"posts"),j("postId","==",n));(await Q(d)).forEach(y=>{const t=y.data(),s=fe(x,"posts",t.postId);Ie(s)});const a=`ChatterAppFiles/posts/${n}`;N(a)}catch(d){console.log(d)}}async function N(n){const d=oe(A,n),a=(await Pe(d)).items.map(y=>$e(y));await Promise.all(a)}return(n,d)=>{var r;return((r=c.value)==null?void 0:r.length)>0&&P.value===!1?(u(),g("div",Re,[(u(!0),g(O,null,ee(c.value,(a,y)=>(u(),g("div",{key:y,class:"result-item"},[o("div",{class:"imgCon",onClick:C(t=>$(a.posterId),["prevent"]),style:de({backgroundImage:`url(${M(T).signedUser.profilePicture})`})},null,12,Ue),o("div",Be,[o("div",De,[o("span",{onClick:C(t=>$(a.posterId),["prevent"])},B(M(T).signedUser.blogName),9,Me),o("span",null,B(ne(a.postTime.seconds)),1)]),o("div",{innerHTML:a.postContain,id:"divContent",onClick:C(t=>I(a.postId),["prevent"])},null,8,He),o("div",Ne,[o("button",{onClick:C(t=>X(a.postId),["prevent"])},"Edit",8,Oe),o("button",{onClick:C(t=>H(a.postId),["prevent"])},"Delete",8,Ve)])])]))),128))])):ue("",!0)}}});const je=J(We,[["__scopeId","data-v-544dc2ea"]]),ze={class:"btns"},Qe={key:0,class:E({resultsContainer:!0})},Ge=["onClick"],Ye={class:"result-item-other"},Je={class:"result-item-header"},Ke=["onClick"],Xe=["innerHTML","onClick"],Ze={key:1,class:E({resultsContainer:!0})},et=["src","alt","onClick"],tt={class:"result-item-other"},ot={class:"result-item-header"},nt=["onClick"],st=["innerHTML","onClick"],at={class:"noFollower"},it=Y({__name:"ReaderFeedPage",setup(v){let p;re(()=>{clearTimeout(p);const t=document.getElementById("warningShow");t.style.display="none"});const c=w(""),_=new DOMParser;Le();const{app:k}=ie(),q=ve(k),S=G(),A=ye(k),x=le(),T=w(!0),P=w("interested_section"),D=w([]),L=w([]),I=w(),$=w([]),X=w(0);ce(()=>{clearTimeout(p),U(()=>{const t=document.getElementById("warningShow");t&&(t.style.display="flex",t.textContent="Loading ...")}),a(D.value)});function H(t){L.value=[],$.value=[],P.value=t,U(()=>{const s=document.getElementById("warningShow");s&&(s.style.display="flex",s.textContent="Loading ...")}),t==="following_section"&&y(),t==="interested_section"&&a(D.value)}function N(t){x.push(`/post/${t}`)}function n(t){if(t===S.signedUser.id)return x.push("/userProfile");x.push(`/chatterUser/${t}`)}S.signedUser.interests.forEach(t=>{const s=t.trim();D.value.push(s.charAt(0).toUpperCase()+s.slice(1).toLowerCase())});async function d(t){c.value="";try{const s=oe(q,t.postContain),i=await _e(s).catch(l=>{console.log(l)});await we.post("/postContent",{contentUrl:i}).then(l=>{const e=_.parseFromString(l.data,"text/html");c.value=e.body.innerHTML}).catch(l=>{console.log(l)})}catch{const i=document.getElementById("ErrorShow");i.style.display="flex",i.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{i.style.display="none"},3e3)}}async function r(t){I.value=null;try{const s=fe(A,"users",t),i=await xe(s);if(i.data()!==void 0){const{fullName:l,profilePicture:e,username:m,blogName:f}=i.data(),h={profilePicture:e,posterID:t,fullName:l,username:m,blogName:f};I.value={id:t,img:h.profilePicture,fullName:h.fullName,username:h.username,blogname:h.blogName}}}catch{}}async function a(t){try{const s=t.map(async e=>{const m=W(z(A,"posts"),j("postTag","==",e),se("postTime","desc")),f=await Q(m);return Promise.all(f.docs.map(async h=>{var R;const b=h.data();await d(b);const F=_.parseFromString(c.value,"text/html");return F.body.querySelectorAll("img").forEach(Z=>{Z.remove()}),F.body.querySelectorAll("video").forEach(Z=>{Z.remove()}),(R=F.body.querySelector("h1"))==null||R.remove(),c.value=F.body.innerHTML,b.postContain=c.value,await r(b.posterId),b.posterDetails=I.value,I.value=null,T.value=!1,b}))}),l=(await Promise.all(s)).flat();L.value=l,L.value.length>0&&U(()=>{const e=document.getElementById("warningShow");e&&(e.style.display="none")})}catch(s){console.log(s);const i=document.getElementById("ErrorShow");i.style.display="flex",i.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{i.style.display="none"},3e3)}}async function y(){const t=S.signedUser.following.theFollowings.length<10?S.signedUser.following.theFollowings.length:10,s=Math.floor(10/t);$.value=[];const i=S.signedUser.following.theFollowings.map(async l=>{try{const e=W(z(A,"posts"),j("posterId","==",l),se("postTime","desc"),Te(s)),m=await Q(e);return Promise.all(m.docs.map(async f=>{var F;const h=f.data();await d(h);const b=_.parseFromString(c.value,"text/html");return b.body.querySelectorAll("img").forEach(R=>{R.remove()}),b.body.querySelectorAll("video").forEach(R=>{R.remove()}),(F=b.body.querySelector("h1"))==null||F.remove(),c.value=b.body.innerHTML,h.postContain=c.value,await r(h.posterId),h.posterDetails=I.value,I.value=null,T.value=!1,h}))}catch(e){throw console.log(e),new Error("Something went wrong")}});try{const e=(await Promise.all(i)).flat();$.value=e,$.value.length>10&&(X.value=10),U(()=>{const m=document.getElementById("warningShow");m&&(m.style.display="none")})}catch{const e=document.getElementById("ErrorShow");e.style.display="flex",e.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{e.style.display="none"},3e3)}}return(t,s)=>{var i,l;return u(),g(O,null,[o("div",ze,[o("button",{type:"button",onClick:s[0]||(s[0]=e=>H("interested_section")),class:E({active:P.value==="interested_section"})},"Interested",2),o("button",{type:"button",onClick:s[1]||(s[1]=e=>H("following_section")),class:E({active:P.value==="following_section"})},"Followings",2)]),((i=L.value)==null?void 0:i.length)>0&&P.value==="interested_section"?(u(),g("div",Qe,[(u(!0),g(O,null,ee(L.value,(e,m)=>(u(),g("div",{key:m,class:"result-item"},[o("div",{class:"imgCon",onClick:C(f=>n(e.posterId),["prevent"]),style:de({backgroundImage:`url(${e==null?void 0:e.posterDetails.img})`})},null,12,Ge),o("div",Ye,[o("div",Je,[o("span",{onClick:C(f=>n(e.posterId),["prevent"])},B(e==null?void 0:e.posterDetails.blogname),9,Ke),o("span",null,B(ne(e.postTime.seconds)),1)]),o("div",{innerHTML:e.postContain,id:"divContent",onClick:C(f=>N(e.postId),["prevent"])},null,8,Xe),V(ae,{post:e},null,8,["post"])])]))),128))])):((l=$.value)==null?void 0:l.length)>0&&P.value==="following_section"?(u(),g("div",Ze,[(u(!0),g(O,null,ee($.value,(e,m)=>(u(),g("div",{key:m,class:"result-item"},[o("img",{src:e.posterDetails.img,alt:e.posterDetails.username+"profile picture",class:"result-item-image",onClick:C(f=>n(e.posterId),["prevent"])},null,8,et),o("div",tt,[o("div",ot,[o("span",{onClick:C(f=>n(e.posterId),["prevent"])},B(e.posterDetails.blogname),9,nt),o("span",null,B(ne(e.postTime.seconds)),1)]),o("div",{innerHTML:e.postContain,id:"divContent",onClick:C(f=>N(e.postId),["prevent"])},null,8,st),V(ae,{post:e},null,8,["post"])])]))),128))])):ue("",!0),be(o("div",at," You are not following any one yet. ",512),[[ke,M(S).signedUser.following.theFollowings.length===0&&P.value==="following_section"]])],64)}}});const rt=J(it,[["__scopeId","data-v-7be3ce25"]]),lt=v=>(he("data-v-8df9cbd7"),v=v(),ge(),v),ct={class:"feedDiv"},dt=lt(()=>o("div",{class:"lineContainer"},[o("div",{class:E({line:!0})}),o("div",{class:E({line:!0})})],-1)),ut=Y({__name:"FeedPage",setup(v){const p=G();return(c,_)=>{const k=pe("RouterLink");return u(),g("div",ct,[M(p).asReader?(u(),te(rt,{key:0})):(u(),te(je,{key:1})),V(k,{to:"/write",draggable:""},{default:me(()=>[dt]),_:1})])}}});const pt=J(ut,[["__scopeId","data-v-8df9cbd7"]]),K=v=>(he("data-v-7d57d0d9"),v=v(),ge(),v),mt={key:1,id:"landingPagecontainer"},ht={id:"section1"},gt=K(()=>o("section",{id:"img"},null,-1)),vt={id:"text"},_t=K(()=>o("h2",null,"Welcome to Chatter: A Haven for Text-Based Content",-1)),yt=K(()=>o("p",null,"Unleash the power of Words, Connect with Like-minded Readers.",-1)),ft=K(()=>o("button",null,"Get Started",-1)),wt=Se('<section id="section2" data-v-7d57d0d9><h2 data-v-7d57d0d9>About Chatter</h2><p data-v-7d57d0d9>Chatter is a multi-functional platform where authors and readers can have access to their own content. It aims to be a traditional bookworm&#39;s heaven and a blog to get access to more text based content. Our vision is to foster an inclusive and vibrant community where diversity is celebrated. We encourage open-mindedness and respect for all individuals, regardless of their backgrounds or beliefs. By promoting dialogue and understanding, we strive.</p></section><section id="section3" data-v-7d57d0d9><h2 data-v-7d57d0d9>Why you should join chatter</h2><p data-v-7d57d0d9>Our goal is to make writers and readers see our platform as their next heaven for blogging, ensuring ease in interactions, connecting with like-minded peers, have access to favorite content based on interests and able to communicate your great ideas with people. </p><section id="section3Parts" data-v-7d57d0d9><section data-v-7d57d0d9><img src="'+Fe+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Analaytics</h3><p data-v-7d57d0d9>Analytics to track the number of views, likes and comment and also analyse the performance of your articles over a poeriod of time</p></section><section data-v-7d57d0d9><img src="'+Ee+'" alt="analysis" data-v-7d57d0d9><h3 data-v-7d57d0d9>Social interactions</h3><p data-v-7d57d0d9>Users on the platform can interact with posts they like, comment and engage in dicussions</p></section><section data-v-7d57d0d9><img src="'+qe+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Content creation</h3><p data-v-7d57d0d9>Write nice and appealing with our in-built markdown, a rich text editor</p></section></section></section><section id="section4" data-v-7d57d0d9><img src="'+Ae+'" alt="Adebola Muhydeen" data-v-7d57d0d9><section data-v-7d57d0d9><blockquote data-v-7d57d0d9><q data-v-7d57d0d9>Chatter has become an integral part of my online experience. As a user of this incredible blogging platform, I have discovered a vibrant community of individuals who are passionate about sharing their ideas and engaging in thoughtful dicussions.</q></blockquote><strong data-v-7d57d0d9>Adebola Muhydeen,</strong> <em data-v-7d57d0d9>Software developer at Apple</em></section></section>',3),Ct=Y({__name:"LandingPage",setup(v){const p=G();return(c,_)=>{const k=pe("RouterLink");return M(p).signedUser.isLogined?(u(),te(pt,{key:0})):(u(),g("section",mt,[o("section",ht,[gt,o("section",vt,[_t,yt,V(k,{to:"/login"},{default:me(()=>[ft]),_:1})])]),wt]))}}});const Ft=J(Ct,[["__scopeId","data-v-7d57d0d9"]]);export{Ft as default};
