import{P as c,a as g,g as d,R as u,b as h,_ as f,d as U}from"./index.esm2017-1c1d52a4.js";import{g as p,r as n,a as o}from"./index.esm2017-a0d21084.js";import{u as m,a as y,o as P}from"./useAuth.vue_vue_type_script_lang-9fa7d3e2.js";import"./index.esm-06e63244.js";const{app:w,auth:k}=m(),e=y(),r=c(w);async function A(){const s=p(),a=n(s,"ChatterAppFiles/avatar/unknown/UnkownUser.png");try{await o(a).then(t=>{if(e.signedUser.profilePicture==="")e.signedUser.profilePicture=t;else{const i=n(s,`${e.signedUser.profilePicture}`);o(i).then(l=>{e.signedUser.profilePicture=l})}})}catch(t){console.log(t)}}async function v(s){const a=u(f(r,"users"),h("email","==",`${s.email}`));try{await U(a).then(t=>{e.signedUser=t.docs[0].data(),e.signedUser.isLogined=!0,e.signedUser.analyses.totalComments=t.docs[0].data().comments.total.out,e.signedUser.analyses.totalLiked=t.docs[0].data().likes.total.out,e.signedUser.analyses.totalPosts=t.docs[0].data().posts.length,A()})}catch(t){console.log(t)}}function S(){P(k,s=>{s?(e.authenticated=!0,v(s).then(()=>{g(d(r,"users",`${e.signedUser.id}`),e.signedUser)})):e.authenticated=!1})}export{S as u};
