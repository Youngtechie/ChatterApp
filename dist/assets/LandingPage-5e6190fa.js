import{u as ne,a as j}from"./useAuth.vue_vue_type_script_lang-d76c59a2.js";import{d as z,a as se,r as g,u as ae,s as _e,x as D,o as re,c as u,f,F as H,y as K,g as o,w as b,n as ie,j as U,t as A,k as ce,z as q,_ as X,h as N,m as ye,v as fe,b as le,e as Z,i as de,p as ue,q as pe,A as we}from"./index-6f23e352.js";import{g as Ce,r as Se,l as be,d as ke}from"./index.esm2017-70995d75.js";import{P as he,R as O,b as V,_ as W,d as Y,g as ge,y as Pe,x as te,c as $e,k as xe}from"./index.esm2017-a297fada.js";import{a as me}from"./axios-4a70c6fc.js";import{c as ee}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as Ie}from"./useUserDetails.vue_vue_type_script_lang-a91e426b.js";import{u as oe}from"./useDetailButtons-3d6ae16e.js";const Te="/Vector1.png",Le="/Vector2.png",qe="/Vector3.png",Fe="/section4Img.png",Ee={key:0,class:q({resultsContainer:!0})},De=["onClick"],Ae={class:"result-item-other"},Me={class:"result-item-header"},Ue=["onClick"],Re=["innerHTML","onClick"],Be={class:"editSectionbtn"},He=["onClick"],Ne=["onClick"],Oe=z({__name:"AuthorFeedPage",setup(w){let d;se(()=>{clearTimeout(d);const s=document.getElementById("warningShow");s.style.display="none"});const p=g([]),C=g(""),h=new DOMParser,k=ae(),{app:$}=ne(),m=Ce($),v=he($),_=j(),x=g(!0);_e(()=>{var s,c;((s=p.value)==null?void 0:s.length)>0&&((c=p.value)==null||c.sort((r,e)=>e.postTime.seconds-r.postTime.seconds),D(()=>{const r=document.getElementById("warningShow");r&&(r.style.display="none")}))}),re(()=>{clearTimeout(d),D(()=>{const s=document.getElementById("warningShow");s&&(s.style.display="flex",s.textContent="Loading ...")}),T()});async function I(s){C.value="";try{const c=s.postContain;await me.post("/postContent",{contentUrl:c}).then(r=>{const e=h.parseFromString(r.data,"text/html");C.value=e.body.innerHTML}).catch(r=>{console.log(r)})}catch{const r=document.querySelector("#ErrorShow span");document.querySelector("#ErrorShow").style.display="flex",r.textContent="Something went wrong, check your internet connection"}}async function T(){const s=O(W(v,"posts"),V("posterId","==",_.signedUser.id)),r=(await Y(s)).docs.map(async n=>{var t;const a=n.data();await I(a);const i=h.parseFromString(C.value,"text/html");return i.body.querySelectorAll("img").forEach(l=>{l.remove()}),i.body.querySelectorAll("video").forEach(l=>{l.remove()}),(t=i.body.querySelector("h1"))==null||t.remove(),C.value=i.body.innerHTML,a.postContain=C.value,a}),e=await Promise.all(r);p.value=e,x.value=!1}function G(s){k.push(`/post/${s}`)}function M(s){if(s===_.signedUser.id)return k.push("/userProfile");k.push(`/chatterUser/${s}`)}function R(s){k.push(`/write/${s}`)}async function F(s){try{const c=O(W(v,"posts"),V("postId","==",s));(await Y(c)).forEach(n=>{const a=n.data(),i=ge(v,"posts",a.postId);Pe(i)});const e=`ChatterAppFiles/posts/${s}`;B(e)}catch(c){console.log(c)}}async function B(s){const c=Se(m,s),e=(await be(c)).items.map(n=>ke(n));await Promise.all(e)}return(s,c)=>{var r;return((r=p.value)==null?void 0:r.length)>0&&x.value===!1?(u(),f("div",Ee,[(u(!0),f(H,null,K(p.value,(e,n)=>(u(),f("div",{key:n,class:"result-item"},[o("div",{class:"imgCon",onClick:b(a=>M(e.posterId),["prevent"]),style:ie({backgroundImage:`url(${U(_).signedUser.profilePicture})`})},null,12,De),o("div",Ae,[o("div",Me,[o("span",{onClick:b(a=>M(e.posterId),["prevent"])},A(U(_).signedUser.blogName),9,Ue),o("span",null,A(ee(e.postTime.seconds)),1)]),o("div",{innerHTML:e.postContain,id:"divContent",onClick:b(a=>G(e.postId),["prevent"])},null,8,Re),o("div",Be,[o("button",{onClick:b(a=>R(e.postId),["prevent"])},"Edit",8,He),o("button",{onClick:b(a=>F(e.postId),["prevent"])},"Delete",8,Ne)])])]))),128))])):ce("",!0)}}});const Ve=X(Oe,[["__scopeId","data-v-746e44b0"]]),We={class:"btns"},Ye={key:0,class:q({resultsContainer:!0})},je=["onClick"],ze={class:"result-item-other"},Xe={class:"result-item-header"},Qe=["onClick"],Ge=["innerHTML","onClick"],Je={key:1,class:q({resultsContainer:!0})},Ke=["src","alt","onClick"],Ze={class:"result-item-other"},et={class:"result-item-header"},tt=["onClick"],ot=["innerHTML","onClick"],nt={class:"noFollower"},st=z({__name:"ReaderFeedPage",setup(w){se(()=>{const e=document.getElementById("warningShow");e.style.display="none"});const d=g(""),p=new DOMParser;Ie();const{app:C}=ne(),h=j(),k=he(C),$=ae(),m=g(!0),v=g("interested_section"),_=g([]),x=g([]),I=g(),T=g([]),G=g(0);re(()=>{D(()=>{const e=document.getElementById("warningShow");e&&(e.style.display="flex",e.textContent="Loading ...")}),c(_.value)});function M(e){x.value=[],T.value=[],v.value=e,D(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Loading ...")}),e==="following_section"&&r(),e==="interested_section"&&c(_.value)}function R(e){$.push(`/post/${e}`)}function F(e){if(e===h.signedUser.id)return $.push("/userProfile");$.push(`/chatterUser/${e}`)}h.signedUser.interests.forEach(e=>{const n=e.trim();_.value.push(n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())});async function B(e){d.value="";try{const n=e.postContain;await me.post("/postContent",{contentUrl:n}).then(a=>{const i=p.parseFromString(a.data,"text/html");d.value=i.body.innerHTML}).catch(a=>{console.log(a)})}catch{const a=document.querySelector("#ErrorShow span");document.querySelector("#ErrorShow").style.display="flex",a.textContent="Something went wrong, check your internet connection"}}async function s(e){I.value=null;try{const n=ge(k,"users",e),a=await $e(n);if(a.data()!==void 0){const{fullName:i,profilePicture:t,username:l,blogName:S}=a.data(),y={profilePicture:t,posterID:e,fullName:i,username:l,blogName:S};I.value={id:e,img:y.profilePicture,fullName:y.fullName,username:y.username,blogname:y.blogName}}}catch{}}async function c(e){try{const n=e.map(async t=>{const l=O(W(k,"posts"),V("postTag","==",t),te("postTime","desc")),S=await Y(l);return Promise.all(S.docs.map(async y=>{var E;const P=y.data();await B(P);const L=p.parseFromString(d.value,"text/html");return L.body.querySelectorAll("img").forEach(J=>{J.remove()}),L.body.querySelectorAll("video").forEach(J=>{J.remove()}),(E=L.body.querySelector("h1"))==null||E.remove(),d.value=L.body.innerHTML,P.postContain=d.value,await s(P.posterId),P.posterDetails=I.value,I.value=null,m.value=!1,P}))}),i=(await Promise.all(n)).flat();x.value=i,x.value.length>0&&D(()=>{const t=document.getElementById("warningShow");t&&(t.style.display="none")})}catch{const a=document.querySelector("#ErrorShow span");document.querySelector("#ErrorShow").style.display="flex",a.textContent="Something went wrong, check your internet connection"}}async function r(){const e=h.signedUser.following.theFollowings.length<10?h.signedUser.following.theFollowings.length:10,n=Math.floor(10/e);T.value=[];const a=h.signedUser.following.theFollowings.map(async i=>{try{const t=O(W(k,"posts"),V("posterId","==",i),te("postTime","desc"),xe(n)),l=await Y(t);return Promise.all(l.docs.map(async S=>{var L;const y=S.data();await B(y);const P=p.parseFromString(d.value,"text/html");return P.body.querySelectorAll("img").forEach(E=>{E.remove()}),P.body.querySelectorAll("video").forEach(E=>{E.remove()}),(L=P.body.querySelector("h1"))==null||L.remove(),d.value=P.body.innerHTML,y.postContain=d.value,await s(y.posterId),y.posterDetails=I.value,I.value=null,m.value=!1,y}))}catch(t){throw console.log(t),new Error("Something went wrong")}});try{const t=(await Promise.all(a)).flat();T.value=t,T.value.length>10&&(G.value=10),D(()=>{const l=document.getElementById("warningShow");l&&(l.style.display="none")})}catch{const t=document.querySelector("#ErrorShow span");t.style.display="flex",t.textContent="Something went wrong, check your internet connection"}}return(e,n)=>{var a,i;return u(),f(H,null,[o("div",We,[o("button",{type:"button",onClick:n[0]||(n[0]=t=>M("interested_section")),class:q({active:v.value==="interested_section"})},"Interested",2),o("button",{type:"button",onClick:n[1]||(n[1]=t=>M("following_section")),class:q({active:v.value==="following_section"})},"Followings",2)]),((a=x.value)==null?void 0:a.length)>0&&v.value==="interested_section"?(u(),f("div",Ye,[(u(!0),f(H,null,K(x.value,(t,l)=>(u(),f("div",{key:l,class:"result-item"},[o("div",{class:"imgCon",onClick:b(S=>F(t.posterId),["prevent"]),style:ie({backgroundImage:`url(${t==null?void 0:t.posterDetails.img})`})},null,12,je),o("div",ze,[o("div",Xe,[o("span",{onClick:b(S=>F(t.posterId),["prevent"])},A(t==null?void 0:t.posterDetails.blogname),9,Qe),o("span",null,A(ee(t.postTime.seconds)),1)]),o("div",{innerHTML:t.postContain,id:"divContent",onClick:b(S=>R(t.postId),["prevent"])},null,8,Ge),N(oe,{post:t},null,8,["post"])])]))),128))])):((i=T.value)==null?void 0:i.length)>0&&v.value==="following_section"?(u(),f("div",Je,[(u(!0),f(H,null,K(T.value,(t,l)=>(u(),f("div",{key:l,class:"result-item"},[o("img",{src:t.posterDetails.img,alt:t.posterDetails.username+"profile picture",class:"result-item-image",onClick:b(S=>F(t.posterId),["prevent"])},null,8,Ke),o("div",Ze,[o("div",et,[o("span",{onClick:b(S=>F(t.posterId),["prevent"])},A(t.posterDetails.blogname),9,tt),o("span",null,A(ee(t.postTime.seconds)),1)]),o("div",{innerHTML:t.postContain,id:"divContent",onClick:b(S=>R(t.postId),["prevent"])},null,8,ot),N(oe,{post:t},null,8,["post"])])]))),128))])):ce("",!0),ye(o("div",nt," You are not following any one yet. ",512),[[fe,U(h).signedUser.following.theFollowings.length===0&&v.value==="following_section"]])],64)}}});const at=X(st,[["__scopeId","data-v-44312adc"]]),ve=w=>(ue("data-v-d3a1c1cc"),w=w(),pe(),w),rt={class:"feedDiv"},it=ve(()=>o("div",{class:"lineContainer"},[o("div",{class:q({line:!0})}),o("div",{class:q({line:!0})})],-1)),ct=ve(()=>o("div",{id:"warningShow"},null,-1)),lt=z({__name:"FeedPage",setup(w){const d=j(),p=g(!1);let C=g(0),h=g(0);function k(m){p.value=!0,C.value=m.offsetX,h.value=m.offsetY}function $(m){if(p.value){const v=m.clientX-C.value,_=m.clientY-h.value;m.target.style.left=`${v}px`,m.target.style.top=`${_}px`,p.value=!1}}return(m,v)=>{const _=le("RouterLink");return u(),f("div",rt,[U(d).asReader?(u(),Z(at,{key:0})):(u(),Z(Ve,{key:1})),N(_,{to:"/write",draggable:"true",onDragstart:k,onDragend:$},{default:de(()=>[it]),_:1}),ct])}}});const dt=X(lt,[["__scopeId","data-v-d3a1c1cc"]]),Q=w=>(ue("data-v-3705ac22"),w=w(),pe(),w),ut={key:1,id:"landingPagecontainer"},pt={id:"section1"},ht=Q(()=>o("section",{id:"img"},null,-1)),gt={id:"text"},mt=Q(()=>o("h2",null,"Welcome to Chatter: A Haven for Text-Based Content",-1)),vt=Q(()=>o("p",null,"Unleash the power of Words, Connect with Like-minded Readers.",-1)),_t=Q(()=>o("button",null,"Get Started",-1)),yt=we('<section id="section2" data-v-3705ac22><h2 data-v-3705ac22>About Chatter</h2><p data-v-3705ac22>Chatter is a multi-functional platform where authors and readers can have access to their own content. It aims to be a traditional bookworm&#39;s heaven and a blog to get access to more text based content. Our vision is to foster an inclusive and vibrant community where diversity is celebrated. We encourage open-mindedness and respect for all individuals, regardless of their backgrounds or beliefs. By promoting dialogue and understanding, we strive.</p></section><section id="section3" data-v-3705ac22><h2 data-v-3705ac22>Why you should join chatter</h2><p data-v-3705ac22>Our goal is to make writers and readers see our platform as their next heaven for blogging, ensuring ease in interactions, connecting with like-minded peers, have access to favorite content based on interests and able to communicate your great ideas with people. </p><section id="section3Parts" data-v-3705ac22><section data-v-3705ac22><img src="'+Te+'" data-v-3705ac22><h3 data-v-3705ac22>Analaytics</h3><p data-v-3705ac22>Analytics to track the number of views, likes and comment and also analyse the performance of your articles over a poeriod of time</p></section><section data-v-3705ac22><img src="'+Le+'" alt="analysis" data-v-3705ac22><h3 data-v-3705ac22>Social interactions</h3><p data-v-3705ac22>Users on the platform can interact with posts they like, comment and engage in dicussions</p></section><section data-v-3705ac22><img src="'+qe+'" data-v-3705ac22><h3 data-v-3705ac22>Content creation</h3><p data-v-3705ac22>Write nice and appealing with our in-built markdown, a rich text editor</p></section></section></section><section id="section4" data-v-3705ac22><img src="'+Fe+'" alt="Adebola Muhydeen" data-v-3705ac22><section data-v-3705ac22><blockquote data-v-3705ac22><q data-v-3705ac22>Chatter has become an integral part of my online experience. As a user of this incredible blogging platform, I have discovered a vibrant community of individuals who are passionate about sharing their ideas and engaging in thoughtful dicussions.</q></blockquote><strong data-v-3705ac22>Adebola Muhydeen,</strong> <em data-v-3705ac22>Software developer at Apple</em></section></section>',3),ft=z({__name:"LandingPage",setup(w){const d=j();return(p,C)=>{const h=le("RouterLink");return U(d).signedUser.isLogined?(u(),Z(dt,{key:0})):(u(),f("section",ut,[o("section",pt,[ht,o("section",gt,[mt,vt,N(h,{to:"/login"},{default:de(()=>[_t]),_:1})])]),yt]))}}});const It=X(ft,[["__scopeId","data-v-3705ac22"]]);export{It as default};
