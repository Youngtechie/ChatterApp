import{d as A,u as V,r as L,a as j,b as U,c,e as O,f as d,g as e,w as g,h as o,t as s,i as _,j as f,y as w,l as r,k as C,F as z,x as G}from"./index-f1eab0dd.js";import{u as J,a as K}from"./useAuth.vue_vue_type_script_lang-298818ca.js";import{_ as Q}from"./useLoadingPage.vue_vue_type_style_index_0_lang-a1fcb670.js";import{g as W,r as X,a as Y}from"./index.esm2017-9ddf60ae.js";import{P as Z,R as ee,b as te,_ as oe,d as se}from"./index.esm2017-96b642a7.js";import{g as ne}from"./useUserViewProfile.vue_vue_type_script_lang-b344780d.js";import{u as ie}from"./useUserDetails.vue_vue_type_script_lang-3dc9a373.js";import{c as le}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as ae}from"./useDetailButtons-7e4732f0.js";import{a as re}from"./axios-4a70c6fc.js";import"./useLikeButton-b22feb4d.js";const ce={key:1},de=["onClick"],ue=["title"],pe={id:"themeImgContainer"},_e=["src"],he={class:"body"},me={class:"imageCon"},fe={class:"imgCon"},ve=["src","alt"],ge={class:"sectionFoImage"},we={class:"follow"},Pe=e("p",null,"||",-1),ye={class:"readerSec"},Ce={class:"btnSection"},be=e("span",null,"Full Name:",-1),ke=e("span",null,"User Name:",-1),De=e("span",null,"Blog Name:",-1),Se={key:0},Te=e("span",null,"Biography:",-1),Ne={key:1},Be=e("span",null,"Email:",-1),Ie=e("span",null,"Location:",-1),Le=e("span",null,"Birthday:",-1),Ue=e("span",null,"Gender:",-1),xe={key:2},Re=e("span",null,"Interests:",-1),$e={key:0},Ee={key:1},Fe={class:"type"},Me={class:"result-item"},qe=["src","alt","onClick"],He={class:"result-item-other"},Ae={class:"result-item-header"},Ve=["onClick"],je=["innerHTML","onClick"],Oe={id:"navigators"},ze=e("button",null,"Home",-1),Ge=e("button",null,"Search",-1),Je=e("button",{id:"notification-button"},"Notifications",-1),it=A({__name:"ChatterUserPage",props:["userId"],setup(x){const b=x;ie();const h=V(),{app:k}=J(),R=W(k),$=Z(k),D=new DOMParser,t=K(),m=L("");async function E(n){m.value="";const l=X(R,n.postContain),u=await Y(l).catch(a=>{console.log(a)});await re.post("/postContent",{contentUrl:u}).then(a=>{const i=D.parseFromString(a.data,"text/html");m.value=i.body.innerHTML}).catch(a=>{console.log(a)})}async function F(n,l,u){const a=ee(oe($,"posts"),te("postId","==",u));(await se(a)).forEach(P=>{const p=P.data();E(p).then(()=>{var B,I;(B=document.getElementById("searchBtn"))==null||B.removeAttribute("disabled");const v=D.parseFromString(m.value,"text/html");v.body.querySelectorAll("img").forEach(y=>{y.remove()}),v.body.querySelectorAll("video").forEach(y=>{y.remove()}),(I=v.body.querySelector("h1"))==null||I.remove(),m.value=v.body.innerHTML,p.postContain=m.value,t.viwedProfile.interactions.splice(n,1,{postDetails:p,type:l})})})}ne(b.userId).then(()=>{t.viwedProfile.interactions.length>0&&t.viwedProfile.interactions.forEach((n,l)=>{F(l,n.type,n.details.postid)})}).finally(()=>{N.value=!1});function M(){h.go(-1)}function q(n){h.push(`/post/${n}`)}function S(n){if(n===t.signedUser.id)return h.push("/userProfile");h.push(`/chatterUser/${n}`)}function T(n){t.section=n}const N=L(!0);let H=setTimeout(()=>{b.userId===t.signedUser.id&&(h.push("/userProfile"),console.log(t.viwedProfile))},5e3);return j(()=>{clearTimeout(H)}),(n,l)=>{const u=U("P"),a=U("RouterLink");return N.value?(c(),O(Q,{key:0,"action-name":"Loading profile..."})):(c(),d("main",ce,[e("header",null,[e("button",{onClick:g(M,["prevent"])},"Back",8,de),e("button",{title:o(t).themeDetails.title,id:"themeBtn",onClick:l[0]||(l[0]=(...i)=>o(t).changeTheme&&o(t).changeTheme(...i))},[e("div",pe,[e("img",{src:o(t).themeDetails.img},null,8,_e)])],8,ue)]),e("div",he,[e("div",me,[e("div",fe,[e("img",{src:o(t).viwedProfile.profilePicture,height:"40",alt:o(t).viwedProfile.fullName+"profile pic"},null,8,ve)])]),e("section",ge,[e("h3",null,s(o(t).viwedProfile.fullName),1),e("div",we,[_(u,null,{default:f(()=>[r(s(o(t).viwedProfile.followers.total)+" Followers",1)]),_:1}),Pe,_(u,null,{default:f(()=>[r(s(o(t).viwedProfile.following.total)+" Following",1)]),_:1})])]),e("div",ye,[e("div",Ce,[e("button",{onClick:l[1]||(l[1]=i=>T("personal")),class:w({active:o(t).section==="personal"})},"Personal",2),e("button",{onClick:l[2]||(l[2]=i=>T("interaction")),class:w({active:o(t).section==="interaction"})},"Interactions",2)]),e("div",{class:w({show:o(t).section==="personal",none:o(t).section!=="personal",personal:!0})},[e("p",null,[be,r(" "+s(o(t).viwedProfile.fullName),1)]),e("p",null,[ke,r(" "+s(o(t).viwedProfile.username),1)]),e("p",null,[De,r(" "+s(o(t).viwedProfile.blogName),1)]),o(t).viwedProfile.bio.length>0?(c(),d("p",Se,[Te,r(" "+s(o(t).viwedProfile.bio),1)])):C("",!0),o(t).viwedProfile.settings.privacySettings.showEmail?(c(),d("p",Ne,[Be,r(" "+s(o(t).viwedProfile.email),1)])):C("",!0),e("p",null,[Ie,r(" "+s(o(t).viwedProfile.location),1)]),e("p",null,[Le,r(" "+s(o(t).viwedProfile.dateOfBirth),1)]),e("p",null,[Ue,r(" "+s(o(t).viwedProfile.gender),1)]),o(t).viwedProfile.interests.length>0?(c(),d("p",xe,[Re,r(" "+s(o(t).viwedProfile.interests.join(",")),1)])):C("",!0)],2),e("div",{class:w({show:o(t).section==="interaction",none:o(t).section!=="interaction",interaction:!0})},[o(t).viwedProfile.interactions.length===0?(c(),d("p",$e,"No interactions yet.")):(c(),d("div",Ee,[(c(!0),d(z,null,G(o(t).viwedProfile.interactions,(i,P)=>(c(),d("div",{key:P},[e("div",Fe,s(i.type),1),e("div",Me,[e("img",{src:o(t).viwedProfile.profilePicture,alt:o(t).viwedProfile.username+"profile picture",class:"result-item-image",onClick:g(p=>S(i.postDetails.posterId),["prevent"])},null,8,qe),e("div",He,[e("div",Ae,[e("span",{onClick:g(p=>S(i.postDetails.posterId),["prevent"])},s(o(t).viwedProfile.blogName),9,Ve),e("span",null,s(le(i.postDetails.postTime.seconds)),1)]),e("div",{innerHTML:i.postDetails.postContain,id:"divContent",onClick:g(p=>q(i.postDetails.postId),["prevent"])},null,8,je),_(ae,{post:i.postDetails},null,8,["post"])])])]))),128))]))],2)])]),e("section",Oe,[_(a,{to:"/home"},{default:f(()=>[ze]),_:1}),_(a,{to:"/search"},{default:f(()=>[Ge]),_:1}),_(a,{to:"/notification"},{default:f(()=>[Je]),_:1})])]))}}});export{it as default};
