import{u as ce,a as K}from"./useAuth.vue_vue_type_script_lang-154466f4.js";import{d as X,o as le,r as k,u as ue,n as O,q,s as me,b as g,e as _,F as V,x as oe,f as o,g as D,w as C,t as M,k as he,y as F,_ as Y,h as W,a as pe,c as ne,j as ge,p as ve,m as _e,z as Ce}from"./index-39bb5b9b.js";import{g as se,r as j,a as ae,l as ke,d as Se}from"./index.esm2017-a0d21084.js";import{P as ye,R as z,b as Q,_ as G,d as J,g as fe,y as $e,x as re,k as xe,c as Ie}from"./index.esm2017-1c1d52a4.js";import{u as we}from"./useUserDetails.vue_vue_type_script_lang-6cc3b925.js";import{a as be}from"./axios-4a70c6fc.js";import{c as ie}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as de}from"./useDetailButtons-773aa0ac.js";import"./index.esm-06e63244.js";import"./useLikeButton-912bc1e8.js";const Pe="/Vector1.png",Te="/Vector2.png",Ee="/Vector3.png",Le="/section4Img.png",Be={key:0,class:F({resultsContainer:!0})},Ae=["src","alt","onClick"],Fe={class:"result-item-other"},Re={class:"result-item-header"},Ue=["onClick"],qe=["innerHTML","onClick"],Me={class:"editSectionbtn"},De=["onClick"],He=["onClick"],Ne=X({__name:"AuthorFeedPage",setup(y){we();let p;le(()=>{clearTimeout(p)});const m=k([]),f=k(""),S=new DOMParser,R=ue(),{app:$}=ce(),U=se($),L=ye($),T=K();O(()=>{var s,d;((s=m.value)==null?void 0:s.length)>0&&((d=m.value)==null||d.sort((r,a)=>a.postTime.seconds-r.postTime.seconds),q(()=>{const r=document.getElementById("warningShow");r&&(r.style.display="none")}))}),me(()=>{clearTimeout(p),q(()=>{const s=document.getElementById("warningShow");s&&(s.style.display="flex",s.textContent="Loading ...")})}),H();async function x(s){f.value="";try{const d=j(U,s.postContain),r=await ae(d).catch(a=>{console.log(a)});await be.post("/postContent",{contentUrl:r}).then(a=>{const v=S.parseFromString(a.data,"text/html");f.value=v.body.innerHTML}).catch(a=>{console.log(a)})}catch{const r=document.getElementById("ErrorShow");r.style.display="flex",r.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{r.style.display="none"},3e3)}}async function H(){const s=z(G(L,"posts"),Q("posterId","==",T.signedUser.id));(await J(s)).forEach(r=>{const a=r.data();x(a).then(()=>{var w,t,n;(w=document.getElementById("searchBtn"))==null||w.removeAttribute("disabled");const v=S.parseFromString(f.value,"text/html");v.body.querySelectorAll("img").forEach(i=>{i.remove()}),v.body.querySelectorAll("video").forEach(i=>{i.remove()}),(t=v.body.querySelector("h1"))==null||t.remove(),f.value=v.body.innerHTML,a.postContain=f.value,(n=m.value)==null||n.push(a)})})}function B(s){R.push(`/post/${s}`)}function I(s){if(s===T.signedUser.id)return R.push("/userProfile");R.push(`/chatterUser/${s}`)}function E(s){R.push(`/write/${s}`)}async function ee(s){try{const d=z(G(L,"posts"),Q("postId","==",s));(await J(d)).forEach(v=>{const w=v.data(),t=fe(L,"posts",w.postId);$e(t)});const a=`ChatterAppFiles/posts/${s}`;N(a)}catch(d){console.log(d)}}async function N(s){const d=j(U,s),a=(await ke(d)).items.map(v=>Se(v));await Promise.all(a)}return(s,d)=>{var r;return((r=m.value)==null?void 0:r.length)>0?(g(),_("div",Be,[(g(!0),_(V,null,oe(m.value,(a,v)=>(g(),_("div",{key:v,class:"result-item"},[o("img",{src:D(T).signedUser.profilePicture,alt:D(T).signedUser.username+"profile picture",class:"result-item-image",onClick:C(w=>I(a.posterId),["prevent"])},null,8,Ae),o("div",Fe,[o("div",Re,[o("span",{onClick:C(w=>I(a.posterId),["prevent"])},M(D(T).signedUser.blogName),9,Ue),o("span",null,M(ie(a.postTime.seconds)),1)]),o("div",{innerHTML:a.postContain,id:"divContent",onClick:C(w=>B(a.postId),["prevent"])},null,8,qe),o("div",Me,[o("button",{onClick:C(w=>E(a.postId),["prevent"])},"Edit",8,De),o("button",{onClick:C(w=>ee(a.postId),["prevent"])},"Delete",8,He)])])]))),128))])):he("",!0)}}});const Oe=Y(Ne,[["__scopeId","data-v-7844e630"]]),Ve={class:"btns"},We={key:0,class:F({resultsContainer:!0})},je=["src","alt","onClick"],ze={class:"result-item-other"},Qe={class:"result-item-header"},Ge=["onClick"],Je=["innerHTML","onClick"],Ke={key:1,class:F({resultsContainer:!0})},Xe=["src","alt","onClick"],Ye={class:"result-item-other"},Ze={class:"result-item-header"},et=["onClick"],tt=["innerHTML","onClick"],ot=X({__name:"ReaderFeedPage",setup(y){let p;le(()=>{clearTimeout(p)});const m=k(""),f=new DOMParser;we();const{app:S}=ce(),R=se(S),$=K(),U=ye(S),L=ue(),T=k(!0),x=k("interested_section"),H=k([]),B=k([]),I=k(),E=k([]),ee=k(0);O(()=>{x.value==="interested_section"?v(H.value):x.value==="following_section"&&w()}),O(()=>{var t;((t=B.value)==null?void 0:t.length)>0&&q(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="none")})}),O(()=>{var t;((t=E.value)==null?void 0:t.length)>0&&q(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="none")})}),me(()=>{clearTimeout(p),q(()=>{const t=document.getElementById("warningShow");t&&(t.style.display="flex",t.textContent="Loading ...")})});function N(t){B.value=[],E.value=[],x.value=t,q(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Loading ...")})}function s(t){L.push(`/post/${t}`)}function d(t){if(t===$.signedUser.id)return L.push("/userProfile");L.push(`/chatterUser/${t}`)}$.signedUser.interests.forEach(t=>{const n=t.trim();H.value.push(n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())});async function r(t){m.value="";try{const n=j(R,t.postContain),i=await ae(n).catch(c=>{console.log(c)});await be.post("/postContent",{contentUrl:i}).then(c=>{const e=f.parseFromString(c.data,"text/html");m.value=e.body.innerHTML}).catch(c=>{console.log(c)})}catch{const i=document.getElementById("ErrorShow");i.style.display="flex",i.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{i.style.display="none"},3e3)}}async function a(t){I.value=null;try{const n=fe(U,"users",t),i=await Ie(n);if(i.data()!==void 0){const{fullName:c,profilePicture:e,username:h,blogName:l}=i.data(),u={profilePicture:e,posterID:t,fullName:c,username:h,blogName:l},A=se(),b=j(A,u.profilePicture);try{await ae(b).then(P=>{u.profilePicture&&(u.profilePicture=P),u.blogName===""&&(u.blogName=`${u.username}Blog`),I.value={id:t,img:u.profilePicture,fullName:u.fullName,username:u.username,blogname:u.blogName}})}catch{const te=document.getElementById("ErrorShow");te.style.display="flex",te.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{te.style.display="none"},3e3)}}}catch{}}async function v(t){t.forEach(n=>{const i=z(G(U,"posts"),Q("postTag","==",`${n}`),re("postTime","desc"));try{J(i).then(c=>{c.docs.forEach(e=>{const h=e.data();r(h).then(()=>{var u,A;(u=document.getElementById("searchBtn"))==null||u.removeAttribute("disabled");const l=f.parseFromString(m.value,"text/html");l.body.querySelectorAll("img").forEach(b=>{b.remove()}),l.body.querySelectorAll("video").forEach(b=>{b.remove()}),(A=l.body.querySelector("h1"))==null||A.remove(),m.value=l.body.innerHTML,h.postContain=m.value,a(h.posterId).then(()=>{var b;h.posterDetails=I.value,(b=B.value)==null||b.push(h),I.value=null,T.value=!1})})})}).catch(c=>{console.log(c);const e=document.getElementById("ErrorShow");e.style.display="flex",e.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{e.style.display="none"},3e3)})}catch{const e=document.getElementById("ErrorShow");e.style.display="flex",e.textContent="Something went wrong",p=setTimeout(()=>{var h;e.style.display="none",(h=document.getElementById("searchBtn"))==null||h.removeAttribute("disabled")},3e3)}})}async function w(){const t=$.signedUser.following.theFollowings.length<10?$.signedUser.following.theFollowings.length:10,n=Math.floor(10/t);E.value=[];for(let i=0;i<$.signedUser.following.theFollowings.length;i++)try{const c=z(G(U,"posts"),Q("posterId","==",`${$.signedUser.following.theFollowings[i]}`),re("postTime","desc"),xe(n));if(J(c).then(e=>{e.docs.forEach(h=>{const l=h.data();r(l).then(()=>{var A,b;(A=document.getElementById("searchBtn"))==null||A.removeAttribute("disabled");const u=f.parseFromString(m.value,"text/html");u.body.querySelectorAll("img").forEach(P=>{P.remove()}),u.body.querySelectorAll("video").forEach(P=>{P.remove()}),(b=u.body.querySelector("h1"))==null||b.remove(),m.value=u.body.innerHTML,l.postContain=m.value,a(l.posterId).then(()=>{var P;l.posterDetails=I.value,(P=E.value)==null||P.push(l),I.value=null,T.value=!1})})})}).catch(e=>{console.log(e)}),i>10){ee.value=i;break}}catch{const e=document.getElementById("ErrorShow");e.style.display="flex",e.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{e.style.display="none"},3e3)}}return(t,n)=>{var i,c;return g(),_(V,null,[o("div",Ve,[o("button",{type:"button",onClick:n[0]||(n[0]=e=>N("interested_section")),class:F({active:x.value==="interested_section"})},"Interested",2),o("button",{type:"button",onClick:n[1]||(n[1]=e=>N("following_section")),class:F({active:x.value==="following_section"})},"Followings",2)]),((i=B.value)==null?void 0:i.length)>0&&x.value==="interested_section"?(g(),_("div",We,[(g(!0),_(V,null,oe(B.value,(e,h)=>(g(),_("div",{key:h,class:"result-item"},[o("img",{src:e==null?void 0:e.posterDetails.img,alt:(e==null?void 0:e.posterDetails.username)+"profile picture",class:"result-item-image",onClick:C(l=>d(e.posterId),["prevent"])},null,8,je),o("div",ze,[o("div",Qe,[o("span",{onClick:C(l=>d(e.posterId),["prevent"])},M(e==null?void 0:e.posterDetails.blogname),9,Ge),o("span",null,M(ie(e.postTime.seconds)),1)]),o("div",{innerHTML:e.postContain,id:"divContent",onClick:C(l=>s(e.postId),["prevent"])},null,8,Je),W(de,{post:e},null,8,["post"])])]))),128))])):((c=E.value)==null?void 0:c.length)>0&&x.value==="following_section"?(g(),_("div",Ke,[(g(!0),_(V,null,oe(E.value,(e,h)=>(g(),_("div",{key:h,class:"result-item"},[o("img",{src:e.posterDetails.img,alt:e.posterDetails.username+"profile picture",class:"result-item-image",onClick:C(l=>d(e.posterId),["prevent"])},null,8,Xe),o("div",Ye,[o("div",Ze,[o("span",{onClick:C(l=>d(e.posterId),["prevent"])},M(e.posterDetails.blogname),9,et),o("span",null,M(ie(e.postTime.seconds)),1)]),o("div",{innerHTML:e.postContain,id:"divContent",onClick:C(l=>s(e.postId),["prevent"])},null,8,tt),W(de,{post:e},null,8,["post"])])]))),128))])):he("",!0)],64)}}});const nt=Y(ot,[["__scopeId","data-v-dd48a6dd"]]),st=y=>(ve("data-v-8df9cbd7"),y=y(),_e(),y),at={class:"feedDiv"},it=st(()=>o("div",{class:"lineContainer"},[o("div",{class:F({line:!0})}),o("div",{class:F({line:!0})})],-1)),rt=X({__name:"FeedPage",setup(y){const p=K();return(m,f)=>{const S=pe("RouterLink");return g(),_("div",at,[D(p).asReader?(g(),ne(nt,{key:0})):(g(),ne(Oe,{key:1})),W(S,{to:"/write",draggable:""},{default:ge(()=>[it]),_:1})])}}});const dt=Y(rt,[["__scopeId","data-v-8df9cbd7"]]),Z=y=>(ve("data-v-7d57d0d9"),y=y(),_e(),y),ct={key:1,id:"landingPagecontainer"},lt={id:"section1"},ut=Z(()=>o("section",{id:"img"},null,-1)),mt={id:"text"},ht=Z(()=>o("h2",null,"Welcome to Chatter: A Haven for Text-Based Content",-1)),pt=Z(()=>o("p",null,"Unleash the power of Words, Connect with Like-minded Readers.",-1)),gt=Z(()=>o("button",null,"Get Started",-1)),vt=Ce('<section id="section2" data-v-7d57d0d9><h2 data-v-7d57d0d9>About Chatter</h2><p data-v-7d57d0d9>Chatter is a multi-functional platform where authors and readers can have access to their own content. It aims to be a traditional bookworm&#39;s heaven and a blog to get access to more text based content. Our vision is to foster an inclusive and vibrant community where diversity is celebrated. We encourage open-mindedness and respect for all individuals, regardless of their backgrounds or beliefs. By promoting dialogue and understanding, we strive.</p></section><section id="section3" data-v-7d57d0d9><h2 data-v-7d57d0d9>Why you should join chatter</h2><p data-v-7d57d0d9>Our goal is to make writers and readers see our platform as their next heaven for blogging, ensuring ease in interactions, connecting with like-minded peers, have access to favorite content based on interests and able to communicate your great ideas with people. </p><section id="section3Parts" data-v-7d57d0d9><section data-v-7d57d0d9><img src="'+Pe+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Analaytics</h3><p data-v-7d57d0d9>Analytics to track the number of views, likes and comment and also analyse the performance of your articles over a poeriod of time</p></section><section data-v-7d57d0d9><img src="'+Te+'" alt="analysis" data-v-7d57d0d9><h3 data-v-7d57d0d9>Social interactions</h3><p data-v-7d57d0d9>Users on the platform can interact with posts they like, comment and engage in dicussions</p></section><section data-v-7d57d0d9><img src="'+Ee+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Content creation</h3><p data-v-7d57d0d9>Write nice and appealing with our in-built markdown, a rich text editor</p></section></section></section><section id="section4" data-v-7d57d0d9><img src="'+Le+'" alt="Adebola Muhydeen" data-v-7d57d0d9><section data-v-7d57d0d9><blockquote data-v-7d57d0d9><q data-v-7d57d0d9>Chatter has become an integral part of my online experience. As a user of this incredible blogging platform, I have discovered a vibrant community of individuals who are passionate about sharing their ideas and engaging in thoughtful dicussions.</q></blockquote><strong data-v-7d57d0d9>Adebola Muhydeen,</strong> <em data-v-7d57d0d9>Software developer at Apple</em></section></section>',3),_t=X({__name:"LandingPage",setup(y){const p=K();return(m,f)=>{const S=pe("RouterLink");return D(p).signedUser.isLogined?(g(),ne(dt,{key:0})):(g(),_("section",ct,[o("section",lt,[ut,o("section",mt,[ht,pt,W(S,{to:"/login"},{default:ge(()=>[gt]),_:1})])]),vt]))}}});const Pt=Y(_t,[["__scopeId","data-v-7d57d0d9"]]);export{Pt as default};
