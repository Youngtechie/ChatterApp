import{u as re,a as G}from"./useAuth.vue_vue_type_script_lang-9fa7d3e2.js";import{d as J,o as ce,r as $,u as de,n as le,b as h,e as g,F as N,q as ee,f as t,g as D,w as C,t as q,s as A,_ as K,h as O,a as ue,c as te,j as he,p as pe,m as me,x as ye}from"./index-2332f67b.js";import{g as oe,r as V,a as ne,l as be,d as we}from"./index.esm2017-a0d21084.js";import{P as ve,R as W,b as j,_ as Q,d as z,g as ge,y as Ce,x as ae,k as ke,c as $e}from"./index.esm2017-1c1d52a4.js";import{u as _e}from"./useUserDetails.vue_vue_type_script_lang-87b949d5.js";import{a as fe}from"./axios-4a70c6fc.js";import{c as se}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as ie}from"./useDetailButtons-ddfa71fa.js";import"./index.esm-06e63244.js";import"./useLikeButton-a9069f32.js";const Se="/Vector1.png",Pe="/Vector2.png",Ie="/Vector3.png",xe="/section4Img.png",Te={key:0,class:A({resultsContainer:!0})},Ee=["src","alt","onClick"],Le={class:"result-item-other"},Fe={class:"result-item-header"},Ae=["onClick"],Be=["innerHTML","onClick"],Ue={class:"editSectionbtn"},Re=["onClick"],qe=["onClick"],De={key:1},Me=J({__name:"AuthorFeedPage",setup(f){_e();let _;ce(()=>{clearTimeout(_)});const p=$([]),y=$(""),S=new DOMParser,B=de(),{app:k}=re(),U=oe(k),E=ve(k),T=G();le(()=>{var a,r;((a=p.value)==null?void 0:a.length)>0&&((r=p.value)==null||r.sort((u,o)=>o.postTime.seconds-u.postTime.seconds))}),M();async function P(a){y.value="";try{const r=V(U,a.postContain),u=await ne(r).catch(o=>{console.log(o)});await fe.post("/postContent",{contentUrl:u}).then(o=>{const v=S.parseFromString(o.data,"text/html");y.value=v.body.innerHTML}).catch(o=>{console.log(o)})}catch{const u=document.getElementById("ErrorShow");u.style.display="flex",u.textContent="Something went wrong, check your internet connection",_=setTimeout(()=>{u.style.display="none"},3e3)}}async function M(){const a=W(Q(E,"posts"),j("posterId","==",T.signedUser.id));(await z(a)).forEach(u=>{const o=u.data();P(o).then(()=>{var b,n,i;(b=document.getElementById("searchBtn"))==null||b.removeAttribute("disabled");const v=S.parseFromString(y.value,"text/html");v.body.querySelectorAll("img").forEach(s=>{s.remove()}),v.body.querySelectorAll("video").forEach(s=>{s.remove()}),(n=v.body.querySelector("h1"))==null||n.remove(),y.value=v.body.innerHTML,o.postContain=y.value,(i=p.value)==null||i.push(o)})})}function R(a){B.push(`/post/${a}`)}function I(a){if(a===T.signedUser.id)return B.push("/userProfile");B.push(`/chatterUser/${a}`)}function L(a){B.push(`/write/${a}`)}async function Y(a){try{const r=W(Q(E,"posts"),j("postId","==",a));(await z(r)).forEach(v=>{const b=v.data(),n=ge(E,"posts",b.postId);Ce(n)});const o=`ChatterAppFiles/posts/${a}`;H(o)}catch(r){console.log(r)}}async function H(a){const r=V(U,a),o=(await be(r)).items.map(v=>we(v));await Promise.all(o)}return(a,r)=>{var u;return((u=p.value)==null?void 0:u.length)>0?(h(),g("div",Te,[(h(!0),g(N,null,ee(p.value,(o,v)=>(h(),g("div",{key:v,class:"result-item"},[t("img",{src:D(T).signedUser.profilePicture,alt:D(T).signedUser.username+"profile picture",class:"result-item-image",onClick:C(b=>I(o.posterId),["prevent"])},null,8,Ee),t("div",Le,[t("div",Fe,[t("span",{onClick:C(b=>I(o.posterId),["prevent"])},q(D(T).signedUser.blogName),9,Ae),t("span",null,q(se(o.postTime.seconds)),1)]),t("div",{innerHTML:o.postContain,id:"divContent",onClick:C(b=>R(o.postId),["prevent"])},null,8,Be),t("div",Ue,[t("button",{onClick:C(b=>L(o.postId),["prevent"])},"Edit",8,Re),t("button",{onClick:C(b=>Y(o.postId),["prevent"])},"Delete",8,qe)])])]))),128))])):(h(),g("div",De,"Loading ... "))}}});const He=K(Me,[["__scopeId","data-v-0329e9a0"]]),Ne={class:"btns"},Oe={key:0,class:A({resultsContainer:!0})},Ve=["src","alt","onClick"],We={class:"result-item-other"},je={class:"result-item-header"},Qe=["onClick"],ze=["innerHTML","onClick"],Ge={key:1,class:A({resultsContainer:!0})},Je=["src","alt","onClick"],Ke={class:"result-item-other"},Xe={class:"result-item-header"},Ye=["onClick"],Ze=["innerHTML","onClick"],et={key:2},tt=J({__name:"ReaderFeedPage",setup(f){let _;ce(()=>{clearTimeout(_)});const p=$(""),y=new DOMParser;_e();const{app:S}=re(),B=oe(S),k=G(),U=ve(S),E=de(),T=$(!0),P=$("interested_section"),M=$([]),R=$([]),I=$(),L=$([]),Y=$(0);le(()=>{P.value==="interested_section"?(R.value=[],v(M.value)):P.value==="following_section"&&(L.value=[],b())});function H(n){P.value=n}function a(n){E.push(`/post/${n}`)}function r(n){if(n===k.signedUser.id)return E.push("/userProfile");E.push(`/chatterUser/${n}`)}k.signedUser.interests.forEach(n=>{const i=n.trim();M.value.push(i.charAt(0).toUpperCase()+i.slice(1).toLowerCase())});async function u(n){p.value="";try{const i=V(B,n.postContain),s=await ne(i).catch(c=>{console.log(c)});await fe.post("/postContent",{contentUrl:s}).then(c=>{const e=y.parseFromString(c.data,"text/html");p.value=e.body.innerHTML}).catch(c=>{console.log(c)})}catch{const s=document.getElementById("ErrorShow");s.style.display="flex",s.textContent="Something went wrong, check your internet connection",_=setTimeout(()=>{s.style.display="none"},3e3)}}async function o(n){I.value=null;try{const i=ge(U,"users",n),s=await $e(i);if(s.data()!==void 0){const{fullName:c,profilePicture:e,username:m,blogName:d}=s.data(),l={profilePicture:e,posterID:n,fullName:c,username:m,blogName:d},F=oe(),w=V(F,l.profilePicture);try{await ne(w).then(x=>{l.profilePicture&&(l.profilePicture=x),l.blogName===""&&(l.blogName=`${l.username}Blog`),I.value={id:n,img:l.profilePicture,fullName:l.fullName,username:l.username,blogname:l.blogName}})}catch{const Z=document.getElementById("ErrorShow");Z.style.display="flex",Z.textContent="Something went wrong, check your internet connection",_=setTimeout(()=>{Z.style.display="none"},3e3)}}}catch{}}async function v(n){n.forEach(i=>{const s=W(Q(U,"posts"),j("postTag","==",`${i}`),ae("postTime","desc"));try{z(s).then(c=>{c.docs.forEach(e=>{const m=e.data();u(m).then(()=>{var l,F;(l=document.getElementById("searchBtn"))==null||l.removeAttribute("disabled");const d=y.parseFromString(p.value,"text/html");d.body.querySelectorAll("img").forEach(w=>{w.remove()}),d.body.querySelectorAll("video").forEach(w=>{w.remove()}),(F=d.body.querySelector("h1"))==null||F.remove(),p.value=d.body.innerHTML,m.postContain=p.value,o(m.posterId).then(()=>{var w;m.posterDetails=I.value,(w=R.value)==null||w.push(m),I.value=null,T.value=!1})})})}).catch(c=>{console.log(c);const e=document.getElementById("ErrorShow");e.style.display="flex",e.textContent="Something went wrong, check your internet connection",_=setTimeout(()=>{e.style.display="none"},3e3)})}catch{const e=document.getElementById("ErrorShow");e.style.display="flex",e.textContent="Something went wrong",_=setTimeout(()=>{var m;e.style.display="none",(m=document.getElementById("searchBtn"))==null||m.removeAttribute("disabled")},3e3)}})}async function b(){const n=k.signedUser.following.theFollowings.length<10?k.signedUser.following.theFollowings.length:10,i=Math.floor(10/n);L.value=[],console.log(n,i,k.signedUser.following.theFollowings.length);for(let s=0;s<k.signedUser.following.theFollowings.length;s++)try{const c=W(Q(U,"posts"),j("posterId","==",`${k.signedUser.following.theFollowings[s]}`),ae("postTime","desc"),ke(i));if(z(c).then(e=>{e.docs.forEach(m=>{const d=m.data();u(d).then(()=>{var F,w;(F=document.getElementById("searchBtn"))==null||F.removeAttribute("disabled");const l=y.parseFromString(p.value,"text/html");l.body.querySelectorAll("img").forEach(x=>{x.remove()}),l.body.querySelectorAll("video").forEach(x=>{x.remove()}),(w=l.body.querySelector("h1"))==null||w.remove(),p.value=l.body.innerHTML,d.postContain=p.value,o(d.posterId).then(()=>{var x;d.posterDetails=I.value,(x=L.value)==null||x.push(d),I.value=null,T.value=!1})})})}).catch(e=>{console.log(e)}),s>10){Y.value=s;break}}catch{const e=document.getElementById("ErrorShow");e.style.display="flex",e.textContent="Something went wrong, check your internet connection",_=setTimeout(()=>{e.style.display="none"},3e3)}}return(n,i)=>{var s,c;return h(),g(N,null,[t("div",Ne,[t("button",{type:"button",onClick:i[0]||(i[0]=e=>H("interested_section")),class:A({active:P.value==="interested_section"})},"Interested",2),t("button",{type:"button",onClick:i[1]||(i[1]=e=>H("following_section")),class:A({active:P.value==="following_section"})},"Followings",2)]),((s=R.value)==null?void 0:s.length)>0&&P.value==="interested_section"?(h(),g("div",Oe,[(h(!0),g(N,null,ee(R.value,(e,m)=>(h(),g("div",{key:m,class:"result-item"},[t("img",{src:e==null?void 0:e.posterDetails.img,alt:(e==null?void 0:e.posterDetails.username)+"profile picture",class:"result-item-image",onClick:C(d=>r(e.posterId),["prevent"])},null,8,Ve),t("div",We,[t("div",je,[t("span",{onClick:C(d=>r(e.posterId),["prevent"])},q(e==null?void 0:e.posterDetails.blogname),9,Qe),t("span",null,q(se(e.postTime.seconds)),1)]),t("div",{innerHTML:e.postContain,id:"divContent",onClick:C(d=>a(e.postId),["prevent"])},null,8,ze),O(ie,{post:e},null,8,["post"])])]))),128))])):((c=L.value)==null?void 0:c.length)>0&&P.value==="following_section"?(h(),g("div",Ge,[(h(!0),g(N,null,ee(L.value,(e,m)=>(h(),g("div",{key:m,class:"result-item"},[t("img",{src:e.posterDetails.img,alt:e.posterDetails.username+"profile picture",class:"result-item-image",onClick:C(d=>r(e.posterId),["prevent"])},null,8,Je),t("div",Ke,[t("div",Xe,[t("span",{onClick:C(d=>r(e.posterId),["prevent"])},q(e.posterDetails.blogname),9,Ye),t("span",null,q(se(e.postTime.seconds)),1)]),t("div",{innerHTML:e.postContain,id:"divContent",onClick:C(d=>a(e.postId),["prevent"])},null,8,Ze),O(ie,{post:e},null,8,["post"])])]))),128))])):(h(),g("div",et,"Loading...."))],64)}}});const ot=K(tt,[["__scopeId","data-v-1ecc2a91"]]),nt=f=>(pe("data-v-8df9cbd7"),f=f(),me(),f),st={class:"feedDiv"},at=nt(()=>t("div",{class:"lineContainer"},[t("div",{class:A({line:!0})}),t("div",{class:A({line:!0})})],-1)),it=J({__name:"FeedPage",setup(f){const _=G();return(p,y)=>{const S=ue("RouterLink");return h(),g("div",st,[D(_).asReader?(h(),te(ot,{key:0})):(h(),te(He,{key:1})),O(S,{to:"/write",draggable:""},{default:he(()=>[at]),_:1})])}}});const rt=K(it,[["__scopeId","data-v-8df9cbd7"]]),X=f=>(pe("data-v-7d57d0d9"),f=f(),me(),f),ct={key:1,id:"landingPagecontainer"},dt={id:"section1"},lt=X(()=>t("section",{id:"img"},null,-1)),ut={id:"text"},ht=X(()=>t("h2",null,"Welcome to Chatter: A Haven for Text-Based Content",-1)),pt=X(()=>t("p",null,"Unleash the power of Words, Connect with Like-minded Readers.",-1)),mt=X(()=>t("button",null,"Get Started",-1)),vt=ye('<section id="section2" data-v-7d57d0d9><h2 data-v-7d57d0d9>About Chatter</h2><p data-v-7d57d0d9>Chatter is a multi-functional platform where authors and readers can have access to their own content. It aims to be a traditional bookworm&#39;s heaven and a blog to get access to more text based content. Our vision is to foster an inclusive and vibrant community where diversity is celebrated. We encourage open-mindedness and respect for all individuals, regardless of their backgrounds or beliefs. By promoting dialogue and understanding, we strive.</p></section><section id="section3" data-v-7d57d0d9><h2 data-v-7d57d0d9>Why you should join chatter</h2><p data-v-7d57d0d9>Our goal is to make writers and readers see our platform as their next heaven for blogging, ensuring ease in interactions, connecting with like-minded peers, have access to favorite content based on interests and able to communicate your great ideas with people. </p><section id="section3Parts" data-v-7d57d0d9><section data-v-7d57d0d9><img src="'+Se+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Analaytics</h3><p data-v-7d57d0d9>Analytics to track the number of views, likes and comment and also analyse the performance of your articles over a poeriod of time</p></section><section data-v-7d57d0d9><img src="'+Pe+'" alt="analysis" data-v-7d57d0d9><h3 data-v-7d57d0d9>Social interactions</h3><p data-v-7d57d0d9>Users on the platform can interact with posts they like, comment and engage in dicussions</p></section><section data-v-7d57d0d9><img src="'+Ie+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Content creation</h3><p data-v-7d57d0d9>Write nice and appealing with our in-built markdown, a rich text editor</p></section></section></section><section id="section4" data-v-7d57d0d9><img src="'+xe+'" alt="Adebola Muhydeen" data-v-7d57d0d9><section data-v-7d57d0d9><blockquote data-v-7d57d0d9><q data-v-7d57d0d9>Chatter has become an integral part of my online experience. As a user of this incredible blogging platform, I have discovered a vibrant community of individuals who are passionate about sharing their ideas and engaging in thoughtful dicussions.</q></blockquote><strong data-v-7d57d0d9>Adebola Muhydeen,</strong> <em data-v-7d57d0d9>Software developer at Apple</em></section></section>',3),gt=J({__name:"LandingPage",setup(f){const _=G();return(p,y)=>{const S=ue("RouterLink");return D(_).signedUser.isLogined?(h(),te(rt,{key:0})):(h(),g("section",ct,[t("section",dt,[lt,t("section",ut,[ht,pt,O(S,{to:"/login"},{default:he(()=>[mt]),_:1})])]),vt]))}}});const It=K(gt,[["__scopeId","data-v-7d57d0d9"]]);export{It as default};
