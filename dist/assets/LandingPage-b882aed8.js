import{u as ie,a as G}from"./useAuth.vue_vue_type_script_lang-6fe6b92b.js";import{d as J,a as re,r as w,u as ce,q as we,s as U,o as le,c as u,f as g,F as O,x as ee,g as o,h as M,w as C,t as B,k as de,y as F,_ as K,i as V,b as ue,e as te,j as pe,p as me,n as he,z as Ce}from"./index-0d83a52f.js";import{g as ge,r as oe,a as ve,l as be,d as ke}from"./index.esm2017-f1785873.js";import{P as _e,R as W,b as j,_ as z,d as Q,g as ye,y as Se,x as se,c as Pe,k as $e}from"./index.esm2017-3589eea2.js";import{a as fe}from"./axios-4a70c6fc.js";import{c as ne}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as xe}from"./useUserDetails.vue_vue_type_script_lang-8130a85e.js";import{u as ae}from"./useDetailButtons-f28c8ea1.js";import"./useLikeButton-25f53cfb.js";const Ie="/Vector1.png",Te="/Vector2.png",Le="/Vector3.png",Ee="/section4Img.png",Fe={key:0,class:F({resultsContainer:!0})},qe=["src","alt","onClick"],Re={class:"result-item-other"},Ae={class:"result-item-header"},Ue=["onClick"],Be=["innerHTML","onClick"],De={class:"editSectionbtn"},Me=["onClick"],He=["onClick"],Ne=J({__name:"AuthorFeedPage",setup(v){let p;re(()=>{clearTimeout(p);const n=document.getElementById("warningShow");n.style.display="none"});const l=w([]),_=w(""),S=new DOMParser,q=ce(),{app:P}=ie(),R=ge(P),T=_e(P),$=G(),x=w(!0);we(()=>{var n,d;((n=l.value)==null?void 0:n.length)>0&&((d=l.value)==null||d.sort((r,a)=>a.postTime.seconds-r.postTime.seconds),U(()=>{const r=document.getElementById("warningShow");r&&(r.style.display="none")}))}),le(()=>{clearTimeout(p),U(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Loading ...")}),L()});async function D(n){_.value="";try{const d=oe(R,n.postContain),r=await ve(d).catch(a=>{console.log(a)});await fe.post("/postContent",{contentUrl:r}).then(a=>{const y=S.parseFromString(a.data,"text/html");_.value=y.body.innerHTML}).catch(a=>{console.log(a)})}catch{const r=document.getElementById("ErrorShow");r.style.display="flex",r.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{r.style.display="none"},3e3)}}async function L(){const n=W(z(T,"posts"),j("posterId","==",$.signedUser.id)),r=(await Q(n)).docs.map(async y=>{var i;const t=y.data();await D(t);const s=S.parseFromString(_.value,"text/html");return s.body.querySelectorAll("img").forEach(c=>{c.remove()}),s.body.querySelectorAll("video").forEach(c=>{c.remove()}),(i=s.body.querySelector("h1"))==null||i.remove(),_.value=s.body.innerHTML,t.postContain=_.value,t}),a=await Promise.all(r);l.value=a,x.value=!1}function I(n){q.push(`/post/${n}`)}function b(n){if(n===$.signedUser.id)return q.push("/userProfile");q.push(`/chatterUser/${n}`)}function Y(n){q.push(`/write/${n}`)}async function H(n){try{const d=W(z(T,"posts"),j("postId","==",n));(await Q(d)).forEach(y=>{const t=y.data(),s=ye(T,"posts",t.postId);Se(s)});const a=`ChatterAppFiles/posts/${n}`;N(a)}catch(d){console.log(d)}}async function N(n){const d=oe(R,n),a=(await be(d)).items.map(y=>ke(y));await Promise.all(a)}return(n,d)=>{var r;return((r=l.value)==null?void 0:r.length)>0&&x.value===!1?(u(),g("div",Fe,[(u(!0),g(O,null,ee(l.value,(a,y)=>(u(),g("div",{key:y,class:"result-item"},[o("img",{src:M($).signedUser.profilePicture,alt:M($).signedUser.username+"profile picture",class:"result-item-image",onClick:C(t=>b(a.posterId),["prevent"])},null,8,qe),o("div",Re,[o("div",Ae,[o("span",{onClick:C(t=>b(a.posterId),["prevent"])},B(M($).signedUser.blogName),9,Ue),o("span",null,B(ne(a.postTime.seconds)),1)]),o("div",{innerHTML:a.postContain,id:"divContent",onClick:C(t=>I(a.postId),["prevent"])},null,8,Be),o("div",De,[o("button",{onClick:C(t=>Y(a.postId),["prevent"])},"Edit",8,Me),o("button",{onClick:C(t=>H(a.postId),["prevent"])},"Delete",8,He)])])]))),128))])):de("",!0)}}});const Oe=K(Ne,[["__scopeId","data-v-ac3de5a9"]]),Ve={class:"btns"},We={key:0,class:F({resultsContainer:!0})},je=["src","alt","onClick"],ze={class:"result-item-other"},Qe={class:"result-item-header"},Ge=["onClick"],Je=["innerHTML","onClick"],Ke={key:1,class:F({resultsContainer:!0})},Xe=["src","alt","onClick"],Ye={class:"result-item-other"},Ze={class:"result-item-header"},et=["onClick"],tt=["innerHTML","onClick"],ot=J({__name:"ReaderFeedPage",setup(v){let p;re(()=>{clearTimeout(p);const t=document.getElementById("warningShow");t.style.display="none"});const l=w(""),_=new DOMParser;xe();const{app:S}=ie(),q=ge(S),P=G(),R=_e(S),T=ce(),$=w(!0),x=w("interested_section"),D=w([]),L=w([]),I=w(),b=w([]),Y=w(0);le(()=>{clearTimeout(p),U(()=>{const t=document.getElementById("warningShow");t&&(t.style.display="flex",t.textContent="Loading ...")}),a(D.value)});function H(t){L.value=[],b.value=[],x.value=t,U(()=>{const s=document.getElementById("warningShow");s&&(s.style.display="flex",s.textContent="Loading ...")}),t==="following_section"&&y(),t==="interested_section"&&a(D.value)}function N(t){T.push(`/post/${t}`)}function n(t){if(t===P.signedUser.id)return T.push("/userProfile");T.push(`/chatterUser/${t}`)}P.signedUser.interests.forEach(t=>{const s=t.trim();D.value.push(s.charAt(0).toUpperCase()+s.slice(1).toLowerCase())});async function d(t){l.value="";try{const s=oe(q,t.postContain),i=await ve(s).catch(c=>{console.log(c)});await fe.post("/postContent",{contentUrl:i}).then(c=>{const e=_.parseFromString(c.data,"text/html");l.value=e.body.innerHTML}).catch(c=>{console.log(c)})}catch{const i=document.getElementById("ErrorShow");i.style.display="flex",i.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{i.style.display="none"},3e3)}}async function r(t){I.value=null;try{const s=ye(R,"users",t),i=await Pe(s);if(i.data()!==void 0){const{fullName:c,profilePicture:e,username:m,blogName:f}=i.data(),h={profilePicture:e,posterID:t,fullName:c,username:m,blogName:f};I.value={id:t,img:h.profilePicture,fullName:h.fullName,username:h.username,blogname:h.blogName}}}catch{}}async function a(t){try{const s=t.map(async e=>{const m=W(z(R,"posts"),j("postTag","==",e),se("postTime","desc")),f=await Q(m);return Promise.all(f.docs.map(async h=>{var A;const k=h.data();await d(k);const E=_.parseFromString(l.value,"text/html");return E.body.querySelectorAll("img").forEach(Z=>{Z.remove()}),E.body.querySelectorAll("video").forEach(Z=>{Z.remove()}),(A=E.body.querySelector("h1"))==null||A.remove(),l.value=E.body.innerHTML,k.postContain=l.value,await r(k.posterId),k.posterDetails=I.value,I.value=null,$.value=!1,k}))}),c=(await Promise.all(s)).flat();L.value=c,L.value.length>0&&U(()=>{const e=document.getElementById("warningShow");e&&(e.style.display="none")})}catch(s){console.log(s);const i=document.getElementById("ErrorShow");i.style.display="flex",i.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{i.style.display="none"},3e3)}}async function y(){const t=P.signedUser.following.theFollowings.length<10?P.signedUser.following.theFollowings.length:10,s=Math.floor(10/t);b.value=[];const i=P.signedUser.following.theFollowings.map(async c=>{try{const e=W(z(R,"posts"),j("posterId","==",c),se("postTime","desc"),$e(s)),m=await Q(e);return Promise.all(m.docs.map(async f=>{var E;const h=f.data();await d(h);const k=_.parseFromString(l.value,"text/html");return k.body.querySelectorAll("img").forEach(A=>{A.remove()}),k.body.querySelectorAll("video").forEach(A=>{A.remove()}),(E=k.body.querySelector("h1"))==null||E.remove(),l.value=k.body.innerHTML,h.postContain=l.value,await r(h.posterId),h.posterDetails=I.value,I.value=null,$.value=!1,h}))}catch(e){throw console.log(e),new Error("Something went wrong")}});try{const e=(await Promise.all(i)).flat();b.value=e,b.value.length>10&&(Y.value=10),b.value.length>0&&U(()=>{const m=document.getElementById("warningShow");m&&(m.style.display="none")})}catch{const e=document.getElementById("ErrorShow");e.style.display="flex",e.textContent="Something went wrong, check your internet connection",p=setTimeout(()=>{e.style.display="none"},3e3)}}return(t,s)=>{var i,c;return u(),g(O,null,[o("div",Ve,[o("button",{type:"button",onClick:s[0]||(s[0]=e=>H("interested_section")),class:F({active:x.value==="interested_section"})},"Interested",2),o("button",{type:"button",onClick:s[1]||(s[1]=e=>H("following_section")),class:F({active:x.value==="following_section"})},"Followings",2)]),((i=L.value)==null?void 0:i.length)>0&&x.value==="interested_section"?(u(),g("div",We,[(u(!0),g(O,null,ee(L.value,(e,m)=>(u(),g("div",{key:m,class:"result-item"},[o("img",{src:e==null?void 0:e.posterDetails.img,alt:(e==null?void 0:e.posterDetails.username)+"profile picture",class:"result-item-image",onClick:C(f=>n(e.posterId),["prevent"])},null,8,je),o("div",ze,[o("div",Qe,[o("span",{onClick:C(f=>n(e.posterId),["prevent"])},B(e==null?void 0:e.posterDetails.blogname),9,Ge),o("span",null,B(ne(e.postTime.seconds)),1)]),o("div",{innerHTML:e.postContain,id:"divContent",onClick:C(f=>N(e.postId),["prevent"])},null,8,Je),V(ae,{post:e},null,8,["post"])])]))),128))])):((c=b.value)==null?void 0:c.length)>0&&x.value==="following_section"?(u(),g("div",Ke,[(u(!0),g(O,null,ee(b.value,(e,m)=>(u(),g("div",{key:m,class:"result-item"},[o("img",{src:e.posterDetails.img,alt:e.posterDetails.username+"profile picture",class:"result-item-image",onClick:C(f=>n(e.posterId),["prevent"])},null,8,Xe),o("div",Ye,[o("div",Ze,[o("span",{onClick:C(f=>n(e.posterId),["prevent"])},B(e.posterDetails.blogname),9,et),o("span",null,B(ne(e.postTime.seconds)),1)]),o("div",{innerHTML:e.postContain,id:"divContent",onClick:C(f=>N(e.postId),["prevent"])},null,8,tt),V(ae,{post:e},null,8,["post"])])]))),128))])):de("",!0)],64)}}});const nt=K(ot,[["__scopeId","data-v-0e26cf54"]]),st=v=>(me("data-v-8df9cbd7"),v=v(),he(),v),at={class:"feedDiv"},it=st(()=>o("div",{class:"lineContainer"},[o("div",{class:F({line:!0})}),o("div",{class:F({line:!0})})],-1)),rt=J({__name:"FeedPage",setup(v){const p=G();return(l,_)=>{const S=ue("RouterLink");return u(),g("div",at,[M(p).asReader?(u(),te(nt,{key:0})):(u(),te(Oe,{key:1})),V(S,{to:"/write",draggable:""},{default:pe(()=>[it]),_:1})])}}});const ct=K(rt,[["__scopeId","data-v-8df9cbd7"]]),X=v=>(me("data-v-7d57d0d9"),v=v(),he(),v),lt={key:1,id:"landingPagecontainer"},dt={id:"section1"},ut=X(()=>o("section",{id:"img"},null,-1)),pt={id:"text"},mt=X(()=>o("h2",null,"Welcome to Chatter: A Haven for Text-Based Content",-1)),ht=X(()=>o("p",null,"Unleash the power of Words, Connect with Like-minded Readers.",-1)),gt=X(()=>o("button",null,"Get Started",-1)),vt=Ce('<section id="section2" data-v-7d57d0d9><h2 data-v-7d57d0d9>About Chatter</h2><p data-v-7d57d0d9>Chatter is a multi-functional platform where authors and readers can have access to their own content. It aims to be a traditional bookworm&#39;s heaven and a blog to get access to more text based content. Our vision is to foster an inclusive and vibrant community where diversity is celebrated. We encourage open-mindedness and respect for all individuals, regardless of their backgrounds or beliefs. By promoting dialogue and understanding, we strive.</p></section><section id="section3" data-v-7d57d0d9><h2 data-v-7d57d0d9>Why you should join chatter</h2><p data-v-7d57d0d9>Our goal is to make writers and readers see our platform as their next heaven for blogging, ensuring ease in interactions, connecting with like-minded peers, have access to favorite content based on interests and able to communicate your great ideas with people. </p><section id="section3Parts" data-v-7d57d0d9><section data-v-7d57d0d9><img src="'+Ie+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Analaytics</h3><p data-v-7d57d0d9>Analytics to track the number of views, likes and comment and also analyse the performance of your articles over a poeriod of time</p></section><section data-v-7d57d0d9><img src="'+Te+'" alt="analysis" data-v-7d57d0d9><h3 data-v-7d57d0d9>Social interactions</h3><p data-v-7d57d0d9>Users on the platform can interact with posts they like, comment and engage in dicussions</p></section><section data-v-7d57d0d9><img src="'+Le+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Content creation</h3><p data-v-7d57d0d9>Write nice and appealing with our in-built markdown, a rich text editor</p></section></section></section><section id="section4" data-v-7d57d0d9><img src="'+Ee+'" alt="Adebola Muhydeen" data-v-7d57d0d9><section data-v-7d57d0d9><blockquote data-v-7d57d0d9><q data-v-7d57d0d9>Chatter has become an integral part of my online experience. As a user of this incredible blogging platform, I have discovered a vibrant community of individuals who are passionate about sharing their ideas and engaging in thoughtful dicussions.</q></blockquote><strong data-v-7d57d0d9>Adebola Muhydeen,</strong> <em data-v-7d57d0d9>Software developer at Apple</em></section></section>',3),_t=J({__name:"LandingPage",setup(v){const p=G();return(l,_)=>{const S=ue("RouterLink");return M(p).signedUser.isLogined?(u(),te(ct,{key:0})):(u(),g("section",lt,[o("section",dt,[ut,o("section",pt,[mt,ht,V(S,{to:"/login"},{default:pe(()=>[gt]),_:1})])]),vt]))}}});const xt=K(_t,[["__scopeId","data-v-7d57d0d9"]]);export{xt as default};
