import{d as A,u as V,r as L,a as j,b as U,c,e as O,f as d,g as e,w as g,h as o,t as n,i as _,j as f,y as w,l as r,k as C,F as z,x as G}from"./index-0d83a52f.js";import{u as J,a as K}from"./useAuth.vue_vue_type_script_lang-6fe6b92b.js";import{_ as Q}from"./useLoadingPage.vue_vue_type_style_index_0_lang-d974f102.js";import{g as W,r as X,a as Y}from"./index.esm2017-f1785873.js";import{P as Z,R as ee,b as te,_ as oe,d as se}from"./index.esm2017-3589eea2.js";import{g as ne}from"./useUserViewProfile.vue_vue_type_script_lang-37094748.js";import{u as ie}from"./useUserDetails.vue_vue_type_script_lang-8130a85e.js";import{c as le}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as ae}from"./useDetailButtons-f28c8ea1.js";import{a as re}from"./axios-4a70c6fc.js";import"./useLikeButton-25f53cfb.js";const ce={key:1},de=["onClick"],ue=["title"],pe={id:"themeImgContainer"},_e=["src"],he={class:"body"},me={class:"imageCon"},fe={class:"imgCon"},ve=["src","alt"],ge={class:"sectionFoImage"},we={class:"follow"},Pe=e("p",null,"||",-1),ye={class:"readerSec"},Ce={class:"btnSection"},be=e("span",null,"Full Name:",-1),ke=e("span",null,"User Name:",-1),Se=e("span",null,"Blog Name:",-1),De={key:0},Te=e("span",null,"Biography:",-1),Be={key:1},Ne=e("span",null,"Email:",-1),Ie=e("span",null,"Location:",-1),Le=e("span",null,"Birthday:",-1),Ue=e("span",null,"Gender:",-1),xe={key:2},Ee=e("span",null,"Interests:",-1),Re={key:0},$e={key:1},Fe={class:"type"},Me={class:"result-item"},qe=["src","alt","onClick"],He={class:"result-item-other"},Ae={class:"result-item-header"},Ve=["onClick"],je=["innerHTML","onClick"],Oe={id:"navigators"},ze=e("button",null,"Home",-1),Ge=e("button",null,"Search",-1),Je=e("button",{id:"notification-button"},"Notifications",-1),it=A({__name:"ChatterUserPage",props:["userId"],setup(x){const b=x;ie();const h=V(),{app:k}=J(),E=W(k),R=Z(k),S=new DOMParser,t=K(),m=L("");async function $(s){m.value="";const l=X(E,s.postContain),u=await Y(l).catch(a=>{console.log(a)});await re.post("/postContent",{contentUrl:u}).then(a=>{const i=S.parseFromString(a.data,"text/html");m.value=i.body.innerHTML}).catch(a=>{console.log(a)})}async function F(s,l,u){const a=ee(oe(R,"posts"),te("postId","==",u));(await se(a)).forEach(P=>{const p=P.data();$(p).then(()=>{var N,I;(N=document.getElementById("searchBtn"))==null||N.removeAttribute("disabled");const v=S.parseFromString(m.value,"text/html");v.body.querySelectorAll("img").forEach(y=>{y.remove()}),v.body.querySelectorAll("video").forEach(y=>{y.remove()}),(I=v.body.querySelector("h1"))==null||I.remove(),m.value=v.body.innerHTML,p.postContain=m.value,t.viwedProfile.interactions.splice(s,1,{postDetails:p,type:l})})})}ne(b.userId).then(()=>{t.viwedProfile.interactions.length>0&&t.viwedProfile.interactions.forEach((s,l)=>{F(l,s.type,s.details.postid)})}).finally(()=>{B.value=!1});function M(){h.go(-1)}function q(s){h.push(`/post/${s}`)}function D(s){if(s===t.signedUser.id)return h.push("/userProfile");h.push(`/chatterUser/${s}`)}function T(s){t.section=s}const B=L(!0);let H=setTimeout(()=>{b.userId===t.signedUser.id&&(h.push("/userProfile"),console.log(t.viwedProfile))},5e3);return j(()=>{clearTimeout(H);const s=document.getElementById("warningShow");s.style.display="none"}),(s,l)=>{const u=U("P"),a=U("RouterLink");return B.value?(c(),O(Q,{key:0,"action-name":"Loading profile..."})):(c(),d("main",ce,[e("header",null,[e("button",{onClick:g(M,["prevent"])},"Back",8,de),e("button",{title:o(t).themeDetails.title,id:"themeBtn",onClick:l[0]||(l[0]=(...i)=>o(t).changeTheme&&o(t).changeTheme(...i))},[e("div",pe,[e("img",{src:o(t).themeDetails.img},null,8,_e)])],8,ue)]),e("div",he,[e("div",me,[e("div",fe,[e("img",{src:o(t).viwedProfile.profilePicture,height:"40",alt:o(t).viwedProfile.fullName+"profile pic"},null,8,ve)])]),e("section",ge,[e("h3",null,n(o(t).viwedProfile.fullName),1),e("div",we,[_(u,null,{default:f(()=>[r(n(o(t).viwedProfile.followers.total)+" Followers",1)]),_:1}),Pe,_(u,null,{default:f(()=>[r(n(o(t).viwedProfile.following.total)+" Following",1)]),_:1})])]),e("div",ye,[e("div",Ce,[e("button",{onClick:l[1]||(l[1]=i=>T("personal")),class:w({active:o(t).section==="personal"})},"Personal",2),e("button",{onClick:l[2]||(l[2]=i=>T("interaction")),class:w({active:o(t).section==="interaction"})},"Interactions",2)]),e("div",{class:w({show:o(t).section==="personal",none:o(t).section!=="personal",personal:!0})},[e("p",null,[be,r(" "+n(o(t).viwedProfile.fullName),1)]),e("p",null,[ke,r(" "+n(o(t).viwedProfile.username),1)]),e("p",null,[Se,r(" "+n(o(t).viwedProfile.blogName),1)]),o(t).viwedProfile.bio.length>0?(c(),d("p",De,[Te,r(" "+n(o(t).viwedProfile.bio),1)])):C("",!0),o(t).viwedProfile.settings.privacySettings.showEmail?(c(),d("p",Be,[Ne,r(" "+n(o(t).viwedProfile.email),1)])):C("",!0),e("p",null,[Ie,r(" "+n(o(t).viwedProfile.location),1)]),e("p",null,[Le,r(" "+n(o(t).viwedProfile.dateOfBirth),1)]),e("p",null,[Ue,r(" "+n(o(t).viwedProfile.gender),1)]),o(t).viwedProfile.interests.length>0?(c(),d("p",xe,[Ee,r(" "+n(o(t).viwedProfile.interests.join(",")),1)])):C("",!0)],2),e("div",{class:w({show:o(t).section==="interaction",none:o(t).section!=="interaction",interaction:!0})},[o(t).viwedProfile.interactions.length===0?(c(),d("p",Re,"No interactions yet.")):(c(),d("div",$e,[(c(!0),d(z,null,G(o(t).viwedProfile.interactions,(i,P)=>(c(),d("div",{key:P},[e("div",Fe,n(i.type),1),e("div",Me,[e("img",{src:o(t).viwedProfile.profilePicture,alt:o(t).viwedProfile.username+"profile picture",class:"result-item-image",onClick:g(p=>D(i.postDetails.posterId),["prevent"])},null,8,qe),e("div",He,[e("div",Ae,[e("span",{onClick:g(p=>D(i.postDetails.posterId),["prevent"])},n(o(t).viwedProfile.blogName),9,Ve),e("span",null,n(le(i.postDetails.postTime.seconds)),1)]),e("div",{innerHTML:i.postDetails.postContain,id:"divContent",onClick:g(p=>q(i.postDetails.postId),["prevent"])},null,8,je),_(ae,{post:i.postDetails},null,8,["post"])])])]))),128))]))],2)])]),e("section",Oe,[_(a,{to:"/home"},{default:f(()=>[ze]),_:1}),_(a,{to:"/search"},{default:f(()=>[Ge]),_:1}),_(a,{to:"/notification"},{default:f(()=>[Je]),_:1})])]))}}});export{it as default};
