import{d as K,u as Q,r as U,a as W,b as $,c as d,e as X,f as u,g as e,w,h as o,n as Y,t as n,i as h,j as f,z as y,l as r,k,F as Z,y as ee}from"./index-3c7daa31.js";import{u as E,a as R,P as x,R as F,c as q,_ as M,d as H}from"./useAuth.vue_vue_type_script_lang-0a2c6dcb.js";import{_ as te}from"./useLoadingPage.vue_vue_type_style_index_0_lang-1a9153d1.js";import{g as oe,r as se,a as ne}from"./index.esm2017-3ce07352.js";import{u as ie}from"./useUserDetails.vue_vue_type_script_lang-f8979881.js";import{c as le,u as ae}from"./useDetailButtons-13ec496c.js";import{a as re}from"./axios-4a70c6fc.js";const{app:ce}=E(),de=R(),ue=x(ce);async function pe(P){const v=F(M(ue,"users"),q("id","==",`${P}`));try{await H(v).then(c=>{de.viwedProfile=c.docs[0].data()})}catch(c){console.log(c)}}const _e={key:1},he=["onClick"],me=["title"],fe={id:"themeImgContainer"},ve=["src"],ge={class:"body"},we={class:"imageCon"},ye={class:"sectionFoImage"},Pe={class:"follow"},Ce=e("p",null,"||",-1),be={class:"readerSec"},ke={class:"btnSection"},Se=e("span",null,"Full Name:",-1),De=e("span",null,"User Name:",-1),Te=e("span",null,"Blog Name:",-1),Be={key:0},Ie=e("span",null,"Biography:",-1),Ne={key:1},Le=e("span",null,"Email:",-1),Ue=e("span",null,"Location:",-1),$e=e("span",null,"Birthday:",-1),Ee=e("span",null,"Gender:",-1),Re={key:2},xe=e("span",null,"Interests:",-1),Fe={key:0},qe={key:1},Me={class:"type"},He={class:"result-item"},Ae=["src","alt","onClick"],Ve={class:"result-item-other"},ze={class:"result-item-header"},je=["onClick"],Oe=["innerHTML","onClick"],Ge={id:"navigators"},Je=e("button",null,"Home",-1),Ke=e("button",null,"Search",-1),Qe=e("button",{id:"notification-button"},"Notifications",-1),st=K({__name:"ChatterUserPage",props:["userId"],setup(P){const v=P;ie();const c=Q(),{app:S}=E(),A=oe(S),V=x(S),D=new DOMParser,t=R(),m=U("");async function z(s){m.value="";const l=se(A,s.postContain),p=await ne(l).catch(a=>{console.log(a)});await re.post("/postContent",{contentUrl:p}).then(a=>{const i=D.parseFromString(a.data,"text/html");m.value=i.body.innerHTML}).catch(a=>{console.log(a)})}async function j(s,l,p){const a=F(M(V,"posts"),q("postId","==",p));(await H(a)).forEach(C=>{const _=C.data();z(_).then(()=>{var N,L;(N=document.getElementById("searchBtn"))==null||N.removeAttribute("disabled");const g=D.parseFromString(m.value,"text/html");g.body.querySelectorAll("img").forEach(b=>{b.remove()}),g.body.querySelectorAll("video").forEach(b=>{b.remove()}),(L=g.body.querySelector("h1"))==null||L.remove(),m.value=g.body.innerHTML,_.postContain=m.value,t.viwedProfile.interactions.splice(s,1,{postDetails:_,type:l})})})}pe(v.userId).then(()=>{t.viwedProfile.interactions.length>0&&t.viwedProfile.interactions.forEach((s,l)=>{j(l,s.type,s.details.postid)})}).finally(()=>{I.value=!1});function O(){c.go(-1)}function G(s){c.push(`/post/${s}`)}function T(s){if(s===t.signedUser.id)return c.push("/userProfile");c.push(`/chatterUser/${s}`)}function B(s){t.section=s}const I=U(!0);let J=setTimeout(()=>{v.userId===t.signedUser.id&&(c.push("/userProfile"),console.log(t.viwedProfile))},5e3);return W(()=>{clearTimeout(J);const s=document.getElementById("warningShow");s.style.display="none"}),(s,l)=>{const p=$("P"),a=$("RouterLink");return I.value?(d(),X(te,{key:0,"action-name":"Loading profile..."})):(d(),u("main",_e,[e("header",null,[e("button",{onClick:w(O,["prevent"])},"Back",8,he),e("button",{title:o(t).themeDetails.title,id:"themeBtn",onClick:l[0]||(l[0]=(...i)=>o(t).changeTheme&&o(t).changeTheme(...i))},[e("div",fe,[e("img",{src:o(t).themeDetails.img},null,8,ve)])],8,me)]),e("div",ge,[e("div",we,[e("div",{class:"imgCon",style:Y({backgroundImage:`url(${o(t).viwedProfile.profilePicture})`})},null,4)]),e("section",ye,[e("h3",null,n(o(t).viwedProfile.fullName),1),e("div",Pe,[h(p,null,{default:f(()=>[r(n(o(t).viwedProfile.followers.total)+" Followers",1)]),_:1}),Ce,h(p,null,{default:f(()=>[r(n(o(t).viwedProfile.following.total)+" Following",1)]),_:1})])]),e("div",be,[e("div",ke,[e("button",{onClick:l[1]||(l[1]=i=>B("personal")),class:y({active:o(t).section==="personal"})},"Personal",2),e("button",{onClick:l[2]||(l[2]=i=>B("interaction")),class:y({active:o(t).section==="interaction"})},"Interactions",2)]),e("div",{class:y({show:o(t).section==="personal",none:o(t).section!=="personal",personal:!0})},[e("p",null,[Se,r(" "+n(o(t).viwedProfile.fullName),1)]),e("p",null,[De,r(" "+n(o(t).viwedProfile.username),1)]),e("p",null,[Te,r(" "+n(o(t).viwedProfile.blogName),1)]),o(t).viwedProfile.bio.length>0?(d(),u("p",Be,[Ie,r(" "+n(o(t).viwedProfile.bio),1)])):k("",!0),o(t).viwedProfile.settings.privacySettings.showEmail?(d(),u("p",Ne,[Le,r(" "+n(o(t).viwedProfile.email),1)])):k("",!0),e("p",null,[Ue,r(" "+n(o(t).viwedProfile.location),1)]),e("p",null,[$e,r(" "+n(o(t).viwedProfile.dateOfBirth),1)]),e("p",null,[Ee,r(" "+n(o(t).viwedProfile.gender),1)]),o(t).viwedProfile.interests.length>0?(d(),u("p",Re,[xe,r(" "+n(o(t).viwedProfile.interests.join(",")),1)])):k("",!0)],2),e("div",{class:y({show:o(t).section==="interaction",none:o(t).section!=="interaction",interaction:!0})},[o(t).viwedProfile.interactions.length===0?(d(),u("p",Fe,"No interactions yet.")):(d(),u("div",qe,[(d(!0),u(Z,null,ee(o(t).viwedProfile.interactions,(i,C)=>(d(),u("div",{key:C},[e("div",Me,n(i.type),1),e("div",He,[e("img",{src:o(t).viwedProfile.profilePicture,alt:o(t).viwedProfile.username+"profile picture",class:"result-item-image",onClick:w(_=>T(i.postDetails.posterId),["prevent"])},null,8,Ae),e("div",Ve,[e("div",ze,[e("span",{onClick:w(_=>T(i.postDetails.posterId),["prevent"])},n(o(t).viwedProfile.blogName),9,je),e("span",null,n(le(i.postDetails.postTime.seconds)),1)]),e("div",{innerHTML:i.postDetails.postContain,id:"divContent",onClick:w(_=>G(i.postDetails.postId),["prevent"])},null,8,Oe),h(ae,{post:i.postDetails},null,8,["post"])])])]))),128))]))],2)])]),e("section",Ge,[h(a,{to:"/home"},{default:f(()=>[Je]),_:1}),h(a,{to:"/search"},{default:f(()=>[Ke]),_:1}),h(a,{to:"/notification"},{default:f(()=>[Qe]),_:1})])]))}}});export{st as default};
