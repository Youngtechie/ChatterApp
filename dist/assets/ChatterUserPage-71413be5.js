import{d as A,u as V,r as L,a as z,b as U,c,e as j,f as d,g as e,w as g,h as o,n as O,t as n,i as _,j as f,z as w,l as r,k as C,F as G,y as J}from"./index-a41cb3dd.js";import{u as K,a as Q}from"./useAuth.vue_vue_type_script_lang-a9283b65.js";import{_ as W}from"./useLoadingPage.vue_vue_type_style_index_0_lang-0462ce87.js";import{g as X,r as Y,a as Z}from"./index.esm2017-a3842238.js";import{P as ee,R as te,b as oe,_ as se,d as ne}from"./index.esm2017-62f401cd.js";import{g as ie}from"./useUserViewProfile.vue_vue_type_script_lang-3fed75b3.js";import{u as le}from"./useUserDetails.vue_vue_type_script_lang-2f39a4c8.js";import{c as ae}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as re}from"./useDetailButtons-0eb84136.js";import{a as ce}from"./axios-4a70c6fc.js";import"./useLikeButton-133f6f6d.js";const de={key:1},ue=["onClick"],pe=["title"],_e={id:"themeImgContainer"},me=["src"],he={class:"body"},fe={class:"imageCon"},ve={class:"sectionFoImage"},ge={class:"follow"},we=e("p",null,"||",-1),Pe={class:"readerSec"},ye={class:"btnSection"},Ce=e("span",null,"Full Name:",-1),be=e("span",null,"User Name:",-1),ke=e("span",null,"Blog Name:",-1),Se={key:0},De=e("span",null,"Biography:",-1),Te={key:1},Be=e("span",null,"Email:",-1),Ie=e("span",null,"Location:",-1),Ne=e("span",null,"Birthday:",-1),Le=e("span",null,"Gender:",-1),Ue={key:2},$e=e("span",null,"Interests:",-1),Ee={key:0},Re={key:1},xe={class:"type"},Fe={class:"result-item"},Me=["src","alt","onClick"],qe={class:"result-item-other"},He={class:"result-item-header"},Ae=["onClick"],Ve=["innerHTML","onClick"],ze={id:"navigators"},je=e("button",null,"Home",-1),Oe=e("button",null,"Search",-1),Ge=e("button",{id:"notification-button"},"Notifications",-1),nt=A({__name:"ChatterUserPage",props:["userId"],setup($){const b=$;le();const m=V(),{app:k}=K(),E=X(k),R=ee(k),S=new DOMParser,t=Q(),h=L("");async function x(s){h.value="";const l=Y(E,s.postContain),u=await Z(l).catch(a=>{console.log(a)});await ce.post("/postContent",{contentUrl:u}).then(a=>{const i=S.parseFromString(a.data,"text/html");h.value=i.body.innerHTML}).catch(a=>{console.log(a)})}async function F(s,l,u){const a=te(se(R,"posts"),oe("postId","==",u));(await ne(a)).forEach(P=>{const p=P.data();x(p).then(()=>{var I,N;(I=document.getElementById("searchBtn"))==null||I.removeAttribute("disabled");const v=S.parseFromString(h.value,"text/html");v.body.querySelectorAll("img").forEach(y=>{y.remove()}),v.body.querySelectorAll("video").forEach(y=>{y.remove()}),(N=v.body.querySelector("h1"))==null||N.remove(),h.value=v.body.innerHTML,p.postContain=h.value,t.viwedProfile.interactions.splice(s,1,{postDetails:p,type:l})})})}ie(b.userId).then(()=>{t.viwedProfile.interactions.length>0&&t.viwedProfile.interactions.forEach((s,l)=>{F(l,s.type,s.details.postid)})}).finally(()=>{B.value=!1});function M(){m.go(-1)}function q(s){m.push(`/post/${s}`)}function D(s){if(s===t.signedUser.id)return m.push("/userProfile");m.push(`/chatterUser/${s}`)}function T(s){t.section=s}const B=L(!0);let H=setTimeout(()=>{b.userId===t.signedUser.id&&(m.push("/userProfile"),console.log(t.viwedProfile))},5e3);return z(()=>{clearTimeout(H);const s=document.getElementById("warningShow");s.style.display="none"}),(s,l)=>{const u=U("P"),a=U("RouterLink");return B.value?(c(),j(W,{key:0,"action-name":"Loading profile..."})):(c(),d("main",de,[e("header",null,[e("button",{onClick:g(M,["prevent"])},"Back",8,ue),e("button",{title:o(t).themeDetails.title,id:"themeBtn",onClick:l[0]||(l[0]=(...i)=>o(t).changeTheme&&o(t).changeTheme(...i))},[e("div",_e,[e("img",{src:o(t).themeDetails.img},null,8,me)])],8,pe)]),e("div",he,[e("div",fe,[e("div",{class:"imgCon",style:O({backgroundImage:`url(${o(t).viwedProfile.profilePicture})`})},null,4)]),e("section",ve,[e("h3",null,n(o(t).viwedProfile.fullName),1),e("div",ge,[_(u,null,{default:f(()=>[r(n(o(t).viwedProfile.followers.total)+" Followers",1)]),_:1}),we,_(u,null,{default:f(()=>[r(n(o(t).viwedProfile.following.total)+" Following",1)]),_:1})])]),e("div",Pe,[e("div",ye,[e("button",{onClick:l[1]||(l[1]=i=>T("personal")),class:w({active:o(t).section==="personal"})},"Personal",2),e("button",{onClick:l[2]||(l[2]=i=>T("interaction")),class:w({active:o(t).section==="interaction"})},"Interactions",2)]),e("div",{class:w({show:o(t).section==="personal",none:o(t).section!=="personal",personal:!0})},[e("p",null,[Ce,r(" "+n(o(t).viwedProfile.fullName),1)]),e("p",null,[be,r(" "+n(o(t).viwedProfile.username),1)]),e("p",null,[ke,r(" "+n(o(t).viwedProfile.blogName),1)]),o(t).viwedProfile.bio.length>0?(c(),d("p",Se,[De,r(" "+n(o(t).viwedProfile.bio),1)])):C("",!0),o(t).viwedProfile.settings.privacySettings.showEmail?(c(),d("p",Te,[Be,r(" "+n(o(t).viwedProfile.email),1)])):C("",!0),e("p",null,[Ie,r(" "+n(o(t).viwedProfile.location),1)]),e("p",null,[Ne,r(" "+n(o(t).viwedProfile.dateOfBirth),1)]),e("p",null,[Le,r(" "+n(o(t).viwedProfile.gender),1)]),o(t).viwedProfile.interests.length>0?(c(),d("p",Ue,[$e,r(" "+n(o(t).viwedProfile.interests.join(",")),1)])):C("",!0)],2),e("div",{class:w({show:o(t).section==="interaction",none:o(t).section!=="interaction",interaction:!0})},[o(t).viwedProfile.interactions.length===0?(c(),d("p",Ee,"No interactions yet.")):(c(),d("div",Re,[(c(!0),d(G,null,J(o(t).viwedProfile.interactions,(i,P)=>(c(),d("div",{key:P},[e("div",xe,n(i.type),1),e("div",Fe,[e("img",{src:o(t).viwedProfile.profilePicture,alt:o(t).viwedProfile.username+"profile picture",class:"result-item-image",onClick:g(p=>D(i.postDetails.posterId),["prevent"])},null,8,Me),e("div",qe,[e("div",He,[e("span",{onClick:g(p=>D(i.postDetails.posterId),["prevent"])},n(o(t).viwedProfile.blogName),9,Ae),e("span",null,n(ae(i.postDetails.postTime.seconds)),1)]),e("div",{innerHTML:i.postDetails.postContain,id:"divContent",onClick:g(p=>q(i.postDetails.postId),["prevent"])},null,8,Ve),_(re,{post:i.postDetails},null,8,["post"])])])]))),128))]))],2)])]),e("section",ze,[_(a,{to:"/home"},{default:f(()=>[je]),_:1}),_(a,{to:"/search"},{default:f(()=>[Oe]),_:1}),_(a,{to:"/notification"},{default:f(()=>[Ge]),_:1})])]))}}});export{nt as default};
