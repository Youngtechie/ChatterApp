import{u as o,a as i,P as d,A as r,b as l,g as u,R as c,c as g,_ as h,d as U}from"./useAuth.vue_vue_type_script_lang-0a2c6dcb.js";const{app:f,auth:m}=o(),s=i(),a=d(f);async function y(e){const n=c(h(a,"users"),g("email","==",`${e.email}`));try{await U(n).then(t=>{t.docs.length>0&&(s.signedUser=t.docs[0].data(),s.signedUser.isLogined=!0,s.signedUser.analyses.totalComments=t.docs[0].data().comments.total.out,s.signedUser.analyses.totalLiked=t.docs[0].data().likes.total.out,s.signedUser.analyses.totalPosts=t.docs[0].data().posts.length)})}catch(t){console.log(t)}}async function b(){r(m,e=>{e?(s.authenticated=!0,s.userId=e.uid,y(e).then(()=>{l(u(a,"users",`${s.signedUser.id}`),s.signedUser)})):s.authenticated=!1})}export{b as u};
