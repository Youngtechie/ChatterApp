import{u as re,a as X}from"./useAuth.vue_vue_type_script_lang-090849db.js";import{d as Q,a as le,r as v,u as ce,x as Ce,o as de,y as f,c as p,f as S,F as O,z as te,g as t,w as P,k as ue,j as M,t as U,l as ge,n as q,h as V,p as Se,v as be,b as he,e as ne,i as pe,q as me,s as ve,A as ke}from"./index-691c7388.js";import{g as xe,r as Pe,l as $e,d as Ie}from"./index.esm2017-0c034e29.js";import{P as fe,R as W,k as oe,b as Y,_ as j,d as z,g as _e,y as Te,x as ae,c as Le}from"./index.esm2017-cd82f12f.js";import{a as ye}from"./axios-4a70c6fc.js";import{c as se}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import{u as Fe}from"./useUserDetails.vue_vue_type_script_lang-d60ffb99.js";import{u as ie}from"./useDetailButtons-50a0b5b9.js";const Ee="/Vector1.png",Be="/Vector2.png",De="/Vector3.png",Ae="/section4Img.png",qe={key:0,class:q({resultsContainer:!0})},Ue=["onClick"],Me={class:"result-item-other"},Re={class:"result-item-header"},He=["onClick"],Ne=["innerHTML","onClick"],Oe={class:"editSectionbtn"},Ve=["onClick"],We=["onClick"],Ye=Q({__name:"AuthorFeedPage",setup(b){let l;le(()=>{clearTimeout(l);const o=document.getElementById("warningShow");o&&(o.style.display="none")});const c=v([]),k=v(""),g=new DOMParser,$=ce(),{app:F}=re(),_=xe(F),y=fe(F),w=X();Ce(()=>{var o,h;((o=c.value)==null?void 0:o.length)>0&&((h=c.value)==null||h.sort((i,r)=>r.postTime.seconds-i.postTime.seconds),f(()=>{const i=document.getElementById("warningShow");i&&(i.style.display="none")}))}),de(()=>{clearTimeout(l),f(()=>{const o=document.getElementById("warningShow");o&&(o.style.display="flex",o.textContent="Loading ...")}),E()});async function L(o){k.value="";const h=o.postContain;await ye.post("/postContent",{contentUrl:h}).then(i=>{const r=g.parseFromString(i.data,"text/html");k.value=r.body.innerHTML})}async function E(){const o=W(j(y,"posts"),Y("posterId","==",w.signedUser.id),oe(10));try{const i=(await z(o)).docs.map(async d=>{var n;const e=d.data();if(e!=null&&e.length!==0){await L(e);const s=g.parseFromString(k.value,"text/html");return s.body.querySelectorAll("img").forEach(C=>{C.remove()}),s.body.querySelectorAll("video").forEach(C=>{C.remove()}),(n=s.body.querySelector("h1"))==null||n.remove(),k.value=s.body.innerHTML,e.postContain=k.value,e}}),r=await Promise.all(i);c.value=r,c.value.length>0&&f(()=>{const d=document.getElementById("warningShow");d&&(d.style.display="none")}),c.value.length===0&&f(()=>{const d=document.getElementById("warningShow");d&&(d.style.display="flex",d.textContent="You have not posted anything yet")})}catch{f(()=>{const i=document.getElementById("warningShow");i&&(i.style.display="flex",i.textContent="Something went wrong, check your internet connection and reload page.",l=setTimeout(()=>{i.style.display="none"},2e3))})}}function I(o){$.push(`/post/${o}`)}function R(o){if(o===w.signedUser.id)return $.push("/userProfile");$.push(`/chatterUser/${o}`)}function K(o){$.push(`/write/${o}`)}async function H(o){try{const h=W(j(y,"posts"),Y("postId","==",o));(await z(h)).forEach(d=>{const e=d.data(),n=_e(y,"posts",e.postId);Te(n)});const r=`ChatterAppFiles/posts/${o}`;N(r)}catch{f(()=>{const i=document.getElementById("warningShow");i&&(i.style.display="flex",i.textContent="Something went wrong, check your internet connection and try again later.",l=setTimeout(()=>{i.style.display="none"},2e3))});return}}async function N(o){const h=Pe(_,o),r=(await $e(h)).items.map(d=>Ie(d));await Promise.all(r)}return(o,h)=>{var i;return((i=c.value)==null?void 0:i.length)>0?(p(),S("div",qe,[(p(!0),S(O,null,te(c.value,(r,d)=>(p(),S("div",{key:d,class:"result-item"},[t("div",{class:"imgCon",onClick:P(e=>R(r.posterId),["prevent"]),style:ue({backgroundImage:`url(${M(w).signedUser.profilePicture})`})},null,12,Ue),t("div",Me,[t("div",Re,[t("span",{onClick:P(e=>R(r.posterId),["prevent"])},U(M(w).signedUser.blogName),9,He),t("span",null,U(se(r.postTime.seconds)),1)]),t("div",{innerHTML:r.postContain,id:"divContent",onClick:P(e=>I(r.postId),["prevent"])},null,8,Ne),t("div",Oe,[t("button",{onClick:P(e=>K(r.postId),["prevent"])},"Edit",8,Ve),t("button",{onClick:P(e=>H(r.postId),["prevent"])},"Delete",8,We)])])]))),128))])):ge("",!0)}}});const je=G(Ye,[["__scopeId","data-v-a3fd04cd"]]),ze={class:"btns"},Xe={key:0,class:q({resultsContainer:!0})},Qe=["onClick"],Ge={class:"result-item-other"},Je={class:"result-item-header"},Ke=["onClick"],Ze=["innerHTML","onClick"],et={key:1,class:q({resultsContainer:!0})},tt=["src","alt","onClick"],nt={class:"result-item-other"},ot={class:"result-item-header"},st=["onClick"],at=["innerHTML","onClick"],it={class:"noFollower"},rt=Q({__name:"ReaderFeedPage",setup(b){le(()=>{const e=document.getElementById("warningShow");e&&(e.style.display="none")});const l=v(""),c=new DOMParser;Fe();const{app:k}=re(),g=X(),$=fe(k),F=ce(),_=v(!0),y=v("interested_section"),w=v([]),L=v([]),E=v(),I=v([]),R=v(0),K=v(0);de(()=>{f(()=>{const e=document.getElementById("warningShow");e&&(e.style.display="flex",e.textContent="Loading ...")}),g.signedUser.interests.forEach(e=>{const n=e.trim();w.value.push(n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())});try{r(w.value)}catch{f(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Something went wrong, check your internet connection and reload page.")})}});function H(e){if(L.value=[],I.value=[],y.value=e,f(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Loading ...")}),e==="following_section")try{d()}catch{f(()=>{const s=document.getElementById("warningShow");s&&(s.style.display="flex",s.textContent="Something went wrong, check your internet connection and reload page.")})}if(e==="interested_section"){g.signedUser.interests.forEach(n=>{const s=n.trim();w.value.push(s.charAt(0).toUpperCase()+s.slice(1).toLowerCase())});try{r(w.value)}catch{f(()=>{const s=document.getElementById("warningShow");s&&(s.style.display="flex",s.textContent="Something went wrong, check your internet connection and reload page.")})}}}function N(e){F.push(`/post/${e}`)}function o(e){if(e===g.signedUser.id)return F.push("/userProfile");F.push(`/chatterUser/${e}`)}async function h(e){l.value="";const n=e.postContain;await ye.post("/postContent",{contentUrl:n}).then(s=>{const C=c.parseFromString(s.data,"text/html");l.value=C.body.innerHTML}).catch(s=>{console.log(s)})}async function i(e){E.value=null;const n=_e($,"users",e),s=await Le(n);if(s.data()!==void 0){const{fullName:C,profilePicture:a,username:u,blogName:m}=s.data(),B={profilePicture:a,posterID:e,fullName:C,username:u,blogName:m};E.value={id:e,img:B.profilePicture,fullName:B.fullName,username:B.username,blogname:B.blogName}}}async function r(e){const n=e.length<10?e.length:10,s=Math.floor(10/n);L.value=[];const C=e.map(async m=>{const B=W(j($,"posts"),Y("postTag","==",m),ae("postTime","desc"),oe(s)),Z=await z(B);return Promise.all(Z.docs.map(async T=>{var A;const x=T.data();if(x!=null&&x.length!==0){await h(x);const D=c.parseFromString(l.value,"text/html");return D.body.querySelectorAll("img").forEach(ee=>{ee.remove()}),D.body.querySelectorAll("video").forEach(ee=>{ee.remove()}),(A=D.body.querySelector("h1"))==null||A.remove(),l.value=D.body.innerHTML,x.postContain=l.value,await i(x.posterId),x.posterDetails=E.value,E.value=null,_.value=!1,x}}))}),u=(await Promise.all(C)).flat();L.value=u,L.value.length>0&&f(()=>{const m=document.getElementById("warningShow");m&&(m.style.display="none")}),L.value.length===10&&(K.value=10)}async function d(){const e=g.signedUser.following.theFollowings.length<10?g.signedUser.following.theFollowings.length:10,n=Math.floor(10/e);I.value=[];const s=g.signedUser.following.theFollowings.map(async u=>{const m=W(j($,"posts"),Y("posterId","==",u),ae("postTime","desc"),oe(n)),B=await z(m);return Promise.all(B.docs.map(async Z=>{var x;const T=Z.data();if(T!=null&&T.length!==0){await h(T);const A=c.parseFromString(l.value,"text/html");return A.body.querySelectorAll("img").forEach(D=>{D.remove()}),A.body.querySelectorAll("video").forEach(D=>{D.remove()}),(x=A.body.querySelector("h1"))==null||x.remove(),l.value=A.body.innerHTML,T.postContain=l.value,await i(T.posterId),T.posterDetails=E.value,E.value=null,_.value=!1,T}}))}),a=(await Promise.all(s)).flat();I.value=a,I.value.length===10&&(R.value=10),I.value.length>0?f(()=>{const u=document.getElementById("warningShow");u&&(u.style.display="none")}):I.value.length===0&&f(()=>{const u=document.getElementById("warningShow");u&&(u.style.display="flex",u.textContent="No post to show from your followings.")})}return(e,n)=>{var s,C;return p(),S(O,null,[t("div",ze,[t("button",{type:"button",onClick:n[0]||(n[0]=a=>H("interested_section")),class:q({active:y.value==="interested_section"})},"Interested",2),t("button",{type:"button",onClick:n[1]||(n[1]=a=>H("following_section")),class:q({active:y.value==="following_section"})},"Followings",2)]),((s=L.value)==null?void 0:s.length)>0&&y.value==="interested_section"?(p(),S("div",Xe,[(p(!0),S(O,null,te(L.value,(a,u)=>(p(),S("div",{key:u,class:"result-item"},[t("div",{class:"imgCon",onClick:P(m=>o(a.posterId),["prevent"]),style:ue({backgroundImage:`url(${a==null?void 0:a.posterDetails.img})`})},null,12,Qe),t("div",Ge,[t("div",Je,[t("span",{onClick:P(m=>o(a.posterId),["prevent"])},U(a==null?void 0:a.posterDetails.blogname),9,Ke),t("span",null,U(se(a.postTime.seconds)),1)]),t("div",{innerHTML:a.postContain,id:"divContent",onClick:P(m=>N(a.postId),["prevent"])},null,8,Ze),V(ie,{post:a},null,8,["post"])])]))),128))])):((C=I.value)==null?void 0:C.length)>0&&y.value==="following_section"?(p(),S("div",et,[(p(!0),S(O,null,te(I.value,(a,u)=>(p(),S("div",{key:u,class:"result-item"},[t("img",{src:a.posterDetails.img,alt:a.posterDetails.username+"profile picture",class:"result-item-image",onClick:P(m=>o(a.posterId),["prevent"])},null,8,tt),t("div",nt,[t("div",ot,[t("span",{onClick:P(m=>o(a.posterId),["prevent"])},U(a.posterDetails.blogname),9,st),t("span",null,U(se(a.postTime.seconds)),1)]),t("div",{innerHTML:a.postContain,id:"divContent",onClick:P(m=>N(a.postId),["prevent"])},null,8,at),V(ie,{post:a},null,8,["post"])])]))),128))])):ge("",!0),Se(t("div",it," You are not following any one yet. ",512),[[be,M(g).signedUser.following.theFollowings.length===0&&y.value==="following_section"]])],64)}}});const lt=G(rt,[["__scopeId","data-v-f6c56bcf"]]),we=b=>(me("data-v-cc5668cb"),b=b(),ve(),b),ct={class:"feedDiv"},dt=we(()=>t("div",{class:"lineContainer"},[t("div",{class:q({line:!0})}),t("div",{class:q({line:!0})})],-1)),ut=we(()=>t("div",{id:"warningShow"},null,-1)),gt=Q({__name:"FeedPage",setup(b){const l=X(),c=v(!1);let k=v(0),g=v(0);function $(_){c.value=!0,k.value=_.offsetX,g.value=_.offsetY}function F(_){if(c.value){const y=_.clientX-k.value,w=_.clientY-g.value;_.target.style.left=`${y}px`,_.target.style.top=`${w}px`,c.value=!1}}return(_,y)=>{const w=he("RouterLink");return p(),S("div",ct,[M(l).asReader?(p(),ne(lt,{key:0})):(p(),ne(je,{key:1})),V(w,{to:"/write",draggable:"true",onDragstart:$,onDragend:F},{default:pe(()=>[dt]),_:1}),ut])}}});const ht=G(gt,[["__scopeId","data-v-cc5668cb"]]),J=b=>(me("data-v-1ce02324"),b=b(),ve(),b),pt={key:1,id:"landingPagecontainer"},mt={id:"section1"},vt=J(()=>t("section",{id:"img"},null,-1)),ft={id:"text"},_t=J(()=>t("h2",null,"Welcome to Chatter: A Haven for Text-Based Content",-1)),yt=J(()=>t("p",null,"Unleash the power of Words, Connect with Like-minded Readers.",-1)),wt=J(()=>t("button",null,"Get Started",-1)),Ct=ke('<section id="section2" data-v-1ce02324><h2 data-v-1ce02324>About Chatter</h2><p data-v-1ce02324>Chatter is a multi-functional platform where authors and readers can have access to their own content. It aims to be a traditional bookworm&#39;s heaven and a blog to get access to more text based content. Our vision is to foster an inclusive and vibrant community where diversity is celebrated. We encourage open-mindedness and respect for all individuals, regardless of their backgrounds or beliefs. By promoting dialogue and understanding, we strive.</p></section><section id="section3" data-v-1ce02324><h2 data-v-1ce02324>Why you should join chatter</h2><p data-v-1ce02324>Our goal is to make writers and readers see our platform as their next heaven for blogging, ensuring ease in interactions, connecting with like-minded peers, have access to favorite content based on interests and able to communicate your great ideas with people. </p><section id="section3Parts" data-v-1ce02324><section data-v-1ce02324><img src="'+Ee+'" data-v-1ce02324><h3 data-v-1ce02324>Analaytics</h3><p data-v-1ce02324>Analytics to track the number of views, likes and comment and also analyse the performance of your articles over a poeriod of time</p></section><section data-v-1ce02324><img src="'+Be+'" alt="analysis" data-v-1ce02324><h3 data-v-1ce02324>Social interactions</h3><p data-v-1ce02324>Users on the platform can interact with posts they like, comment and engage in dicussions</p></section><section data-v-1ce02324><img src="'+De+'" data-v-1ce02324><h3 data-v-1ce02324>Content creation</h3><p data-v-1ce02324>Write nice and appealing with our in-built markdown, a rich text editor</p></section></section></section><section id="section4" data-v-1ce02324><img src="'+Ae+'" alt="Adebola Muhydeen" data-v-1ce02324><section data-v-1ce02324><blockquote data-v-1ce02324><q data-v-1ce02324>Chatter has become an integral part of my online experience. As a user of this incredible blogging platform, I have discovered a vibrant community of individuals who are passionate about sharing their ideas and engaging in thoughtful dicussions.</q></blockquote><strong data-v-1ce02324>Adebola Muhydeen,</strong> <em data-v-1ce02324>Software developer at Apple</em></section></section>',3),St=Q({__name:"LandingPage",setup(b){const l=X();return(c,k)=>{const g=he("RouterLink");return M(l).signedUser.isLogined?(p(),ne(ht,{key:0})):(p(),S("section",pt,[t("section",mt,[vt,t("section",ft,[_t,yt,V(g,{to:"/login"},{default:pe(()=>[wt]),_:1})])]),Ct]))}}});const Et=G(St,[["__scopeId","data-v-1ce02324"]]);export{Et as default};
