import{d as J,u as K,r as L,a as Q,b as U,c,e as W,f as u,g as e,w,j as o,n as X,t as n,h,i as f,z as y,l as a,k,F as Y,y as Z}from"./index-6f23e352.js";import{u as $,a as E}from"./useAuth.vue_vue_type_script_lang-d76c59a2.js";import{_ as ee}from"./useLoadingPage.vue_vue_type_style_index_0_lang-fc5c11fa.js";import{P as x,R as F,b as q,_ as M,d as R}from"./index.esm2017-a297fada.js";import{u as te}from"./useUserDetails.vue_vue_type_script_lang-a91e426b.js";import{c as oe}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as se}from"./useDetailButtons-3d6ae16e.js";import{a as ne}from"./axios-4a70c6fc.js";const{app:ie}=$(),le=E(),ae=x(ie);async function re(P){const v=F(M(ae,"users"),q("id","==",`${P}`));try{await R(v).then(r=>{le.viwedProfile=r.docs[0].data()})}catch(r){console.log(r)}}const ce={key:1},de=["onClick"],ue=["title"],pe={id:"themeImgContainer"},_e=["src"],he={class:"body"},me={class:"imageCon"},fe={class:"sectionFoImage"},ve={class:"follow"},ge=e("p",null,"||",-1),we={class:"readerSec"},ye={class:"btnSection"},Pe=e("span",null,"Full Name:",-1),be=e("span",null,"User Name:",-1),Ce=e("span",null,"Blog Name:",-1),ke={key:0},Se=e("span",null,"Biography:",-1),Te={key:1},Be=e("span",null,"Email:",-1),De=e("span",null,"Location:",-1),Ie=e("span",null,"Birthday:",-1),Ne=e("span",null,"Gender:",-1),Le={key:2},Ue=e("span",null,"Interests:",-1),$e={key:0},Ee={key:1},xe={class:"type"},Fe={class:"result-item"},qe=["src","alt","onClick"],Me={class:"result-item-other"},Re={class:"result-item-header"},He=["onClick"],Ae=["innerHTML","onClick"],Ve={id:"navigators"},ze=e("button",null,"Home",-1),je=e("button",null,"Search",-1),Oe=e("button",{id:"notification-button"},"Notifications",-1),et=J({__name:"ChatterUserPage",props:["userId"],setup(P){const v=P;te();const r=K(),{app:H}=$(),A=x(H),S=new DOMParser,t=E(),m=L("");async function V(s){m.value="";const i=s.postContain;await ne.post("/postContent",{contentUrl:i}).then(d=>{const p=S.parseFromString(d.data,"text/html");m.value=p.body.innerHTML}).catch(d=>{console.log(d)})}async function z(s,i,d){const p=F(M(A,"posts"),q("postId","==",d));(await R(p)).forEach(b=>{const _=b.data();V(_).then(()=>{var I,N;(I=document.getElementById("searchBtn"))==null||I.removeAttribute("disabled");const g=S.parseFromString(m.value,"text/html");g.body.querySelectorAll("img").forEach(C=>{C.remove()}),g.body.querySelectorAll("video").forEach(C=>{C.remove()}),(N=g.body.querySelector("h1"))==null||N.remove(),m.value=g.body.innerHTML,_.postContain=m.value,t.viwedProfile.interactions.splice(s,1,{postDetails:_,type:i})})})}re(v.userId).then(()=>{t.viwedProfile.interactions.length>0&&t.viwedProfile.interactions.forEach((s,i)=>{z(i,s.type,s.details.postid)})}).finally(()=>{D.value=!1});function j(){r.go(-1)}function O(s){r.push(`/post/${s}`)}function T(s){if(s===t.signedUser.id)return r.push("/userProfile");r.push(`/chatterUser/${s}`)}function B(s){t.section=s}const D=L(!0);let G=setTimeout(()=>{v.userId===t.signedUser.id&&(r.push("/userProfile"),console.log(t.viwedProfile))},5e3);return Q(()=>{clearTimeout(G);const s=document.getElementById("warningShow");s.style.display="none"}),(s,i)=>{const d=U("P"),p=U("RouterLink");return D.value?(c(),W(ee,{key:0,"action-name":"Loading profile..."})):(c(),u("main",ce,[e("header",null,[e("button",{onClick:w(j,["prevent"])},"Back",8,de),e("button",{title:o(t).themeDetails.title,id:"themeBtn",onClick:i[0]||(i[0]=(...l)=>o(t).changeTheme&&o(t).changeTheme(...l))},[e("div",pe,[e("img",{src:o(t).themeDetails.img},null,8,_e)])],8,ue)]),e("div",he,[e("div",me,[e("div",{class:"imgCon",style:X({backgroundImage:`url(${o(t).viwedProfile.profilePicture})`})},null,4)]),e("section",fe,[e("h3",null,n(o(t).viwedProfile.fullName),1),e("div",ve,[h(d,null,{default:f(()=>[a(n(o(t).viwedProfile.followers.total)+" Followers",1)]),_:1}),ge,h(d,null,{default:f(()=>[a(n(o(t).viwedProfile.following.total)+" Following",1)]),_:1})])]),e("div",we,[e("div",ye,[e("button",{onClick:i[1]||(i[1]=l=>B("personal")),class:y({active:o(t).section==="personal"})},"Personal",2),e("button",{onClick:i[2]||(i[2]=l=>B("interaction")),class:y({active:o(t).section==="interaction"})},"Interactions",2)]),e("div",{class:y({show:o(t).section==="personal",none:o(t).section!=="personal",personal:!0})},[e("p",null,[Pe,a(" "+n(o(t).viwedProfile.fullName),1)]),e("p",null,[be,a(" "+n(o(t).viwedProfile.username),1)]),e("p",null,[Ce,a(" "+n(o(t).viwedProfile.blogName),1)]),o(t).viwedProfile.bio.length>0?(c(),u("p",ke,[Se,a(" "+n(o(t).viwedProfile.bio),1)])):k("",!0),o(t).viwedProfile.settings.privacySettings.showEmail?(c(),u("p",Te,[Be,a(" "+n(o(t).viwedProfile.email),1)])):k("",!0),e("p",null,[De,a(" "+n(o(t).viwedProfile.location),1)]),e("p",null,[Ie,a(" "+n(o(t).viwedProfile.dateOfBirth),1)]),e("p",null,[Ne,a(" "+n(o(t).viwedProfile.gender),1)]),o(t).viwedProfile.interests.length>0?(c(),u("p",Le,[Ue,a(" "+n(o(t).viwedProfile.interests.join(",")),1)])):k("",!0)],2),e("div",{class:y({show:o(t).section==="interaction",none:o(t).section!=="interaction",interaction:!0})},[o(t).viwedProfile.interactions.length===0?(c(),u("p",$e,"No interactions yet.")):(c(),u("div",Ee,[(c(!0),u(Y,null,Z(o(t).viwedProfile.interactions,(l,b)=>(c(),u("div",{key:b},[e("div",xe,n(l.type),1),e("div",Fe,[e("img",{src:o(t).viwedProfile.profilePicture,alt:o(t).viwedProfile.username+"profile picture",class:"result-item-image",onClick:w(_=>T(l.postDetails.posterId),["prevent"])},null,8,qe),e("div",Me,[e("div",Re,[e("span",{onClick:w(_=>T(l.postDetails.posterId),["prevent"])},n(o(t).viwedProfile.blogName),9,He),e("span",null,n(oe(l.postDetails.postTime.seconds)),1)]),e("div",{innerHTML:l.postDetails.postContain,id:"divContent",onClick:w(_=>O(l.postDetails.postId),["prevent"])},null,8,Ae),h(se,{post:l.postDetails},null,8,["post"])])])]))),128))]))],2)])]),e("section",Ve,[h(p,{to:"/home"},{default:f(()=>[ze]),_:1}),h(p,{to:"/search"},{default:f(()=>[je]),_:1}),h(p,{to:"/notification"},{default:f(()=>[Oe]),_:1})])]))}}});export{et as default};
