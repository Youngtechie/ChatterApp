import{d as te,r as k,u as oe,o as ne,y as D,a as se,b as ie,c as u,e as le,f as p,g as e,w,j as n,k as ae,t as l,l as P,m as h,n as I,F as re,z as ce,h as V,i as M,A as de,q as ue,s as pe}from"./index-4deccaec.js";import{u as A,a as H}from"./useAuth.vue_vue_type_script_lang-7f3dced0.js";import{_ as he}from"./useLoadingPage.vue_vue_type_style_index_0_lang-a1ca09d8.js";import{P as $,R as q,b as z,_ as G,d as j,I as me,g as R,k as ve,c as fe}from"./index.esm2017-190d47df.js";import{u as ge}from"./useUserDetails.vue_vue_type_script_lang-91448774.js";import{c as we}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as _e,a as ye,b as Ce}from"./useCheckFollow.vue_vue_type_script_lang-f828e3e6.js";import{u as ke}from"./useDetailButtons-120b6adc.js";import{a as Pe}from"./axios-4a70c6fc.js";import{_ as Se}from"./_plugin-vue_export-helper-c27b6911.js";const{app:Ie}=A(),be=H(),xe=$(Ie);async function Be(m){const v=q(G(xe,"users"),z("id","==",`${m}`));await j(v).then(c=>{c.docs[0].data().length!==0&&(be.viwedProfile=c.docs[0].data())})}const r=m=>(ue("data-v-1d23e0f7"),m=m(),pe(),m),Ne={key:1},De=["onClick"],Ve=["title"],Ee={id:"themeImgContainer"},Le=["src"],Te={class:"body"},Ue={class:"imageCon"},Fe={class:"sectionFoImage"},Me={key:0},Re={class:"follow"},Ae=r(()=>e("p",null,"||",-1)),He={class:"btns"},$e=["onClick"],qe=de('<svg width="24px" height="24px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" fill="#000000" data-v-1d23e0f7><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-1d23e0f7></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-1d23e0f7></g><g id="SVGRepo_iconCarrier" data-v-1d23e0f7><path d="M216,16A112.127,112.127,0,0,0,104,128v79.68a80.239,80.239,0,0,0,9.768,38.308l27.455,50.334L68.4,343.656A79.727,79.727,0,0,0,32,410.732V496H312V464H64V410.732a47.838,47.838,0,0,1,21.84-40.246L183.5,307.007l-41.64-76.341A48.149,48.149,0,0,1,136,207.68V128a80,80,0,0,1,160,0v79.68a48.143,48.143,0,0,1-5.861,22.985L248.5,307.007,312,348.283V310.117l-21.223-13.8,27.454-50.334A80.226,80.226,0,0,0,328,207.68V128A112.127,112.127,0,0,0,216,16Z" class="ci-primary" data-v-1d23e0f7></path><polygon points="483.314 355.314 460.686 332.686 412 381.372 363.314 332.686 340.686 355.314 389.372 404 340.686 452.686 363.314 475.314 412 426.628 460.686 475.314 483.314 452.686 434.628 404 483.314 355.314" class="ci-primary" data-v-1d23e0f7></polygon></g></svg>',1),ze=["onClick"],Ge=r(()=>e("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",height:"24px",viewBox:"0 0 1000 1000","enable-background":"new 0 0 1000 1000","xml:space":"preserve"},[e("metadata",null," Svg Vector Icons : http://www.onlinewebfonts.com/icon "),e("g",null,[e("path",{d:"M667.5,650c4.7,3.4,10.4,5.5,16.7,5.5c15.7,0,28.4-12.7,28.4-28.4c0-9.9-5-18.5-12.7-23.6l0,0c-33.9-23-71.2-41.3-111-54c91.6-47.6,154.3-143.3,154.3-253.7C743.2,138,615.3,10,457.4,10c-157.9,0-285.8,128-285.8,285.8c0,110.4,62.6,206.1,154.2,253.7c-174,55.5-300.2,217.9-301.3,410c0,0.2,0.1,2.5,0.1,2.5c1,14.8,13.2,26.6,28.2,26.6c15.1,0,27.5-11.8,28.5-26.6c0-207.6,168.3-376,376-376c77.8,0,150.1,23.6,210,64.1L667.5,650z M228.7,295.8c0-126.3,102.4-228.7,228.7-228.7c126.3,0,228.7,102.4,228.7,228.7c0,126.3-102.4,228.7-228.7,228.7C331.1,524.5,228.7,422.1,228.7,295.8z"}),e("path",{d:"M947.9,786.1H827.4V666.6c0-15.2-12.3-27.6-27.6-27.6s-27.6,12.3-27.6,27.6v119.5H652c-15.2,0-27.6,12.3-27.6,27.6c0,15.2,12.3,27.6,27.6,27.6h120.3v121.2c0,15.2,12.3,27.6,27.6,27.6s27.6-12.3,27.6-27.6V841.2h120.5c15.2,0,27.6-12.3,27.6-27.6C975.4,798.4,963.1,786.1,947.9,786.1z"})])],-1)),je={class:"readerSec"},Oe={class:"btnSection"},Qe={class:"personalDetails"},Ze=r(()=>e("span",null,"Full Name:",-1)),Je=r(()=>e("span",null,"User Name:",-1)),Ke=r(()=>e("span",null,"Blog Name:",-1)),We={key:0},Xe=r(()=>e("span",null,"Email:",-1)),Ye=r(()=>e("span",null,"Location:",-1)),et=r(()=>e("span",null,"Birthday:",-1)),tt=r(()=>e("span",null,"Gender:",-1)),ot={key:1},nt=r(()=>e("span",null,"Interests:",-1)),st=r(()=>e("div",{id:"warningShowint"},null,-1)),it={key:0},lt={class:"type"},at={class:"result-item"},rt=["src","alt","onClick"],ct={class:"result-item-other"},dt={class:"result-item-header"},ut=["onClick"],pt=["innerHTML","onClick"],ht={id:"navigators"},mt=r(()=>e("button",null,"Home",-1)),vt=r(()=>e("button",null,"Search",-1)),ft=r(()=>e("div",{id:"warningShow"},null,-1)),gt=te({__name:"ChatterUserPage",props:["userId"],setup(m){const v=m,c=k(!1),_=oe(),{app:O}=A(),b=$(O),E=new DOMParser,x=k(),t=H(),y=k(""),f=k([]);ne(()=>{ge(),Be(v.userId),D(()=>{const o=document.getElementById("warningShow");o&&(o.style.display="none")}),t.section="personal"});async function Q(o){y.value="";const i=o.postContain;await Pe.post("/postContent",{contentUrl:i}).then(a=>{const s=E.parseFromString(a.data,"text/html");y.value=s.body.innerHTML})}async function Z(o){x.value=null;const i=R(b,"users",o),a=await fe(i);if(a.data()!==void 0){const{fullName:s,profilePicture:C,username:g,blogName:B}=a.data(),d={profilePicture:C,posterID:o,fullName:s,username:g,blogName:B};x.value={id:o,img:d.profilePicture,fullName:d.fullName,username:d.username,blogname:d.blogName}}}async function J(o){if(o.length>0)try{const i=o.map(async s=>{const C=q(G(b,"posts"),z("postId","==",s.details.postid),ve(10)),g=await j(C);return Promise.all(g.docs.map(async B=>{var F;const d=B.data();if(d!=null&&d.length!==0){await Q(d);const S=E.parseFromString(y.value,"text/html");return S.body.querySelectorAll("img").forEach(N=>{N.remove()}),S.body.querySelectorAll("video").forEach(N=>{N.remove()}),(F=S.body.querySelector("h1"))==null||F.remove(),y.value=S.body.innerHTML,d.postContain=y.value,await Z(d.posterId).then(()=>{d.posterDetails=x.value}),{type:s.type,postDetails:d}}}))}),a=await Promise.all(i);if(f.value=a.flat(),f.value.length===0){const s=document.getElementById("warningShowint");s.style.display="flex",s.textContent="No interactions yet"}else if(f.value.length>0){const s=document.getElementById("warningShowint");s.style.display="none"}}catch{const a=document.getElementById("warningShowint");a.style.display="flex",a.textContent="Check your network connection and try again"}else{const i=document.getElementById("warningShowint");i.style.display="flex",i.textContent="No interactions yet"}}function K(){_.go(-1)}function W(o){_.push(`/post/${o}`)}function L(o){if(o===t.viwedProfile.id)return _.push("/userProfile");_.push(`/chatterUser/${o}`)}function T(o){t.section=o,f.value=[],o==="interaction"&&D(()=>{const i=document.getElementById("warningShowint");i.style.display="flex",i.textContent="Loading ...",J(t.viwedProfile.interactions)})}const U=k(!0);let X=setTimeout(()=>{v.userId===t.signedUser.id?_.push("/userProfile"):t.viwedProfile.username===void 0&&t.viwedProfile.id===void 0?D(()=>{const o=document.getElementById("warningShow");o&&(o.style.display="flex",o.textContent="Check your network connection and try again")}):(_e(v.userId,t.signedUser.id).then(o=>{c.value=o}),me(R(b,"users",v.userId),o=>{const i=o.data();if(i!==void 0){const{followers:a,following:s}=i;t.signedUser.followers.total=a.total,t.signedUser.following.total=s.total}}),U.value=!1)},5e3);async function Y(){try{ye(v.userId,t.viwedProfile.blogName),c.value=!c.value}catch{c.value=!c.value}}async function ee(){try{Ce(t.viwedProfile.id),c.value=!c.value}catch{c.value=!c.value}}return se(()=>{clearTimeout(X);const o=document.getElementById("warningShow");o&&(o.style.display="none");const i=document.getElementById("warningShowint");i&&(i.style.display="none")}),(o,i)=>{const a=ie("RouterLink");return U.value?(u(),le(he,{key:0,"action-name":"Loading profile..."})):(u(),p("main",Ne,[e("header",null,[e("button",{onClick:w(K,["prevent"])},"Back",8,De),e("button",{title:n(t).themeDetails.title,id:"themeBtn",onClick:i[0]||(i[0]=(...s)=>n(t).changeTheme&&n(t).changeTheme(...s))},[e("div",Ee,[e("img",{src:n(t).themeDetails.img},null,8,Le)])],8,Ve)]),e("div",Te,[e("div",Ue,[e("div",{class:"imgCon",style:ae({backgroundImage:`url(${n(t).viwedProfile.profilePicture})`})},null,4)]),e("section",Fe,[e("h3",null,l(n(t).viwedProfile.fullName),1),n(t).viwedProfile.bio.length>0?(u(),p("p",Me,l(n(t).viwedProfile.bio),1)):P("",!0),e("div",Re,[e("p",null,l(n(t).viwedProfile.followers.total)+" Followers",1),Ae,e("p",null,l(n(t).viwedProfile.following.total)+" Following",1)])]),e("div",He,[c.value?(u(),p("button",{key:0,onClick:w(Y,["prevent"])},[qe,h(" Unfollow")],8,$e)):(u(),p("button",{key:1,onClick:w(ee,["prevent"])},[Ge,h("Follow")],8,ze))]),e("div",je,[e("div",Oe,[e("button",{onClick:i[1]||(i[1]=s=>T("personal")),class:I({active:n(t).section==="personal"})},"Personal",2),e("button",{onClick:i[2]||(i[2]=s=>T("interaction")),class:I({active:n(t).section==="interaction"})},"Interactions",2)]),e("div",{class:I({show:n(t).section==="personal",none:n(t).section!=="personal",personal:!0})},[e("div",Qe,[e("p",null,[Ze,h(" "+l(n(t).viwedProfile.fullName),1)]),e("p",null,[Je,h(" "+l(n(t).viwedProfile.username),1)]),e("p",null,[Ke,h(" "+l(n(t).viwedProfile.blogName),1)]),n(t).viwedProfile.settings.privacySettings.showEmail?(u(),p("p",We,[Xe,h(" "+l(n(t).viwedProfile.email),1)])):P("",!0),e("p",null,[Ye,h(" "+l(n(t).viwedProfile.location),1)]),e("p",null,[et,h(" "+l(n(t).viwedProfile.dateOfBirth),1)]),e("p",null,[tt,h(" "+l(n(t).viwedProfile.gender),1)]),n(t).viwedProfile.interests.length>0?(u(),p("p",ot,[nt,h(" "+l(n(t).viwedProfile.interests.join(",")),1)])):P("",!0)])],2),n(t).section==="interaction"?(u(),p("div",{key:0,class:I({show:n(t).section==="interaction",none:n(t).section!=="interaction",interaction:!0})},[st,f.value.length>0?(u(),p("div",it,[(u(!0),p(re,null,ce(f.value,(s,C)=>(u(),p("div",{key:C,class:"resultContainer"},[e("div",lt,l(s.type),1),e("div",at,[e("img",{src:s.postDetails.posterDetails.img,alt:s.postDetails.posterDetails.username+"profile picture",class:"result-item-image",onClick:w(g=>L(s.postDetails.posterId),["prevent"])},null,8,rt),e("div",ct,[e("div",dt,[e("span",{onClick:w(g=>L(s.postDetails.posterId),["prevent"])},l(n(t).viwedProfile.blogName),9,ut),e("span",null,l(we(s.postDetails.postTime.seconds)),1)]),e("div",{innerHTML:s.postDetails.postContain,id:"divContent",onClick:w(g=>W(s.postDetails.postId),["prevent"])},null,8,pt),V(ke,{post:s.postDetails},null,8,["post"])])])]))),128))])):P("",!0)],2)):P("",!0)]),e("section",ht,[V(a,{to:"/home"},{default:M(()=>[mt]),_:1}),V(a,{to:"/search"},{default:M(()=>[vt]),_:1})])]),ft]))}}});const Nt=Se(gt,[["__scopeId","data-v-1d23e0f7"]]);export{Nt as default};
