import{d as te,r as k,u as oe,o as ne,y as D,a as se,b as ie,c as u,e as ae,f as p,g as e,w as f,j as n,k as le,t as a,l as b,m as h,n as S,F as re,z as ce,h as V,i as M,B as de,q as ue,s as pe}from"./index-d9c4c67e.js";import{u as H,a as $}from"./useAuth.vue_vue_type_script_lang-77171506.js";import{_ as he}from"./useLoadingPage.vue_vue_type_style_index_0_lang-1cc37a5c.js";import{P as A,R as q,b as z,_ as G,d as j,I as me,g as R,k as ve,c as ge}from"./index.esm2017-7370a789.js";import{u as we}from"./useUserDetails.vue_vue_type_script_lang-4fb6f021.js";import{c as fe}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as _e,a as ye,b as Ce}from"./useCheckFollow.vue_vue_type_script_lang-c4afa756.js";import{u as ke}from"./useDetailButtons-0e25b9a8.js";import{a as be}from"./index-72692797.js";import{_ as Pe}from"./_plugin-vue_export-helper-c27b6911.js";const{app:Se}=H(),Ie=$(),xe=A(Se);async function Be(m){const v=q(G(xe,"users"),z("id","==",`${m}`));await j(v).then(c=>{c.docs[0].data().length!==0&&(Ie.viwedProfile=c.docs[0].data())})}const r=m=>(ue("data-v-7a82b676"),m=m(),pe(),m),Ne={key:1},De=["onClick"],Ve=["title"],Ee={id:"themeImgContainer"},Le=["src"],Te={class:"body"},Ue={class:"imageCon"},Fe={class:"sectionFoImage"},Me={key:0},Re={class:"follow"},He=r(()=>e("p",null,"||",-1)),$e={class:"btns"},Ae=["onClick"],qe=de('<svg width="24px" height="24px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" fill="#000000" data-v-7a82b676><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-7a82b676></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-7a82b676></g><g id="SVGRepo_iconCarrier" data-v-7a82b676><path d="M216,16A112.127,112.127,0,0,0,104,128v79.68a80.239,80.239,0,0,0,9.768,38.308l27.455,50.334L68.4,343.656A79.727,79.727,0,0,0,32,410.732V496H312V464H64V410.732a47.838,47.838,0,0,1,21.84-40.246L183.5,307.007l-41.64-76.341A48.149,48.149,0,0,1,136,207.68V128a80,80,0,0,1,160,0v79.68a48.143,48.143,0,0,1-5.861,22.985L248.5,307.007,312,348.283V310.117l-21.223-13.8,27.454-50.334A80.226,80.226,0,0,0,328,207.68V128A112.127,112.127,0,0,0,216,16Z" class="ci-primary" data-v-7a82b676></path><polygon points="483.314 355.314 460.686 332.686 412 381.372 363.314 332.686 340.686 355.314 389.372 404 340.686 452.686 363.314 475.314 412 426.628 460.686 475.314 483.314 452.686 434.628 404 483.314 355.314" class="ci-primary" data-v-7a82b676></polygon></g></svg>',1),ze=["onClick"],Ge=r(()=>e("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",height:"24px",viewBox:"0 0 1000 1000","enable-background":"new 0 0 1000 1000","xml:space":"preserve"},[e("metadata",null," Svg Vector Icons : http://www.onlinewebfonts.com/icon "),e("g",null,[e("path",{d:"M667.5,650c4.7,3.4,10.4,5.5,16.7,5.5c15.7,0,28.4-12.7,28.4-28.4c0-9.9-5-18.5-12.7-23.6l0,0c-33.9-23-71.2-41.3-111-54c91.6-47.6,154.3-143.3,154.3-253.7C743.2,138,615.3,10,457.4,10c-157.9,0-285.8,128-285.8,285.8c0,110.4,62.6,206.1,154.2,253.7c-174,55.5-300.2,217.9-301.3,410c0,0.2,0.1,2.5,0.1,2.5c1,14.8,13.2,26.6,28.2,26.6c15.1,0,27.5-11.8,28.5-26.6c0-207.6,168.3-376,376-376c77.8,0,150.1,23.6,210,64.1L667.5,650z M228.7,295.8c0-126.3,102.4-228.7,228.7-228.7c126.3,0,228.7,102.4,228.7,228.7c0,126.3-102.4,228.7-228.7,228.7C331.1,524.5,228.7,422.1,228.7,295.8z"}),e("path",{d:"M947.9,786.1H827.4V666.6c0-15.2-12.3-27.6-27.6-27.6s-27.6,12.3-27.6,27.6v119.5H652c-15.2,0-27.6,12.3-27.6,27.6c0,15.2,12.3,27.6,27.6,27.6h120.3v121.2c0,15.2,12.3,27.6,27.6,27.6s27.6-12.3,27.6-27.6V841.2h120.5c15.2,0,27.6-12.3,27.6-27.6C975.4,798.4,963.1,786.1,947.9,786.1z"})])],-1)),je={class:"readerSec"},Oe={class:"btnSection"},Qe={class:"personalDetails"},Ze=r(()=>e("span",null,"Full Name:",-1)),Je=r(()=>e("span",null,"User Name:",-1)),Ke=r(()=>e("span",null,"Blog Name:",-1)),We={key:0},Xe=r(()=>e("span",null,"Email:",-1)),Ye=r(()=>e("span",null,"Location:",-1)),et=r(()=>e("span",null,"Birthday:",-1)),tt=r(()=>e("span",null,"Gender:",-1)),ot={key:1},nt=r(()=>e("span",null,"Interests:",-1)),st=r(()=>e("div",{id:"warningShowint"},null,-1)),it={key:0},at={class:"type"},lt={class:"result-item"},rt=["src","alt","onClick"],ct={class:"result-item-other"},dt={class:"result-item-header"},ut=["onClick"],pt=["innerHTML","onClick"],ht={id:"navigators"},mt=r(()=>e("button",null,"Home",-1)),vt=r(()=>e("button",null,"Search",-1)),gt=r(()=>e("div",{id:"warningShow"},null,-1)),wt=te({__name:"ChatterUserPage",props:["userId"],setup(m){const v=m,c=k(!1),_=oe(),{app:O}=H(),I=A(O),E=new DOMParser,x=k(),t=$(),y=k(""),g=k([]);ne(()=>{we(),Be(v.userId),D(()=>{const o=document.getElementById("warningShow");o&&(o.style.display="none")}),t.section="personal"});async function Q(o){y.value="";const i=o.postContain;await be.post("/.netlify/functions/postContent",{contentUrl:i}).then(l=>{const s=E.parseFromString(l.data.content,"text/html");y.value=s.body.innerHTML})}async function Z(o){x.value=null;const i=R(I,"users",o),l=await ge(i);if(l.data()!==void 0){const{fullName:s,profilePicture:C,username:w,blogName:B}=l.data(),d={profilePicture:C,posterID:o,fullName:s,username:w,blogName:B};x.value={id:o,img:d.profilePicture,fullName:d.fullName,username:d.username,blogname:d.blogName}}}async function J(o){if(o.length>0)try{const i=o.map(async s=>{const C=q(G(I,"posts"),z("postId","==",s.details.postid),ve(10)),w=await j(C);return Promise.all(w.docs.map(async B=>{var F;const d=B.data();if(d!=null&&d.length!==0){await Q(d);const P=E.parseFromString(y.value,"text/html");return P.body.querySelectorAll("img").forEach(N=>{N.remove()}),P.body.querySelectorAll("video").forEach(N=>{N.remove()}),(F=P.body.querySelector("h1"))==null||F.remove(),y.value=P.body.innerHTML,d.postContain=y.value,await Z(d.posterId).then(()=>{d.posterDetails=x.value}),{type:s.type,postDetails:d}}}))}),l=await Promise.all(i);if(g.value=l.flat(),g.value.length===0){const s=document.getElementById("warningShowint");s.style.display="flex",s.textContent="No interactions yet"}else if(g.value.length>0){const s=document.getElementById("warningShowint");s.style.display="none"}}catch{const l=document.getElementById("warningShowint");l.style.display="flex",l.textContent="Check your network connection and try again"}else{const i=document.getElementById("warningShowint");i.style.display="flex",i.textContent="No interactions yet"}}function K(){_.go(-1)}function W(o){_.push(`/post/${o}`)}function L(o){if(o===t.viwedProfile.id)return _.push("/userProfile");_.push(`/chatterUser/${o}`)}function T(o){t.section=o,g.value=[],o==="interaction"&&D(()=>{const i=document.getElementById("warningShowint");i.style.display="flex",i.textContent="Loading ...",J(t.viwedProfile.interactions)})}const U=k(!0);let X=setTimeout(()=>{v.userId===t.signedUser.id?_.push("/userProfile"):t.viwedProfile.username===void 0&&t.viwedProfile.id===void 0?D(()=>{const o=document.getElementById("warningShow");o&&(o.style.display="flex",o.textContent="Check your network connection and try again")}):(_e(v.userId,t.signedUser.id).then(o=>{c.value=o}),me(R(I,"users",v.userId),o=>{const i=o.data();if(i!==void 0){const{followers:l,following:s}=i;t.signedUser.followers.total=l.total,t.signedUser.following.total=s.total}}),U.value=!1)},5e3);async function Y(){try{ye(v.userId,t.viwedProfile.blogName),c.value=!c.value}catch{c.value=!c.value}}async function ee(){try{Ce(t.viwedProfile.id),c.value=!c.value}catch{c.value=!c.value}}return se(()=>{clearTimeout(X);const o=document.getElementById("warningShow");o&&(o.style.display="none");const i=document.getElementById("warningShowint");i&&(i.style.display="none")}),(o,i)=>{const l=ie("RouterLink");return U.value?(u(),ae(he,{key:0,"action-name":"Loading profile..."})):(u(),p("main",Ne,[e("header",null,[e("button",{onClick:f(K,["prevent"])},"Back",8,De),e("button",{title:n(t).themeDetails.title,id:"themeBtn",onClick:i[0]||(i[0]=(...s)=>n(t).changeTheme&&n(t).changeTheme(...s))},[e("div",Ee,[e("img",{src:n(t).themeDetails.img},null,8,Le)])],8,Ve)]),e("div",Te,[e("div",Ue,[e("div",{class:"imgCon",style:le({backgroundImage:`url(${n(t).viwedProfile.profilePicture})`})},null,4)]),e("section",Fe,[e("h3",null,a(n(t).viwedProfile.fullName),1),n(t).viwedProfile.bio.length>0?(u(),p("p",Me,a(n(t).viwedProfile.bio),1)):b("",!0),e("div",Re,[e("p",null,a(n(t).viwedProfile.followers.total)+" Followers",1),He,e("p",null,a(n(t).viwedProfile.following.total)+" Following",1)])]),e("div",$e,[c.value?(u(),p("button",{key:0,onClick:f(Y,["prevent"])},[qe,h(" Unfollow")],8,Ae)):(u(),p("button",{key:1,onClick:f(ee,["prevent"])},[Ge,h("Follow")],8,ze))]),e("div",je,[e("div",Oe,[e("button",{onClick:i[1]||(i[1]=s=>T("personal")),class:S({active:n(t).section==="personal"})},"Personal",2),e("button",{onClick:i[2]||(i[2]=s=>T("interaction")),class:S({active:n(t).section==="interaction"})},"Interactions",2)]),e("div",{class:S({show:n(t).section==="personal",none:n(t).section!=="personal",personal:!0})},[e("div",Qe,[e("p",null,[Ze,h(" "+a(n(t).viwedProfile.fullName),1)]),e("p",null,[Je,h(" "+a(n(t).viwedProfile.username),1)]),e("p",null,[Ke,h(" "+a(n(t).viwedProfile.blogName),1)]),n(t).viwedProfile.settings.privacySettings.showEmail?(u(),p("p",We,[Xe,h(" "+a(n(t).viwedProfile.email),1)])):b("",!0),e("p",null,[Ye,h(" "+a(n(t).viwedProfile.location),1)]),e("p",null,[et,h(" "+a(n(t).viwedProfile.dateOfBirth),1)]),e("p",null,[tt,h(" "+a(n(t).viwedProfile.gender),1)]),n(t).viwedProfile.interests.length>0?(u(),p("p",ot,[nt,h(" "+a(n(t).viwedProfile.interests.join(",")),1)])):b("",!0)])],2),n(t).section==="interaction"?(u(),p("div",{key:0,class:S({show:n(t).section==="interaction",none:n(t).section!=="interaction",interaction:!0})},[st,g.value.length>0?(u(),p("div",it,[(u(!0),p(re,null,ce(g.value,(s,C)=>(u(),p("div",{key:C,class:"resultContainer"},[e("div",at,a(s.type),1),e("div",lt,[e("img",{src:s.postDetails.posterDetails.img,alt:s.postDetails.posterDetails.username+"profile picture",class:"result-item-image",onClick:f(w=>L(s.postDetails.posterId),["prevent"])},null,8,rt),e("div",ct,[e("div",dt,[e("span",{onClick:f(w=>L(s.postDetails.posterId),["prevent"])},a(n(t).viwedProfile.blogName),9,ut),e("span",null,a(fe(s.postDetails.postTime.seconds)),1)]),e("div",{innerHTML:s.postDetails.postContain,id:"divContent",onClick:f(w=>W(s.postDetails.postId),["prevent"])},null,8,pt),V(ke,{post:s.postDetails},null,8,["post"])])])]))),128))])):b("",!0)],2)):b("",!0)]),e("section",ht,[V(l,{to:"/home"},{default:M(()=>[mt]),_:1}),V(l,{to:"/search"},{default:M(()=>[vt]),_:1})])]),gt]))}}});const Nt=Pe(wt,[["__scopeId","data-v-7a82b676"]]);export{Nt as default};
