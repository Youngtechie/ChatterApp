import{d as k,u as q,r as a,o as V,x as L,a as M,c as U,e as N,f as F,g as e,p as i,C as r,G as b,w,q as D,s as E,y as T}from"./index-d9c4c67e.js";import{P as H,a as P,g as x,y as O}from"./index.esm2017-7370a789.js";import{u as $,a as G}from"./useAuth.vue_vue_type_script_lang-77171506.js";import{u as R}from"./useUserDetails.vue_vue_type_script_lang-4fb6f021.js";import{_ as j}from"./useLoadingPage.vue_vue_type_style_index_0_lang-1cc37a5c.js";import{S as z}from"./useSignOut.vue_vue_type_script_lang-64088068.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";const n=u=>(D("data-v-cd622649"),u=u(),E(),u),K={key:1,id:"otherInfoCon"},Q=n(()=>e("div",{id:"warningShow"},null,-1)),W=["onSubmit"],X={class:"fullname"},Y=n(()=>e("label",{for:"fullname2"},"Full Name:",-1)),Z={class:"username"},ee=n(()=>e("label",{for:"username2"},"Username:",-1)),te={class:"gender"},oe=n(()=>e("h3",null,"Choose your gender",-1)),se={class:"radioGroup"},ne=n(()=>e("label",{for:"male2"},"Male",-1)),ae=n(()=>e("label",{for:"female2"},"Female",-1)),ie={class:"birthday"},le=n(()=>e("label",{for:"birthday2"},"Birthday:",-1)),de={class:"Location"},re=n(()=>e("label",{for:"country2"}," Country: ",-1)),ue={class:"interests"},ce={class:"section"},me=n(()=>e("label",{for:"interests"},"Interests:",-1)),pe=n(()=>e("span",{class:"example-note"},"Example: Food, Travel, Sport, Programming, Fashion, Meme",-1)),_e={class:"btns"},fe=n(()=>e("input",{type:"submit",value:"Submit",class:"submit-button"},null,-1)),he=["onClick"],ve=k({__name:"AddAdditionalInfo",setup(u){const{app:S,auth:C}=$(),c=q(),s=G(),g=H(S),m=a("");V(()=>{R()}),L(()=>{s.signedUser.fullName&&(m.value=s.signedUser.fullName)});const l=a(""),_=a(""),d=a(""),f=a(""),y=a(!0),h=a("");async function I(){s.signedUser.id!==void 0&&s.signedUser.id!==null&&s.signedUser.id!==""&&(await P(x(g,"users",`${s.signedUser.id}`),{blogName:l.value.charAt(0).toUpperCase()+l.value.slice(1).toLowerCase()+"Blog",username:l.value.charAt(0).toUpperCase()+l.value.slice(1).toLowerCase(),dateOfBirth:f.value,location:_.value,gender:d.value,isLogined:!0,interests:h.value.split(","),fullName:m.value}),c.push({name:"Home"}))}function A(){if(s.signedUser.id!==void 0&&s.signedUser.id!==""&&s.signedUser.id!==null)if(confirm("Are you sure you want to delete your account?"))T(()=>{const t=document.getElementById("warningShow");t&&(t.style.display="flex",t.textContent="Deleting your account...");let o=s.signedUser.id;const v=C.currentUser;v==null||v.delete().then(()=>{z(),s.signedUser={},O(x(g,"users",`${o}`)),s.authenticated=!1,c.push({name:"Home"})})});else return}let B=setTimeout(()=>{s.signedUser.username!==void 0?s.signedUser.username.trim()!==""?c.push({name:"Home"}):y.value=!1:c.push({name:"Home"})},5e3);return M(()=>{clearTimeout(B);const p=document.getElementById("warningShow");p&&(p.style.display="none")}),(p,t)=>y.value?(U(),N(j,{key:0,"action-name":"Loading..."},null,8,["action-name"])):(U(),F("div",K,[Q,e("form",{onSubmit:w(I,["prevent"]),class:"otherInfoForm"},[e("section",X,[Y,i(e("input",{type:"text",id:"fullname2",required:"",autocomplete:"additional-name","onUpdate:modelValue":t[0]||(t[0]=o=>m.value=o)},null,512),[[r,m.value]])]),e("section",Z,[ee,i(e("input",{type:"text",id:"username2",required:"",autocomplete:"username","onUpdate:modelValue":t[1]||(t[1]=o=>l.value=o),pattern:"[^\\d]+",maxlength:"15"},null,512),[[r,l.value]])]),e("section",te,[oe,e("div",se,[i(e("input",{type:"radio",value:"Male",name:"gender",id:"male2",required:"","onUpdate:modelValue":t[2]||(t[2]=o=>d.value=o)},null,512),[[b,d.value]]),ne,i(e("input",{type:"radio",value:"Female",name:"gender",id:"female2",required:"","onUpdate:modelValue":t[3]||(t[3]=o=>d.value=o)},null,512),[[b,d.value]]),ae])]),e("section",ie,[le,i(e("input",{type:"date",id:"birthday2",required:"","onUpdate:modelValue":t[4]||(t[4]=o=>f.value=o)},null,512),[[r,f.value]])]),e("section",de,[re,i(e("input",{type:"text",id:"country2",placeholder:"Country",required:"",autocomplete:"country-name","onUpdate:modelValue":t[5]||(t[5]=o=>_.value=o)},null,512),[[r,_.value]])]),e("div",ue,[e("div",ce,[me,i(e("input",{type:"text",id:"interests",placeholder:"Posts tags separate with a comma",required:"","onUpdate:modelValue":t[6]||(t[6]=o=>h.value=o)},null,512),[[r,h.value]])]),pe]),e("section",_e,[fe,e("button",{onClick:w(A,["prevent"]),class:"delete-button"},"Delete Account",8,he)])],40,W)]))}});const Ce=J(ve,[["__scopeId","data-v-cd622649"]]);export{Ce as default};
