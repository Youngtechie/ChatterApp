import{u as ce,a as K}from"./useAuth.vue_vue_type_script_lang-298818ca.js";import{d as X,a as le,r as C,u as de,q as we,s as B,o as ue,c as p,f as v,F as V,x as te,g as o,h as H,w as b,t as D,k as pe,y as R,_ as Y,i as W,b as me,e as oe,j as he,p as ge,n as ve,z as Ce}from"./index-f1eab0dd.js";import{g as ne,r as j,a as se,l as be,d as ke}from"./index.esm2017-9ddf60ae.js";import{P as _e,R as z,b as Q,_ as G,d as J,g as ye,y as Se,x as ie,c as Pe,k as $e}from"./index.esm2017-96b642a7.js";import{a as fe}from"./axios-4a70c6fc.js";import{c as ae}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{u as xe}from"./useUserDetails.vue_vue_type_script_lang-3dc9a373.js";import{u as re}from"./useDetailButtons-7e4732f0.js";import"./useLikeButton-b22feb4d.js";const Ie="/Vector1.png",Te="/Vector2.png",Le="/Vector3.png",Ee="/section4Img.png",Fe={key:0,class:R({resultsContainer:!0})},qe=["src","alt","onClick"],Re={class:"result-item-other"},Ae={class:"result-item-header"},Ue=["onClick"],Be=["innerHTML","onClick"],De={class:"editSectionbtn"},Me=["onClick"],He=["onClick"],Ne=X({__name:"AuthorFeedPage",setup(_){let m;le(()=>{clearTimeout(m)});const d=C([]),y=C(""),S=new DOMParser,A=de(),{app:x}=ce(),U=ne(x),E=_e(x),I=K(),T=C(!0);we(()=>{var s,u;((s=d.value)==null?void 0:s.length)>0&&((u=d.value)==null||u.sort((r,a)=>a.postTime.seconds-r.postTime.seconds),B(()=>{const r=document.getElementById("warningShow");r&&(r.style.display="none")}))}),ue(()=>{clearTimeout(m),B(()=>{const s=document.getElementById("warningShow");s&&(s.style.display="flex",s.textContent="Loading ...")}),F()});async function M(s){y.value="";try{const u=j(U,s.postContain),r=await se(u).catch(a=>{console.log(a)});await fe.post("/postContent",{contentUrl:r}).then(a=>{const f=S.parseFromString(a.data,"text/html");y.value=f.body.innerHTML}).catch(a=>{console.log(a)})}catch{const r=document.getElementById("ErrorShow");r.style.display="flex",r.textContent="Something went wrong, check your internet connection",m=setTimeout(()=>{r.style.display="none"},3e3)}}async function F(){const s=z(G(E,"posts"),Q("posterId","==",I.signedUser.id)),r=(await J(s)).docs.map(async f=>{var i;const t=f.data();await M(t);const n=S.parseFromString(y.value,"text/html");return n.body.querySelectorAll("img").forEach(c=>{c.remove()}),n.body.querySelectorAll("video").forEach(c=>{c.remove()}),(i=n.body.querySelector("h1"))==null||i.remove(),y.value=n.body.innerHTML,t.postContain=y.value,t}),a=await Promise.all(r);d.value=a,T.value=!1}function L(s){A.push(`/post/${s}`)}function k(s){if(s===I.signedUser.id)return A.push("/userProfile");A.push(`/chatterUser/${s}`)}function ee(s){A.push(`/write/${s}`)}async function N(s){try{const u=z(G(E,"posts"),Q("postId","==",s));(await J(u)).forEach(f=>{const t=f.data(),n=ye(E,"posts",t.postId);Se(n)});const a=`ChatterAppFiles/posts/${s}`;O(a)}catch(u){console.log(u)}}async function O(s){const u=j(U,s),a=(await be(u)).items.map(f=>ke(f));await Promise.all(a)}return(s,u)=>{var r;return((r=d.value)==null?void 0:r.length)>0&&T.value===!1?(p(),v("div",Fe,[(p(!0),v(V,null,te(d.value,(a,f)=>(p(),v("div",{key:f,class:"result-item"},[o("img",{src:H(I).signedUser.profilePicture,alt:H(I).signedUser.username+"profile picture",class:"result-item-image",onClick:b(t=>k(a.posterId),["prevent"])},null,8,qe),o("div",Re,[o("div",Ae,[o("span",{onClick:b(t=>k(a.posterId),["prevent"])},D(H(I).signedUser.blogName),9,Ue),o("span",null,D(ae(a.postTime.seconds)),1)]),o("div",{innerHTML:a.postContain,id:"divContent",onClick:b(t=>L(a.postId),["prevent"])},null,8,Be),o("div",De,[o("button",{onClick:b(t=>ee(a.postId),["prevent"])},"Edit",8,Me),o("button",{onClick:b(t=>N(a.postId),["prevent"])},"Delete",8,He)])])]))),128))])):pe("",!0)}}});const Oe=Y(Ne,[["__scopeId","data-v-64da1c49"]]),Ve={class:"btns"},We={key:0,class:R({resultsContainer:!0})},je=["src","alt","onClick"],ze={class:"result-item-other"},Qe={class:"result-item-header"},Ge=["onClick"],Je=["innerHTML","onClick"],Ke={key:1,class:R({resultsContainer:!0})},Xe=["src","alt","onClick"],Ye={class:"result-item-other"},Ze={class:"result-item-header"},et=["onClick"],tt=["innerHTML","onClick"],ot=X({__name:"ReaderFeedPage",setup(_){let m;le(()=>{clearTimeout(m)});const d=C(""),y=new DOMParser;xe();const{app:S}=ce(),A=ne(S),x=K(),U=_e(S),E=de(),I=C(!0),T=C("interested_section"),M=C([]),F=C([]),L=C(),k=C([]),ee=C(0);ue(()=>{clearTimeout(m),B(()=>{const t=document.getElementById("warningShow");t&&(t.style.display="flex",t.textContent="Loading ...")}),a(M.value)});function N(t){F.value=[],k.value=[],T.value=t,B(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Loading ...")}),t==="following_section"&&f(),t==="interested_section"&&a(M.value)}function O(t){E.push(`/post/${t}`)}function s(t){if(t===x.signedUser.id)return E.push("/userProfile");E.push(`/chatterUser/${t}`)}x.signedUser.interests.forEach(t=>{const n=t.trim();M.value.push(n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())});async function u(t){d.value="";try{const n=j(A,t.postContain),i=await se(n).catch(c=>{console.log(c)});await fe.post("/postContent",{contentUrl:i}).then(c=>{const e=y.parseFromString(c.data,"text/html");d.value=e.body.innerHTML}).catch(c=>{console.log(c)})}catch{const i=document.getElementById("ErrorShow");i.style.display="flex",i.textContent="Something went wrong, check your internet connection",m=setTimeout(()=>{i.style.display="none"},3e3)}}async function r(t){L.value=null;try{const n=ye(U,"users",t),i=await Pe(n);if(i.data()!==void 0){const{fullName:c,profilePicture:e,username:h,blogName:w}=i.data(),l={profilePicture:e,posterID:t,fullName:c,username:h,blogName:w},g=ne(),P=j(g,l.profilePicture);try{await se(P).then($=>{l.profilePicture&&(l.profilePicture=$),l.blogName===""&&(l.blogName=`${l.username}Blog`),L.value={id:t,img:l.profilePicture,fullName:l.fullName,username:l.username,blogname:l.blogName}})}catch{const q=document.getElementById("ErrorShow");q.style.display="flex",q.textContent="Something went wrong, check your internet connection",m=setTimeout(()=>{q.style.display="none"},3e3)}}}catch{}}async function a(t){try{const n=t.map(async e=>{const h=z(G(U,"posts"),Q("postTag","==",e),ie("postTime","desc")),w=await J(h);return Promise.all(w.docs.map(async l=>{var $;const g=l.data();await u(g);const P=y.parseFromString(d.value,"text/html");return P.body.querySelectorAll("img").forEach(q=>{q.remove()}),P.body.querySelectorAll("video").forEach(q=>{q.remove()}),($=P.body.querySelector("h1"))==null||$.remove(),d.value=P.body.innerHTML,g.postContain=d.value,await r(g.posterId),g.posterDetails=L.value,L.value=null,I.value=!1,g}))}),c=(await Promise.all(n)).flat();F.value=c,F.value.length>0&&B(()=>{const e=document.getElementById("warningShow");e&&(e.style.display="none")})}catch(n){console.log(n);const i=document.getElementById("ErrorShow");i.style.display="flex",i.textContent="Something went wrong, check your internet connection",m=setTimeout(()=>{i.style.display="none"},3e3)}}async function f(){const t=x.signedUser.following.theFollowings.length<10?x.signedUser.following.theFollowings.length:10,n=Math.floor(10/t);k.value=[];const i=x.signedUser.following.theFollowings.map(async c=>{try{const e=z(G(U,"posts"),Q("posterId","==",c),ie("postTime","desc"),$e(n)),h=await J(e);return Promise.all(h.docs.map(async w=>{var P;const l=w.data();await u(l);const g=y.parseFromString(d.value,"text/html");return g.body.querySelectorAll("img").forEach($=>{$.remove()}),g.body.querySelectorAll("video").forEach($=>{$.remove()}),(P=g.body.querySelector("h1"))==null||P.remove(),d.value=g.body.innerHTML,l.postContain=d.value,await r(l.posterId),l.posterDetails=L.value,L.value=null,I.value=!1,l}))}catch(e){throw console.log(e),new Error("Something went wrong")}});try{const e=(await Promise.all(i)).flat();k.value=e,k.value.length>10&&(ee.value=10),k.value.length>0&&B(()=>{const h=document.getElementById("warningShow");h&&(h.style.display="none")})}catch{const e=document.getElementById("ErrorShow");e.style.display="flex",e.textContent="Something went wrong, check your internet connection",m=setTimeout(()=>{e.style.display="none"},3e3)}}return(t,n)=>{var i,c;return p(),v(V,null,[o("div",Ve,[o("button",{type:"button",onClick:n[0]||(n[0]=e=>N("interested_section")),class:R({active:T.value==="interested_section"})},"Interested",2),o("button",{type:"button",onClick:n[1]||(n[1]=e=>N("following_section")),class:R({active:T.value==="following_section"})},"Followings",2)]),((i=F.value)==null?void 0:i.length)>0&&T.value==="interested_section"?(p(),v("div",We,[(p(!0),v(V,null,te(F.value,(e,h)=>(p(),v("div",{key:h,class:"result-item"},[o("img",{src:e==null?void 0:e.posterDetails.img,alt:(e==null?void 0:e.posterDetails.username)+"profile picture",class:"result-item-image",onClick:b(w=>s(e.posterId),["prevent"])},null,8,je),o("div",ze,[o("div",Qe,[o("span",{onClick:b(w=>s(e.posterId),["prevent"])},D(e==null?void 0:e.posterDetails.blogname),9,Ge),o("span",null,D(ae(e.postTime.seconds)),1)]),o("div",{innerHTML:e.postContain,id:"divContent",onClick:b(w=>O(e.postId),["prevent"])},null,8,Je),W(re,{post:e},null,8,["post"])])]))),128))])):((c=k.value)==null?void 0:c.length)>0&&T.value==="following_section"?(p(),v("div",Ke,[(p(!0),v(V,null,te(k.value,(e,h)=>(p(),v("div",{key:h,class:"result-item"},[o("img",{src:e.posterDetails.img,alt:e.posterDetails.username+"profile picture",class:"result-item-image",onClick:b(w=>s(e.posterId),["prevent"])},null,8,Xe),o("div",Ye,[o("div",Ze,[o("span",{onClick:b(w=>s(e.posterId),["prevent"])},D(e.posterDetails.blogname),9,et),o("span",null,D(ae(e.postTime.seconds)),1)]),o("div",{innerHTML:e.postContain,id:"divContent",onClick:b(w=>O(e.postId),["prevent"])},null,8,tt),W(re,{post:e},null,8,["post"])])]))),128))])):pe("",!0)],64)}}});const nt=Y(ot,[["__scopeId","data-v-81f76eef"]]),st=_=>(ge("data-v-8df9cbd7"),_=_(),ve(),_),at={class:"feedDiv"},it=st(()=>o("div",{class:"lineContainer"},[o("div",{class:R({line:!0})}),o("div",{class:R({line:!0})})],-1)),rt=X({__name:"FeedPage",setup(_){const m=K();return(d,y)=>{const S=me("RouterLink");return p(),v("div",at,[H(m).asReader?(p(),oe(nt,{key:0})):(p(),oe(Oe,{key:1})),W(S,{to:"/write",draggable:""},{default:he(()=>[it]),_:1})])}}});const ct=Y(rt,[["__scopeId","data-v-8df9cbd7"]]),Z=_=>(ge("data-v-7d57d0d9"),_=_(),ve(),_),lt={key:1,id:"landingPagecontainer"},dt={id:"section1"},ut=Z(()=>o("section",{id:"img"},null,-1)),pt={id:"text"},mt=Z(()=>o("h2",null,"Welcome to Chatter: A Haven for Text-Based Content",-1)),ht=Z(()=>o("p",null,"Unleash the power of Words, Connect with Like-minded Readers.",-1)),gt=Z(()=>o("button",null,"Get Started",-1)),vt=Ce('<section id="section2" data-v-7d57d0d9><h2 data-v-7d57d0d9>About Chatter</h2><p data-v-7d57d0d9>Chatter is a multi-functional platform where authors and readers can have access to their own content. It aims to be a traditional bookworm&#39;s heaven and a blog to get access to more text based content. Our vision is to foster an inclusive and vibrant community where diversity is celebrated. We encourage open-mindedness and respect for all individuals, regardless of their backgrounds or beliefs. By promoting dialogue and understanding, we strive.</p></section><section id="section3" data-v-7d57d0d9><h2 data-v-7d57d0d9>Why you should join chatter</h2><p data-v-7d57d0d9>Our goal is to make writers and readers see our platform as their next heaven for blogging, ensuring ease in interactions, connecting with like-minded peers, have access to favorite content based on interests and able to communicate your great ideas with people. </p><section id="section3Parts" data-v-7d57d0d9><section data-v-7d57d0d9><img src="'+Ie+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Analaytics</h3><p data-v-7d57d0d9>Analytics to track the number of views, likes and comment and also analyse the performance of your articles over a poeriod of time</p></section><section data-v-7d57d0d9><img src="'+Te+'" alt="analysis" data-v-7d57d0d9><h3 data-v-7d57d0d9>Social interactions</h3><p data-v-7d57d0d9>Users on the platform can interact with posts they like, comment and engage in dicussions</p></section><section data-v-7d57d0d9><img src="'+Le+'" data-v-7d57d0d9><h3 data-v-7d57d0d9>Content creation</h3><p data-v-7d57d0d9>Write nice and appealing with our in-built markdown, a rich text editor</p></section></section></section><section id="section4" data-v-7d57d0d9><img src="'+Ee+'" alt="Adebola Muhydeen" data-v-7d57d0d9><section data-v-7d57d0d9><blockquote data-v-7d57d0d9><q data-v-7d57d0d9>Chatter has become an integral part of my online experience. As a user of this incredible blogging platform, I have discovered a vibrant community of individuals who are passionate about sharing their ideas and engaging in thoughtful dicussions.</q></blockquote><strong data-v-7d57d0d9>Adebola Muhydeen,</strong> <em data-v-7d57d0d9>Software developer at Apple</em></section></section>',3),_t=X({__name:"LandingPage",setup(_){const m=K();return(d,y)=>{const S=me("RouterLink");return H(m).signedUser.isLogined?(p(),oe(ct,{key:0})):(p(),v("section",lt,[o("section",dt,[ut,o("section",pt,[mt,ht,W(S,{to:"/login"},{default:he(()=>[gt]),_:1})])]),vt]))}}});const xt=Y(_t,[["__scopeId","data-v-7d57d0d9"]]);export{xt as default};
