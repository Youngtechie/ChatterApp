import{u as le,a as z}from"./useAuth.vue_vue_type_script_lang-77171506.js";import{d as X,a as ce,r as f,u as de,x as ye,o as ue,y as _,c as p,f as C,F as O,z as ee,g as t,w as S,k as ge,j as U,t as M,l as he,n as A,h as te,p as we,v as Ce,e as ne,A as Se,q as pe,s as me,b as be,i as ke,B as $e}from"./index-d9c4c67e.js";import{g as xe,r as Pe,l as Ie,d as Te}from"./index.esm2017-34a1c5ec.js";import{P as ve,R as V,k as oe,b as W,_ as Y,d as j,g as fe,y as Fe,x as ie,c as Le}from"./index.esm2017-7370a789.js";import{a as _e}from"./index-72692797.js";import{c as se}from"./useCalculateTime.vue_vue_type_script_lang-ca052a8e.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import{u as Ee}from"./useUserDetails.vue_vue_type_script_lang-4fb6f021.js";import{u as re}from"./useDetailButtons-0e25b9a8.js";const Be="/Vector1.png",De="/Vector2.png",qe="/Vector3.png",Ae="/section4Img.png",Me={key:0,class:A({resultsContainer:!0})},Ue=["onClick"],Re={class:"result-item-other"},He={class:"result-item-header"},Ne=["onClick"],Oe=["innerHTML","onClick"],Ve={class:"editSectionbtn"},We=["onClick"],Ye=["onClick"],je=X({__name:"AuthorFeedPage",setup(b){let l;ce(()=>{clearTimeout(l);const n=document.getElementById("warningShow");n&&(n.style.display="none")});const c=f([]),k=f(""),m=new DOMParser,P=de(),{app:L}=le(),y=xe(L),g=ve(L),$=z();ye(()=>{var n,h;((n=c.value)==null?void 0:n.length)>0&&((h=c.value)==null||h.sort((a,r)=>r.postTime.seconds-a.postTime.seconds),_(()=>{const a=document.getElementById("warningShow");a&&(a.style.display="none")}))}),ue(()=>{clearTimeout(l),_(()=>{const n=document.getElementById("warningShow");n&&(n.style.display="flex",n.textContent="Loading ...")}),E()});async function I(n){k.value="";const h=n.postContain;await _e.post("/.netlify/functions/postContent",{contentUrl:h}).then(a=>{const r=m.parseFromString(a.data.content,"text/html");k.value=r.body.innerHTML})}async function E(){const n=V(Y(g,"posts"),W("posterId","==",$.signedUser.id),oe(10));try{const a=(await j(n)).docs.map(async d=>{var o;const e=d.data();if(e!=null&&e.length!==0){await I(e);const i=m.parseFromString(k.value,"text/html");return i.body.querySelectorAll("img").forEach(w=>{w.remove()}),i.body.querySelectorAll("video").forEach(w=>{w.remove()}),(o=i.body.querySelector("h1"))==null||o.remove(),k.value=i.body.innerHTML,e.postContain=k.value,e}}),r=await Promise.all(a);c.value=r,c.value.length>0&&_(()=>{const d=document.getElementById("warningShow");d&&(d.style.display="none")}),c.value.length===0&&_(()=>{const d=document.getElementById("warningShow");d&&(d.style.display="flex",d.textContent="You have not posted anything yet")})}catch{_(()=>{const a=document.getElementById("warningShow");a&&(a.style.display="flex",a.textContent="Something went wrong, check your internet connection and reload page.",l=setTimeout(()=>{a.style.display="none"},2e3))})}}function T(n){P.push(`/post/${n}`)}function R(n){if(n===$.signedUser.id)return P.push("/userProfile");P.push(`/chatterUser/${n}`)}function J(n){P.push(`/write/${n}`)}async function H(n){try{const h=V(Y(g,"posts"),W("postId","==",n));(await j(h)).forEach(d=>{const e=d.data(),o=fe(g,"posts",e.postId);Fe(o)});const r=`ChatterAppFiles/posts/${n}`;N(r)}catch{_(()=>{const a=document.getElementById("warningShow");a&&(a.style.display="flex",a.textContent="Something went wrong, check your internet connection and try again later.",l=setTimeout(()=>{a.style.display="none"},2e3))});return}}async function N(n){const h=Pe(y,n),r=(await Ie(h)).items.map(d=>Te(d));await Promise.all(r)}return(n,h)=>{var a;return((a=c.value)==null?void 0:a.length)>0?(p(),C("div",Me,[(p(!0),C(O,null,ee(c.value,(r,d)=>(p(),C("div",{key:d,class:"result-item"},[t("div",{class:"imgCon",onClick:S(e=>R(r.posterId),["prevent"]),style:ge({backgroundImage:`url(${U($).signedUser.profilePicture})`})},null,12,Ue),t("div",Re,[t("div",He,[t("span",{onClick:S(e=>R(r.posterId),["prevent"])},M(U($).signedUser.blogName),9,Ne),t("span",null,M(se(r.postTime.seconds)),1)]),t("div",{innerHTML:r.postContain,id:"divContent",onClick:S(e=>T(r.postId),["prevent"])},null,8,Oe),t("div",Ve,[t("button",{onClick:S(e=>J(r.postId),["prevent"])},"Edit",8,We),t("button",{onClick:S(e=>H(r.postId),["prevent"])},"Delete",8,Ye)])])]))),128))])):he("",!0)}}});const ze=Q(je,[["__scopeId","data-v-8ed1d76b"]]),Xe={class:"btns"},Qe={key:0,class:A({resultsContainer:!0})},Ge=["onClick"],Je={class:"result-item-other"},Ke={class:"result-item-header"},Ze=["onClick"],et=["innerHTML","onClick"],tt={key:1,class:A({resultsContainer:!0})},nt=["src","alt","onClick"],ot={class:"result-item-other"},st={class:"result-item-header"},at=["onClick"],it=["innerHTML","onClick"],rt={class:"noFollower"},lt=X({__name:"ReaderFeedPage",setup(b){ce(()=>{const e=document.getElementById("warningShow");e&&(e.style.display="none")});const l=f(""),c=new DOMParser;Ee();const{app:k}=le(),m=z(),P=ve(k),L=de(),y=f(!0),g=f("interested_section"),$=f([]),I=f([]),E=f(),T=f([]),R=f(0),J=f(0);ue(()=>{_(()=>{const e=document.getElementById("warningShow");e&&(e.style.display="flex",e.textContent="Loading ...")}),m.signedUser.interests.forEach(e=>{const o=e.trim();$.value.push(o.charAt(0).toUpperCase()+o.slice(1).toLowerCase())});try{r($.value)}catch{_(()=>{const o=document.getElementById("warningShow");o&&(o.style.display="flex",o.textContent="Something went wrong, check your internet connection and reload page.")})}});function H(e){if(I.value=[],T.value=[],g.value=e,_(()=>{const o=document.getElementById("warningShow");o&&(o.style.display="flex",o.textContent="Loading ...")}),e==="following_section")try{d()}catch{_(()=>{const i=document.getElementById("warningShow");i&&(i.style.display="flex",i.textContent="Something went wrong, check your internet connection and reload page.")})}if(e==="interested_section"){I.value=[];try{r($.value)}catch{_(()=>{const i=document.getElementById("warningShow");i&&(i.style.display="flex",i.textContent="Something went wrong, check your internet connection and reload page.")})}}}function N(e){L.push(`/post/${e}`)}function n(e){if(e===m.signedUser.id)return L.push("/userProfile");L.push(`/chatterUser/${e}`)}async function h(e){l.value="";const o=e.postContain;await _e.post("/.netlify/functions/postContent",{contentUrl:o}).then(i=>{const w=c.parseFromString(i.data.content,"text/html");l.value=w.body.innerHTML})}async function a(e){E.value=null;const o=fe(P,"users",e),i=await Le(o);if(i.data()!==void 0){const{fullName:w,profilePicture:s,username:u,blogName:v}=i.data(),B={profilePicture:s,posterID:e,fullName:w,username:u,blogName:v};E.value={id:e,img:B.profilePicture,fullName:B.fullName,username:B.username,blogname:B.blogName}}}async function r(e){const o=e.length<10?e.length:10,i=Math.floor(10/o);I.value=[];const w=e.map(async v=>{const B=V(Y(P,"posts"),W("postTag","==",v),ie("postTime","desc"),oe(i)),K=await j(B);return Promise.all(K.docs.map(async F=>{var q;const x=F.data();if(x!=null&&x.length!==0){await h(x);const D=c.parseFromString(l.value,"text/html");return D.body.querySelectorAll("img").forEach(Z=>{Z.remove()}),D.body.querySelectorAll("video").forEach(Z=>{Z.remove()}),(q=D.body.querySelector("h1"))==null||q.remove(),l.value=D.body.innerHTML,x.postContain=l.value,await a(x.posterId),x.posterDetails=E.value,E.value=null,y.value=!1,x}}))}),u=(await Promise.all(w)).flat();I.value=u,I.value.length>0&&_(()=>{const v=document.getElementById("warningShow");v&&(v.style.display="none")}),I.value.length===10&&(J.value=10)}async function d(){const e=m.signedUser.following.theFollowings.length<10?m.signedUser.following.theFollowings.length:10,o=Math.floor(10/e);T.value=[];const i=m.signedUser.following.theFollowings.map(async u=>{const v=V(Y(P,"posts"),W("posterId","==",u),ie("postTime","desc"),oe(o)),B=await j(v);return Promise.all(B.docs.map(async K=>{var x;const F=K.data();if(F!=null&&F.length!==0){await h(F);const q=c.parseFromString(l.value,"text/html");return q.body.querySelectorAll("img").forEach(D=>{D.remove()}),q.body.querySelectorAll("video").forEach(D=>{D.remove()}),(x=q.body.querySelector("h1"))==null||x.remove(),l.value=q.body.innerHTML,F.postContain=l.value,await a(F.posterId),F.posterDetails=E.value,E.value=null,y.value=!1,F}}))}),s=(await Promise.all(i)).flat();T.value=s,T.value.length===10&&(R.value=10),T.value.length>0?_(()=>{const u=document.getElementById("warningShow");u&&(u.style.display="none")}):T.value.length===0&&_(()=>{const u=document.getElementById("warningShow");u&&(u.style.display="flex",u.textContent="No post to show from your followings.")})}return(e,o)=>{var i,w;return p(),C(O,null,[t("div",Xe,[t("button",{type:"button",onClick:o[0]||(o[0]=s=>H("interested_section")),class:A({active:g.value==="interested_section"})},"Interested",2),t("button",{type:"button",onClick:o[1]||(o[1]=s=>H("following_section")),class:A({active:g.value==="following_section"})},"Followings",2)]),((i=I.value)==null?void 0:i.length)>0&&g.value==="interested_section"?(p(),C("div",Qe,[(p(!0),C(O,null,ee(I.value,(s,u)=>(p(),C("div",{key:u,class:"result-item"},[t("div",{class:"imgCon",onClick:S(v=>n(s.posterId),["prevent"]),style:ge({backgroundImage:`url(${s==null?void 0:s.posterDetails.img})`})},null,12,Ge),t("div",Je,[t("div",Ke,[t("span",{onClick:S(v=>n(s.posterId),["prevent"])},M(s==null?void 0:s.posterDetails.blogname),9,Ze),t("span",null,M(se(s.postTime.seconds)),1)]),t("div",{innerHTML:s.postContain,id:"divContent",onClick:S(v=>N(s.postId),["prevent"])},null,8,et),te(re,{post:s},null,8,["post"])])]))),128))])):((w=T.value)==null?void 0:w.length)>0&&g.value==="following_section"?(p(),C("div",tt,[(p(!0),C(O,null,ee(T.value,(s,u)=>(p(),C("div",{key:u,class:"result-item"},[t("img",{src:s.posterDetails.img,alt:s.posterDetails.username+"profile picture",class:"result-item-image",onClick:S(v=>n(s.posterId),["prevent"])},null,8,nt),t("div",ot,[t("div",st,[t("span",{onClick:S(v=>n(s.posterId),["prevent"])},M(s.posterDetails.blogname),9,at),t("span",null,M(se(s.postTime.seconds)),1)]),t("div",{innerHTML:s.postContain,id:"divContent",onClick:S(v=>N(s.postId),["prevent"])},null,8,it),te(re,{post:s},null,8,["post"])])]))),128))])):he("",!0),we(t("div",rt," You are not following any one yet. ",512),[[Ce,U(m).signedUser.following.theFollowings.length===0&&g.value==="following_section"]])],64)}}});const ct=Q(lt,[["__scopeId","data-v-3a63864f"]]),ae=b=>(pe("data-v-0bf1f128"),b=b(),me(),b),dt={class:"feedDiv"},ut=ae(()=>t("div",{class:A({line:!0})},null,-1)),gt=ae(()=>t("div",{class:A({line:!0})},null,-1)),ht=[ut,gt],pt=ae(()=>t("div",{id:"warningShow"},null,-1)),mt=X({__name:"FeedPage",setup(b){const l=z(),c=f(!1);let k=f(0),m=f(0);function P(y){c.value=!0,k.value=y.offsetX,m.value=y.offsetY}function L(y){if(c.value){const g=y.clientX-k.value,$=y.clientY-m.value;y.target.style.left=`${g}px`,y.target.style.top=`${$}px`,c.value=!1}}return(y,g)=>(p(),C("div",dt,[U(l).asReader?(p(),ne(ct,{key:0})):(p(),ne(ze,{key:1})),t("div",{class:"lineContainer",draggable:"true",onClick:g[0]||(g[0]=S($=>U(Se).push("/write"),["prevent"])),onDragstart:P,onDragend:L},ht,32),pt]))}});const vt=Q(mt,[["__scopeId","data-v-0bf1f128"]]),G=b=>(pe("data-v-0762c986"),b=b(),me(),b),ft={key:1,id:"landingPagecontainer"},_t={id:"section1"},yt=G(()=>t("section",{id:"img"},null,-1)),wt={id:"text"},Ct=G(()=>t("h2",null,"Welcome to Chatter: A Haven for Text-Based Content",-1)),St=G(()=>t("p",null,"Unleash the power of Words, Connect with Like-minded Readers.",-1)),bt=G(()=>t("button",null,"Get Started",-1)),kt=$e('<section id="section2" data-v-0762c986><h2 data-v-0762c986>About Chatter</h2><p data-v-0762c986>Chatter is a multi-functional platform where authors and readers can have access to their own content. It aims to be a traditional bookworm&#39;s heaven and a blog to get access to more text based content. Our vision is to foster an inclusive and vibrant community where diversity is celebrated. We encourage open-mindedness and respect for all individuals, regardless of their backgrounds or beliefs. By promoting dialogue and understanding, we strive.</p></section><section id="section3" data-v-0762c986><h2 data-v-0762c986>Why you should join chatter</h2><p data-v-0762c986>Our goal is to make writers and readers see our platform as their next heaven for blogging, ensuring ease in interactions, connecting with like-minded peers, have access to favorite content based on interests and able to communicate your great ideas with people. </p><section id="section3Parts" data-v-0762c986><section data-v-0762c986><img src="'+Be+'" data-v-0762c986><h3 data-v-0762c986>Analaytics</h3><p data-v-0762c986>Analytics to track the number of views, likes and comment and also analyse the performance of your articles over a poeriod of time</p></section><section data-v-0762c986><img src="'+De+'" alt="analysis" data-v-0762c986><h3 data-v-0762c986>Social interactions</h3><p data-v-0762c986>Users on the platform can interact with posts they like, comment and engage in dicussions</p></section><section data-v-0762c986><img src="'+qe+'" data-v-0762c986><h3 data-v-0762c986>Content creation</h3><p data-v-0762c986>Write nice and appealing with our in-built markdown, a rich text editor</p></section></section></section><section id="section4" data-v-0762c986><img src="'+Ae+'" alt="Adebola Muhydeen" data-v-0762c986><section data-v-0762c986><blockquote data-v-0762c986><q data-v-0762c986>Chatter has become an integral part of my online experience. As a user of this incredible blogging platform, I have discovered a vibrant community of individuals who are passionate about sharing their ideas and engaging in thoughtful dicussions.</q></blockquote><strong data-v-0762c986>Adebola Muhydeen,</strong> <em data-v-0762c986>Software developer at Apple</em></section></section>',3),$t=X({__name:"LandingPage",setup(b){const l=z();return(c,k)=>{const m=be("RouterLink");return U(l).signedUser.isLogined?(p(),ne(vt,{key:0})):(p(),C("section",ft,[t("section",_t,[yt,t("section",wt,[Ct,St,te(m,{to:"/login"},{default:ke(()=>[bt]),_:1})])]),kt]))}}});const qt=Q($t,[["__scopeId","data-v-0762c986"]]);export{qt as default};
