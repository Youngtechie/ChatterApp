import{d as $,u as M,r as n,q as D,a as L,c as I,e as F,f as T,g as e,w as k,h as w,m as i,A as d,C as S,E as j,p as A,n as O,_ as G}from"./index-f1eab0dd.js";import{P as H,g as z,a as B}from"./index.esm2017-96b642a7.js";import{g as J,r as K,u as Q,a as W}from"./index.esm2017-9ddf60ae.js";import{u as X,a as Y}from"./useAuth.vue_vue_type_script_lang-298818ca.js";import{u as Z}from"./useUserDetails.vue_vue_type_script_lang-3dc9a373.js";import{S as ee}from"./useSignOut.vue_vue_type_script_lang-190ae6a2.js";import{_ as te}from"./useLoadingPage.vue_vue_type_style_index_0_lang-a1fcb670.js";const a=y=>(A("data-v-fe2b46a0"),y=y(),O(),y),se={key:1},oe=["onClick"],ae=["title"],ne={id:"themeImgContainer"},ie=["src"],le=["onSubmit"],ue={class:"addNewImage"},de=a(()=>e("label",{for:"inputImg",class:"custom-file-input",name:"kddjdjdj"},"Change Image",-1)),re=["onChange"],ce={class:"fullName"},me={class:"section"},pe=a(()=>e("label",{for:"fullname"},"Fullname:",-1)),ve=a(()=>e("span",{class:"required-note"},"Required**",-1)),he={class:"username"},_e={class:"section"},ge=a(()=>e("label",{for:"username"},"Username:",-1)),fe=a(()=>e("span",{class:"required-note"},"Required**",-1)),be={class:"bio"},ye=a(()=>e("label",{for:"bio"},"Bio:",-1)),Ue=a(()=>e("span",{class:"required-note"},"Minimum of 50 characters and maximum of 300 characters **",-1)),we={class:"blogname section"},qe=a(()=>e("label",{for:"blogname"},"Blog Name:",-1)),ke={class:"interests"},xe={class:"section"},Ie=a(()=>e("label",{for:"interests"},"Interests:",-1)),Se=a(()=>e("span",{class:"example-note"},"Example: food, travel, sport, programming",-1)),Be={class:"gender"},Ee={class:"radioGroup"},Ce=a(()=>e("h3",null,"Gender:",-1)),Re=a(()=>e("label",{for:"male2"},"Male",-1)),Ne=a(()=>e("label",{for:"female2"},"Female",-1)),Ve=a(()=>e("span",{class:"required-note"},"Required**",-1)),Pe={class:"birthday"},$e={class:"section"},Me=a(()=>e("label",{for:"birthday2"},"Birthday:",-1)),De=a(()=>e("span",{class:"required-note"},"Required**",-1)),Le={class:"Location"},Fe={class:"section"},Te=a(()=>e("label",{for:"country2"}," Country: ",-1)),je=a(()=>e("span",{class:"required-note"},"Required**",-1)),Ae={class:"ShowEmail"},Oe=a(()=>e("label",{for:"showEmail"},"Show my email address:",-1)),Ge=a(()=>e("button",{type:"submit",id:"updateBtn"},"Update",-1)),He=$({__name:"EditProfile",setup(y){Z();const{app:x}=X(),l=M(),o=Y(),E=H(x),C=J(x);function R(){l.go(-1)}const r=n(""),c=n(""),m=n(""),p=n(""),v=n(""),u=n(""),h=n(""),_=n(""),g=n(!1),f=n(null),U=n(null),q=n(!0);function N(){let b=document.getElementById("inputImg");f.value=b.files[0];let t=new FileReader;t.onload=function(){U.value.style.backgroundImage=`url(${t.result})`},t.readAsDataURL(f.value)}function V(){const b=z(E,"users",`${o.signedUser.id}`);if(f.value!==null){const t=K(C,`ChatterAppFiles/avatar/${o.signedUser.id}/${f.value.name}`);Q(t,f.value).then(()=>{W(t).then(s=>{B(b,{profilePicture:s,bio:m.value,blogName:p.value,dateOfBirth:_.value,fullName:r.value,gender:u.value,interests:v.value.split(","),location:h.value,username:c.value,settings:{privacySettings:{showEmail:g.value}}})})}).then(()=>{l.push("/userProfile")}).catch(s=>{console.log(s)})}else B(b,{bio:m.value,blogName:p.value,dateOfBirth:_.value,fullName:r.value,gender:u.value,interests:v.value.split(","),location:h.value,username:c.value,settings:{privacySettings:{showEmail:g.value}}}).then(()=>{l.push("/userProfile")}).catch(t=>{console.log(t)})}D(()=>{U.value&&(U.value.style.backgroundImage=`url(${o.signedUser.profilePicture})`)});let P=setTimeout(()=>{r.value=o.signedUser.fullName,c.value=o.signedUser.username,m.value=o.signedUser.bio,p.value=o.signedUser.blogName,_.value=o.signedUser.dateOfBirth,v.value=o.signedUser.interests.join(","),u.value=o.signedUser.gender,h.value=o.signedUser.location,g.value=o.signedUser.settings.privacySettings.showEmail,o.signedUser.id===void 0&&o.authenticated===!1?l.push("/home"):o.authenticated===!0?o.signedUser.id===void 0&&o.signedUser.username===void 0?l.push({name:"NetworkError",query:{redirect:`${l.currentRoute.value.path}`}}):o.signedUser.id!==void 0&&o.signedUser.username===""?(console.log("User registration not finished... Logging out user....."),ee(),o.authenticated=!1,l.push("/login")):q.value=!1:q.value=!1},5e3);return L(()=>{clearTimeout(P)}),(b,t)=>q.value?(I(),F(te,{key:0,"action-name":"Loading data ..."})):(I(),T("main",se,[e("header",null,[e("button",{onClick:k(R,["prevent"])},"Back",8,oe),e("button",{title:w(o).themeDetails.title,id:"themeBtn",onClick:t[0]||(t[0]=(...s)=>w(o).changeTheme&&w(o).changeTheme(...s))},[e("div",ne,[e("img",{src:w(o).themeDetails.img},null,8,ie)])],8,ae)]),e("form",{class:"registration-form",onSubmit:k(V,["prevent"])},[e("div",ue,[e("div",{ref_key:"imageShow",ref:U,class:"imageShow"},null,512),de,e("input",{type:"file",onChange:k(N,["prevent"]),id:"inputImg"},null,40,re)]),e("div",ce,[e("div",me,[pe,i(e("input",{type:"text",id:"fullname",required:"",autocomplete:"","onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s)},null,512),[[d,r.value]])]),ve]),e("div",he,[e("div",_e,[ge,i(e("input",{type:"text",id:"username",required:"",autocomplete:"username","onUpdate:modelValue":t[2]||(t[2]=s=>c.value=s)},null,512),[[d,c.value]])]),fe]),e("div",be,[e("div",null,[ye,i(e("textarea",{id:"bio","onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),maxlength:"300",minlength:"50"},null,512),[[d,m.value]])]),Ue]),e("div",we,[qe,i(e("input",{type:"text",id:"blogname","onUpdate:modelValue":t[4]||(t[4]=s=>p.value=s)},null,512),[[d,p.value]])]),e("div",ke,[e("div",xe,[Ie,i(e("input",{type:"text",id:"interests",placeholder:"Posts tags separate with a comma","onUpdate:modelValue":t[5]||(t[5]=s=>v.value=s)},null,512),[[d,v.value]])]),Se]),e("div",Be,[e("div",Ee,[Ce,i(e("input",{type:"radio",value:"Male",name:"gender",id:"male2",required:"","onUpdate:modelValue":t[6]||(t[6]=s=>u.value=s)},null,512),[[S,u.value]]),Re,i(e("input",{type:"radio",value:"Female",name:"gender",id:"female2",required:"","onUpdate:modelValue":t[7]||(t[7]=s=>u.value=s)},null,512),[[S,u.value]]),Ne]),Ve]),e("section",Pe,[e("div",$e,[Me,i(e("input",{type:"date",id:"birthday2",required:"","onUpdate:modelValue":t[8]||(t[8]=s=>_.value=s)},null,512),[[d,_.value]])]),De]),e("section",Le,[e("div",Fe,[Te,i(e("input",{type:"text",id:"country2",placeholder:"Country",required:"",autocomplete:"country-name","onUpdate:modelValue":t[9]||(t[9]=s=>h.value=s)},null,512),[[d,h.value]])]),je]),e("section",Ae,[Oe,i(e("input",{type:"checkbox",id:"showEmail","onUpdate:modelValue":t[10]||(t[10]=s=>g.value=s)},null,512),[[j,g.value]])]),Ge],40,le)]))}});const Ze=G(He,[["__scopeId","data-v-fe2b46a0"]]);export{Ze as default};
