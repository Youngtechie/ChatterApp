import{d as P,u as M,r as i,n as F,o as A,b as I,c as D,e as L,f as e,w as k,g as w,i as n,y as d,A as S,E as T,p as j,m as O,_ as G}from"./index-2332f67b.js";import{P as H,g as z,a as B}from"./index.esm2017-1c1d52a4.js";import{g as J,r as K,u as Q}from"./index.esm2017-a0d21084.js";import{u as W,a as X}from"./useAuth.vue_vue_type_script_lang-9fa7d3e2.js";import{u as Y}from"./useUserDetails.vue_vue_type_script_lang-87b949d5.js";import{S as Z}from"./useSignOut.vue_vue_type_script_lang-f4bc486c.js";import{_ as ee}from"./useLoadingPage.vue_vue_type_style_index_0_lang-65d27e50.js";import"./index.esm-06e63244.js";const a=y=>(j("data-v-84966097"),y=y(),O(),y),te={key:1},se=["onClick"],oe=["title"],ae={id:"themeImgContainer"},ie=["src"],ne=["onSubmit"],le={class:"addNewImage"},de=a(()=>e("label",{for:"inputImg",class:"custom-file-input",name:"kddjdjdj"},"Change Image",-1)),re=["onChange"],ue={class:"fullName"},me={class:"section"},ce=a(()=>e("label",{for:"fullname"},"Fullname:",-1)),pe=a(()=>e("span",{class:"required-note"},"Required**",-1)),ve={class:"username"},_e={class:"section"},ge=a(()=>e("label",{for:"username"},"Username:",-1)),he=a(()=>e("span",{class:"required-note"},"Required**",-1)),fe={class:"bio"},be=a(()=>e("label",{for:"bio"},"Bio:",-1)),ye=a(()=>e("span",{class:"required-note"},"Minimum of 50 characters and maximum of 300 characters **",-1)),Ue={class:"blogname section"},we=a(()=>e("label",{for:"blogname"},"Blog Name:",-1)),qe={class:"interests"},ke={class:"section"},xe=a(()=>e("label",{for:"interests"},"Interests:",-1)),Ie=a(()=>e("span",{class:"example-note"},"Example: food, travel, sport, programming",-1)),Se={class:"gender"},Be={class:"radioGroup"},Ee=a(()=>e("h3",null,"Gender:",-1)),Ce=a(()=>e("label",{for:"male2"},"Male",-1)),Re=a(()=>e("label",{for:"female2"},"Female",-1)),Ne=a(()=>e("span",{class:"required-note"},"Required**",-1)),Ve={class:"birthday"},$e={class:"section"},Pe=a(()=>e("label",{for:"birthday2"},"Birthday:",-1)),Me=a(()=>e("span",{class:"required-note"},"Required**",-1)),Fe={class:"Location"},Ae={class:"section"},De=a(()=>e("label",{for:"country2"}," Country: ",-1)),Le=a(()=>e("span",{class:"required-note"},"Required**",-1)),Te={class:"ShowEmail"},je=a(()=>e("label",{for:"showEmail"},"Show my email address:",-1)),Oe=a(()=>e("button",{type:"submit",id:"updateBtn"},"Update",-1)),Ge=P({__name:"EditProfile",setup(y){Y();const{app:x}=W(),r=M(),s=X(),E=H(x),C=J(x);function R(){r.go(-1)}const m=i(""),c=i(""),p=i(""),v=i(""),_=i(""),l=i(""),g=i(""),h=i(""),f=i(!1),u=i(null),U=i(null),q=i(!0);function N(){let b=document.getElementById("inputImg");u.value=b.files[0];let t=new FileReader;t.onload=function(){U.value.style.backgroundImage=`url(${t.result})`},t.readAsDataURL(u.value)}function V(){const b=z(E,"users",`${s.signedUser.id}`);if(u.value!==null){const t=K(C,`ChatterAppFiles/avatar/${s.signedUser.id}/${u.value.name}`);Q(t,u.value),B(b,{profilePicture:`ChatterAppFiles/avatar/${s.signedUser.id}/${u.value.name}`,bio:p.value,blogName:v.value,dateOfBirth:h.value,fullName:m.value,gender:l.value,interests:_.value.split(","),location:g.value,username:c.value,settings:{privacySettings:{showEmail:f.value}}})}else B(b,{bio:p.value,blogName:v.value,dateOfBirth:h.value,fullName:m.value,gender:l.value,interests:_.value.split(","),location:g.value,username:c.value,settings:{privacySettings:{showEmail:f.value}}});r.push("/userProfile")}F(()=>{U.value&&(U.value.style.backgroundImage=`url(${s.signedUser.profilePicture})`)});let $=setTimeout(()=>{m.value=s.signedUser.fullName,c.value=s.signedUser.username,p.value=s.signedUser.bio,v.value=s.signedUser.blogName,h.value=s.signedUser.dateOfBirth,_.value=s.signedUser.interests.join(","),l.value=s.signedUser.gender,g.value=s.signedUser.location,f.value=s.signedUser.settings.privacySettings.showEmail,s.signedUser.id===void 0&&s.authenticated===!1?r.push("/home"):s.authenticated===!0?s.signedUser.id===void 0&&s.signedUser.username===void 0?r.push({name:"NetworkError",query:{redirect:`${r.currentRoute.value.path}`}}):s.signedUser.id!==void 0&&s.signedUser.username===""?(console.log("User registration not finished... Logging out user....."),Z(),s.authenticated=!1,r.push("/login")):q.value=!1:q.value=!1},5e3);return A(()=>{clearTimeout($)}),(b,t)=>q.value?(I(),D(ee,{key:0,"action-name":"Loading data ..."})):(I(),L("main",te,[e("header",null,[e("button",{onClick:k(R,["prevent"])},"Back",8,se),e("button",{title:w(s).themeDetails.title,id:"themeBtn",onClick:t[0]||(t[0]=(...o)=>w(s).changeTheme&&w(s).changeTheme(...o))},[e("div",ae,[e("img",{src:w(s).themeDetails.img},null,8,ie)])],8,oe)]),e("form",{class:"registration-form",onSubmit:k(V,["prevent"])},[e("div",le,[e("div",{ref_key:"imageShow",ref:U,class:"imageShow"},null,512),de,e("input",{type:"file",onChange:k(N,["prevent"]),id:"inputImg"},null,40,re)]),e("div",ue,[e("div",me,[ce,n(e("input",{type:"text",id:"fullname",required:"",autocomplete:"","onUpdate:modelValue":t[1]||(t[1]=o=>m.value=o)},null,512),[[d,m.value]])]),pe]),e("div",ve,[e("div",_e,[ge,n(e("input",{type:"text",id:"username",required:"",autocomplete:"username","onUpdate:modelValue":t[2]||(t[2]=o=>c.value=o)},null,512),[[d,c.value]])]),he]),e("div",fe,[e("div",null,[be,n(e("textarea",{id:"bio","onUpdate:modelValue":t[3]||(t[3]=o=>p.value=o),maxlength:"300",minlength:"50"},null,512),[[d,p.value]])]),ye]),e("div",Ue,[we,n(e("input",{type:"text",id:"blogname","onUpdate:modelValue":t[4]||(t[4]=o=>v.value=o)},null,512),[[d,v.value]])]),e("div",qe,[e("div",ke,[xe,n(e("input",{type:"text",id:"interests",placeholder:"Posts tags separate with a comma","onUpdate:modelValue":t[5]||(t[5]=o=>_.value=o)},null,512),[[d,_.value]])]),Ie]),e("div",Se,[e("div",Be,[Ee,n(e("input",{type:"radio",value:"Male",name:"gender",id:"male2",required:"","onUpdate:modelValue":t[6]||(t[6]=o=>l.value=o)},null,512),[[S,l.value]]),Ce,n(e("input",{type:"radio",value:"Female",name:"gender",id:"female2",required:"","onUpdate:modelValue":t[7]||(t[7]=o=>l.value=o)},null,512),[[S,l.value]]),Re]),Ne]),e("section",Ve,[e("div",$e,[Pe,n(e("input",{type:"date",id:"birthday2",required:"","onUpdate:modelValue":t[8]||(t[8]=o=>h.value=o)},null,512),[[d,h.value]])]),Me]),e("section",Fe,[e("div",Ae,[De,n(e("input",{type:"text",id:"country2",placeholder:"Country",required:"",autocomplete:"country-name","onUpdate:modelValue":t[9]||(t[9]=o=>g.value=o)},null,512),[[d,g.value]])]),Le]),e("section",Te,[je,n(e("input",{type:"checkbox",id:"showEmail","onUpdate:modelValue":t[10]||(t[10]=o=>f.value=o)},null,512),[[T,f.value]])]),Oe],40,ne)]))}});const Ze=G(Ge,[["__scopeId","data-v-84966097"]]);export{Ze as default};
