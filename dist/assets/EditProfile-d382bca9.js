import{d as M,u as T,r as i,x as $,a as D,c as k,e as L,f as j,g as e,w as I,j as B,p as l,B as r,E as q,H as F,q as O,s as G}from"./index-9022b2ad.js";import{P as H,g as z,a as C}from"./index.esm2017-27f00cac.js";import{g as J,r as K,u as Q,a as W}from"./index.esm2017-d5f93b62.js";import{u as X,a as Y}from"./useAuth.vue_vue_type_script_lang-505c08bf.js";import{u as Z}from"./useUserDetails.vue_vue_type_script_lang-f78af288.js";import{S as ee}from"./useSignOut.vue_vue_type_script_lang-b5ec1132.js";import{_ as te}from"./useLoadingPage.vue_vue_type_style_index_0_lang-cb016175.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";const n=w=>(O("data-v-5daf951d"),w=w(),G(),w),oe={key:1},ne=["onClick"],ae=["title"],ie={id:"themeImgContainer"},le=["src"],de=["onSubmit"],re={class:"addNewImage"},ue=n(()=>e("label",{for:"inputImg",class:"custom-file-input",name:"kddjdjdj"},"Change Image",-1)),ce=["onChange"],me={class:"fullName"},pe={class:"section"},ge=n(()=>e("label",{for:"fullname"},"Fullname:",-1)),ve=n(()=>e("span",{class:"required-note"},"Required**",-1)),he={class:"username"},_e={class:"section"},fe=n(()=>e("label",{for:"username"},"Username:",-1)),ye=n(()=>e("span",{class:"required-note"},"Required**",-1)),be={class:"bio"},we=n(()=>e("label",{for:"bio"},"Bio:",-1)),Ue=n(()=>e("span",{class:"required-note"},"Minimum of 30 characters and maximum of 300 characters **",-1)),Be={class:"blogname section"},Se=n(()=>e("label",{for:"blogname"},"Blog Name:",-1)),xe={class:"interests"},Ie={class:"section"},Ee=n(()=>e("label",{for:"interests"},"Interests:",-1)),ke=n(()=>e("span",{class:"example-note"},"Example: food, travel, sport, programming",-1)),qe={class:"gender"},Ce={class:"radioGroup"},Re=n(()=>e("h3",null,"Gender:",-1)),Ve=n(()=>e("label",{for:"male2"},"Male",-1)),Ne=n(()=>e("label",{for:"female2"},"Female",-1)),Pe=n(()=>e("span",{class:"required-note"},"Required**",-1)),Ae={class:"birthday"},Me={class:"section"},Te=n(()=>e("label",{for:"birthday2"},"Birthday:",-1)),$e=n(()=>e("span",{class:"required-note"},"Required**",-1)),De={class:"Location"},Le={class:"section"},je=n(()=>e("label",{for:"country2"}," Country: ",-1)),Fe=n(()=>e("span",{class:"required-note"},"Required**",-1)),Oe={class:"ShowEmail"},Ge=n(()=>e("label",{for:"showEmail"},"Show my email address:",-1)),He=n(()=>e("button",{type:"submit",id:"updateBtn"},"Update",-1)),ze=n(()=>e("div",{id:"warningShow"},null,-1)),Je=M({__name:"EditProfile",setup(w){Z();const{app:E}=X(),c=T(),o=Y(),R=H(E),V=J(E);function N(){c.go(-1)}const m=i(""),p=i(""),g=i(""),v=i(""),h=i(""),d=i(""),_=i(""),f=i(""),y=i(!1),b=i(null),U=i(null),S=i(!0);function P(){let a=document.getElementById("inputImg");b.value=a.files[0];let s=new FileReader;s.onload=function(){U.value.style.backgroundImage=`url(${s.result})`},s.readAsDataURL(b.value)}function A(){var s;const a=z(R,"users",`${o.signedUser.id}`);if((s=document.getElementById("updateBtn"))==null||s.setAttribute("disabled","true"),b.value!==null){const t=K(V,`ChatterAppFiles/avatar/${o.signedUser.id}/${b.value.name}`);Q(t,b.value).then(()=>{W(t).then(u=>{C(a,{profilePicture:u,bio:g.value,blogName:v.value,dateOfBirth:f.value,fullName:m.value,gender:d.value,interests:h.value.split(","),location:_.value,username:p.value,settings:{privacySettings:{showEmail:y.value}}})})}).then(()=>{c.push("/userProfile")}).catch(u=>{console.log(u)}).finally(()=>{var u;(u=document.getElementById("updateBtn"))==null||u.removeAttribute("disabled")})}else C(a,{bio:g.value,blogName:v.value,dateOfBirth:f.value,fullName:m.value,gender:d.value,interests:h.value.split(","),location:_.value,username:p.value,settings:{privacySettings:{showEmail:y.value}}}).then(()=>{c.push("/userProfile")}).catch(()=>{const t=document.getElementById("warningShow");t.style.display="flex",t.textContent="An error occurred, check your internet connection and try again.",x=setTimeout(()=>{t.style.display="none"},2e3)}).finally(()=>{var t;(t=document.getElementById("updateBtn"))==null||t.removeAttribute("disabled")})}$(()=>{U.value&&(U.value.style.backgroundImage=`url(${o.signedUser.profilePicture})`)});let x=setTimeout(()=>{if(m.value=o.signedUser.fullName,p.value=o.signedUser.username,g.value=o.signedUser.bio,v.value=o.signedUser.blogName,f.value=o.signedUser.dateOfBirth,h.value=o.signedUser.interests.join(","),d.value=o.signedUser.gender,_.value=o.signedUser.location,y.value=o.signedUser.settings.privacySettings.showEmail,o.signedUser.id===void 0&&o.authenticated===!1)c.push("/home");else if(o.authenticated===!0)if(o.signedUser.id!==void 0&&o.signedUser.username===""){const a=document.getElementById("warningShow");a.style.display="flex",a.textContent="Registration not complete... Logging you out",ee(),x=setTimeout(()=>{a.style.display="none",o.authenticated=!1,c.push("/login")},2e3)}else if(o.signedUser.id===void 0&&o.signedUser.username===void 0){const a=document.getElementById("warningShow");a.style.display="flex",a.textContent="An error occurred, check your internet connection and try reloading."}else S.value=!1;else S.value=!1},5e3);return D(()=>{clearTimeout(x);const a=document.getElementById("warningShow");a&&(a.style.display="none")}),(a,s)=>S.value?(k(),L(te,{key:0,"action-name":"Loading data ..."})):(k(),j("main",oe,[e("header",null,[e("button",{onClick:I(N,["prevent"])},"Back",8,ne),e("button",{title:B(o).themeDetails.title,id:"themeBtn",onClick:s[0]||(s[0]=(...t)=>B(o).changeTheme&&B(o).changeTheme(...t))},[e("div",ie,[e("img",{src:B(o).themeDetails.img},null,8,le)])],8,ae)]),e("form",{class:"registration-form",onSubmit:I(A,["prevent"])},[e("div",re,[e("div",{ref_key:"imageShow",ref:U,class:"imageShow"},null,512),ue,e("input",{type:"file",onChange:I(P,["prevent"]),id:"inputImg"},null,40,ce)]),e("div",me,[e("div",pe,[ge,l(e("input",{type:"text",id:"fullname",required:"",autocomplete:"","onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t)},null,512),[[r,m.value]])]),ve]),e("div",he,[e("div",_e,[fe,l(e("input",{type:"text",id:"username",required:"",autocomplete:"username","onUpdate:modelValue":s[2]||(s[2]=t=>p.value=t)},null,512),[[r,p.value]])]),ye]),e("div",be,[e("div",null,[we,l(e("textarea",{id:"bio","onUpdate:modelValue":s[3]||(s[3]=t=>g.value=t),maxlength:"300",minlength:"30"},null,512),[[r,g.value]])]),Ue]),e("div",Be,[Se,l(e("input",{type:"text",id:"blogname","onUpdate:modelValue":s[4]||(s[4]=t=>v.value=t)},null,512),[[r,v.value]])]),e("div",xe,[e("div",Ie,[Ee,l(e("input",{type:"text",id:"interests",placeholder:"Posts tags separate with a comma","onUpdate:modelValue":s[5]||(s[5]=t=>h.value=t)},null,512),[[r,h.value]])]),ke]),e("div",qe,[e("div",Ce,[Re,l(e("input",{type:"radio",value:"Male",name:"gender",id:"male2",required:"","onUpdate:modelValue":s[6]||(s[6]=t=>d.value=t)},null,512),[[q,d.value]]),Ve,l(e("input",{type:"radio",value:"Female",name:"gender",id:"female2",required:"","onUpdate:modelValue":s[7]||(s[7]=t=>d.value=t)},null,512),[[q,d.value]]),Ne]),Pe]),e("section",Ae,[e("div",Me,[Te,l(e("input",{type:"date",id:"birthday2",required:"","onUpdate:modelValue":s[8]||(s[8]=t=>f.value=t)},null,512),[[r,f.value]])]),$e]),e("section",De,[e("div",Le,[je,l(e("input",{type:"text",id:"country2",placeholder:"Country",required:"",autocomplete:"country-name","onUpdate:modelValue":s[9]||(s[9]=t=>_.value=t)},null,512),[[r,_.value]])]),Fe]),e("section",Oe,[Ge,l(e("input",{type:"checkbox",id:"showEmail","onUpdate:modelValue":s[10]||(s[10]=t=>y.value=t)},null,512),[[F,y.value]])]),He],40,de),ze]))}});const st=se(Je,[["__scopeId","data-v-5daf951d"]]);export{st as default};
