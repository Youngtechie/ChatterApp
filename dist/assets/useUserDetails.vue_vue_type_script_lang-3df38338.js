import{P as o,a as i,g as r,R as d,b as l,_ as u,d as c}from"./index.esm2017-8a8714eb.js";import{u as g,a as h,o as m}from"./useAuth.vue_vue_type_script_lang-0f4a9525.js";const{app:f,auth:U}=g(),s=h(),a=o(f);async function p(e){const n=d(u(a,"users"),l("email","==",`${e.email}`));try{await c(n).then(t=>{t.docs.length>0&&(s.signedUser=t.docs[0].data(),s.signedUser.isLogined=!0,s.signedUser.analyses.totalComments=t.docs[0].data().comments.total.out,s.signedUser.analyses.totalLiked=t.docs[0].data().likes.total.out,s.signedUser.analyses.totalPosts=t.docs[0].data().posts.length)})}catch(t){console.log(t)}}async function C(){m(U,e=>{e?(s.authenticated=!0,s.userId=e.uid,p(e).then(()=>{i(r(a,"users",`${s.signedUser.id}`),s.signedUser)})):s.authenticated=!1})}export{C as u};
